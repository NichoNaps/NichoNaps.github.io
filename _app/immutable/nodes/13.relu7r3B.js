import{a as u,t as w,c as ue}from"../chunks/u3dcRfK7.js";import{v as Ce,aK as Oe,ak as Ue,y as Re,w as ke,K as $e,R as Ve,z as je,C as Je,af as Ke,p as ae,c as l,r as i,t as X,a as ne,f as Z,aj as A,h as De,g as e,ad as g,s as p,aL as pe,$ as Ge,m as O,aJ as ye,n as We}from"../chunks/DzHGrAB7.js";import{s as de,d as Te,e as we}from"../chunks/hVlh8FA6.js";import{p as $,i as G,a as Ie,b as ce,c as V,d as Se}from"../chunks/CbRT5sQE.js";import{e as xe,i as Me}from"../chunks/Ch4bqiDD.js";import{s as W,r as me}from"../chunks/BW97vLB3.js";import{a as Fe,b as He,c as Qe}from"../chunks/Ctp1LBSw.js";import{p as L}from"../chunks/CYEbeHLi.js";import{h as Xe}from"../chunks/D6Xn1kCk.js";import{t as se}from"../chunks/Cqanicu_.js";import{a as Ze}from"../chunks/-tluWSQ4.js";import{s as Le}from"../chunks/pE0dASaU.js";import{w as Ye}from"../chunks/CA1u_qlU.js";function Pe(d,t,n){ke&&$e();var o=d,a=Ke,s,m=Ce()?Oe:Ue;Re(()=>{m(a,a=t())&&(s&&Ve(s),s=je(()=>n(o)))}),ke&&(o=Je)}var et=w('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function tt(d,t){ae(t,!0);let n=$(t,"borderRadius",3,"10px"),o=$(t,"progress",7,0),a=$(t,"color",3,"rgb(153, 86, 86)"),s=$(t,"extraPadding",3,"18px"),m=$(t,"style",3,"");o(Math.max(1,o()));var c=et(),_=l(c),T=l(_),h=l(T);{var b=k=>{var S=ue(),y=Z(S);Le(y,()=>t.children),u(k,S)};G(h,k=>{t.children&&k(b)})}i(T),i(_),i(c),X(()=>{W(c,"style",`aspect-ratio: 1/1; display: inline-block; ${m()??""}`),W(_,"style",`--ring-width: ${n()??""}; --progress: ${o()??""}%; --ring-color: ${a()??""}; --extra-padding: ${s()??""};`)}),u(d,c),ne()}var at=w('<span class="points-change svelte-muo1s8"> </span>'),nt=w('<span class="point-view svelte-muo1s8"><!> <span class="points svelte-muo1s8"> </span></span>');function Ne(d,t){ae(t,!0);let n=$(t,"formatter",7,null),o=t.amount==null,a=A(0),s=A(L(t.amount));De(()=>{n().format(0)!=n().format(Math.abs(t.amount-e(s)))&&(g(a,t.amount-e(s)),g(s,L(t.amount)))}),n(n()==null?new Intl.NumberFormat("en-US"):n());var m=nt(),c=l(m);Pe(c,()=>e(a),h=>{var b=ue(),k=Z(b);{var S=y=>{var N=at(),B=l(N);i(N),X(j=>{W(N,"style",`color: ${(e(a)>=0?"#0F0":"#F00")??""};`),de(B,`${(e(a)>0?"+":"-")??""}${j??""}`)},[()=>n().format(Math.abs(e(a)))]),u(y,N)};G(k,y=>{e(a)!=0&&y(S)})}u(h,b)});var _=p(c,2),T=l(_,!0);i(_),i(m),X(h=>{se(m,"hide-first",o),se(m,"hide-first-reveal",t.amount!=null&&o),de(T,h)},[()=>n().format(t.amount)]),u(d,m),ne()}var ot=w('<span class="svelte-gdak9n">ðŸª™ <!></span>');function Ee(d,t){var n=ot(),o=p(l(n));Ne(o,{get amount(){return t.amount}}),i(n),u(d,n)}const rt=""+new URL("../assets/122317__anillogic__bk-wind_c5.h3d8NiMB.wav",import.meta.url).href;var st=(d,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,it=w('<button class="btn btn-danger svelte-pmthtr" aria-label="resume"><i class="bi bi-play-fill svelte-pmthtr"></i></button>'),lt=w('<button class="btn btn-outline svelte-pmthtr" aria-label="pause"><i class="bi bi-pause-fill svelte-pmthtr"></i></button>'),ct=w('<div class="center-hz svelte-pmthtr"><button class="btn btn-outline svelte-pmthtr" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-pmthtr"></i></button> <!></div>'),vt=w('<div class="center-hz svelte-pmthtr"><input class="form-control svelte-pmthtr" type="number" style="width: 50%;" min="1" max="50"></div>'),dt=w('<div class="svelte-pmthtr"><div class="timer-subtext center-hz svelte-pmthtr"> </div> <div class="timer-text center-hz svelte-pmthtr"> </div> <!></div>'),ut=(d,t)=>t(!1,!0),mt=w('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-pmthtr">Cash Out <!></button>'),ft=w('<button class="btn btn-primary btn-lg svelte-pmthtr">Start</button>'),ht=w('<div class="center-hz svelte-pmthtr"><div class="center-vt svelte-pmthtr" style="width: 100%;"><div class="appear svelte-pmthtr"><!> <div class="center-hz mt-4 svelte-pmthtr"><!></div></div></div></div>');function bt(d,t){ae(t,!0);let n=$(t,"onFinish",3,void 0),o=$(t,"onStart",3,void 0),a=null;a=new Audio(rt),a.loop=!0;let s=A(!1),m=A(!1),c=A(L(t.mode.length)),_=O(()=>e(c)*60),T=A(L(new Date)),h=A(void 0),b=A(0),k=A(0),S=O(()=>e(b)+e(k)),y=O(()=>e(_)-e(S)),N=O(()=>Math.floor(Math.abs(e(y))/60)%60),B=O(()=>Math.round(Math.abs(e(y)))%60),j=O(()=>`${e(N).toString().padStart(2,"0")}:${e(B).toString().padStart(2,"0")}`),Y=O(()=>new Date(e(T).getTime()+(e(_)-e(k))*1e3)),f=O(()=>Math.min(100,Math.round(e(S)/e(_)*100))),v=[10,5,2,1,0];for(;v[0]>=t.mode.length;)v=v.slice(1);function I(r,F,z="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let E={body:F,img:""};z!=null&&(E.tag=z),new Notification(r,E)}}function x(){g(b,(new Date-e(T))/1e3),e(y)<v[0]*60?(e(y)<0&&v[0]==0?I("Pomodoro","Finished. Good job!"):I("Pomodoro",`${v[0]} minutes remaining.`),v=v.slice(1)):e(y)<0&&(a.paused==!0&&a.play(),v.length==0&&Math.abs(Math.abs(e(y))%60-30)<.6&&I("Pomodoro",`Overtime by ${(Math.abs(e(_)+e(y))/60).toFixed(1)} minutes.`))}function P(){e(s)==!1&&o()&&o()(),Notification.requestPermission().then(r=>{}),g(s,!0),g(m,!1),e(b)!=0&&(g(k,e(k)+e(b)),g(b,0)),g(T,L(new Date)),x(),g(h,L(setInterval(x,1e3)))}function U(r=!1,F=!1){a.pause();let z=e(S)/60;n()(z,r?0:t.mode.calcScore(z,e(c)),F),g(s,!1),g(m,!1),clearInterval(e(h)),g(b,0),g(k,0)}function H(){g(m,!0),a.pause(),clearInterval(e(h))}Ze(()=>{e(s)&&U(!1,!1)});var R=ht();we("keydown",pe,r=>{r.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(s)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&r.key==" "&&(e(m)?P():H(),r.preventDefault())}),we("beforeunload",pe,r=>{e(s)&&(r.preventDefault(),r.returnValue=!0)}),Xe(r=>{X(()=>Ge.title=`${(e(s)?`${e(j)} - `:"")??""}Pomodoro`)});var ee=l(R),q=l(ee),M=l(q);tt(M,{get progress(){return e(f)},get color(){return t.mode.color},style:"width: 100%;",children:(r,F)=>{var z=dt(),E=l(z),oe=l(E,!0);i(E);var K=p(E,2),he=l(K,!0);i(K);var be=p(K,2);{var ze=Q=>{var te=ct(),ie=l(te);ie.__click=[st,U];var _e=p(ie,2);{var Be=re=>{var le=it();le.__click=P,u(re,le)},qe=re=>{var le=lt();le.__click=H,u(re,le)};G(_e,re=>{e(m)?re(Be):re(qe,!1)})}i(te),u(Q,te)},Ae=Q=>{var te=vt(),ie=l(te);me(ie),i(te),Fe(ie,()=>e(c),_e=>g(c,_e)),u(Q,te)};G(be,Q=>{e(s)?Q(ze):Q(Ae,!1)})}i(z),X(Q=>{de(oe,Q),se(K,"paused",e(m)),de(he,e(j))},[()=>e(Y).toLocaleTimeString()]),u(r,z)},$$slots:{default:!0}});var J=p(M,2),fe=l(J);{var D=r=>{var F=mt();F.__click=[ut,U];var z=p(l(F));const E=O(()=>t.mode.calcScore(e(S)/60,e(c)));var oe=O(()=>e(E));Ee(z,{get amount(){return e(oe)}}),i(F),u(r,F)},C=r=>{var F=ft();F.__click=P,u(r,F)};G(fe,r=>{e(s)?r(D):r(C,!1)})}i(J),i(q),i(ee),i(R),X(()=>{se(R,"overDone",e(y)<0),se(R,"almostDone",e(y)<60)}),u(d,R),ne()}Te(["click"]);class ge{constructor({name:t,length:n,color:o,reward:a,hasTask:s=!1}){this.name=t,this.length=n,this.color=o,this.reward=a,this.hasTask=s}calcScore(t,n){let o=5;if(t<.5)return 0;let a=t>n?Math.min(1,n/this.length):t<this.length?t/this.length:1,s=t>n?Math.pow((t-n)/o,2):0;return Math.max(0,Math.round((a-s)*this.reward))}}function ve(d,t,n=null){{let a=localStorage.getItem(d);a!==null&&(t=JSON.parse(a))}const o=Ye(t);return o.subscribe(a=>{console.log("WRITING",a),localStorage.setItem(d,JSON.stringify(a))}),o}var _t=w('<div class="body svelte-mgslqn"><!></div>');function gt(d,t){ae(t,!0);let n=$(t,"visible",15,!0),o=O(()=>n()?Date.now():null);var a=ue();we("click",pe,c=>{n()&&Date.now()-e(o)>200&&n(!1)});var s=Z(a);{var m=c=>{var _=_t(),T=l(_);{var h=b=>{var k=ue(),S=Z(k);Le(S,()=>t.children),u(b,k)};G(T,b=>{t.children&&b(h)})}i(_),u(c,_)};G(s,c=>{n()&&c(m)})}u(d,a),ne()}function pt(d,t,n,o){confirm("Delete all tasks?")&&V(n,L(o()))}function wt(d,t,n,o){let a=t().filter(s=>s.finished==!1);a.length==0?V(n,L(o())):V(n,L(a))}var kt=(d,t)=>g(t,!e(t)),yt=w('<button class="btn btn-secondary option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete Completed</button> <button class="btn btn-danger option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete All</button>',1),St=(d,t,n)=>t()!=null?t()(e(n).finished):null,Dt=w('<i class="bi bi-check-square-fill svelte-1wamo6n"></i>'),Tt=w('<i class="bi bi-check-square svelte-1wamo6n"></i>'),It=w('<div class="center-hz todo-item svelte-1wamo6n"><input type="checkbox" class="btn-check svelte-1wamo6n" autocomplete="off"> <label class="btn btn-outline svelte-1wamo6n" style="border: none;"><!></label> <input class="todo-name svelte-1wamo6n" aria-label="Todo name"></div>'),xt=(d,t,n,o)=>{t(n().length-1)},Mt=w('<div class="center-vt todo-list svelte-1wamo6n"><div class="list-header svelte-1wamo6n"><h3 style="color: white; margin: 0px;" class="svelte-1wamo6n">Task List</h3> <button class="btn btn-outline svelte-1wamo6n" aria-label="Open todo list options"><i class="bi bi-three-dots-vertical svelte-1wamo6n"></i></button></div> <!> <!> <div class="center-hz todo-item mt-3 svelte-1wamo6n"><button class="btn btn-secondary svelte-1wamo6n">Add Task</button></div></div>');function Ft(d,t){ae(t,!0);const[n,o]=Ie(),a=()=>ce(c,"$todos",n);let s=$(t,"onFinish",3,void 0);function m(){return[{name:"",finished:!1}]}const c=ve("todos",m(),m());function _(f){return`todo-item-${Math.min(Math.max(0,f),a().length-1)}-input`}function T(f){V(c,L([...a().slice(0,f+1),{id:Date.now(),name:"",finished:!1},...a().slice(f+1)])),ye().then(()=>{document.getElementById(_(f+1)).focus()})}function h(f,v){var I,x;console.log(f.key),f.key=="Enter"&&a()[v].name!=""?(f.preventDefault(),T(v)):(f.key=="Backspace"||f.key=="Delete")&&a()[v].name==""&&a().length>1?(f.preventDefault(),V(c,L([...a().slice(0,v),...a().slice(v+1)])),ye().then(()=>{var P;(P=document.getElementById(_(v-1)))==null||P.focus()})):f.key=="ArrowUp"?(I=document.getElementById(_(v-1)))==null||I.focus():f.key=="ArrowDown"&&((x=document.getElementById(_(v+1)))==null||x.focus())}let b=A(!1);var k=Mt(),S=l(k),y=p(l(S),2);y.__click=[kt,b],i(S);var N=p(S,2);gt(N,{get visible(){return e(b)},set visible(f){g(b,L(f))},children:(f,v)=>{var I=yt(),x=Z(I);x.__click=[wt,a,c,m];var P=p(x,2);P.__click=[pt,a,c,m],u(f,I)},$$slots:{default:!0}});var B=p(N,2);xe(B,1,a,Me,(f,v,I)=>{var x=It(),P=l(x);me(P),W(P,"id",`todo-btn-${I??""}`),P.__change=[St,s,v];var U=p(P,2);W(U,"for",`todo-btn-${I??""}`);var H=l(U);{var R=M=>{var J=Dt();u(M,J)},ee=M=>{var J=Tt();u(M,J)};G(H,M=>{e(v).finished?M(R):M(ee,!1)})}i(U);var q=p(U,2);me(q),W(q,"id",`todo-item-${I}-input`),q.__keydown=M=>h(M,I),i(x),X(()=>se(x,"finished",e(v).finished)),He(P,()=>e(v).finished,M=>(e(v).finished=M,Se(n,"$todos"))),Fe(q,()=>e(v).name,M=>(e(v).name=M,Se(n,"$todos"))),u(f,x)});var j=p(B,2),Y=l(j);Y.__click=[xt,T,a,c],i(j),i(k),u(d,k),ne(),o()}Te(["click","change","keydown"]);var Lt=w('<span class="svelte-1qmb3u9"><i class="bi bi-x"></i><!></span>');function Pt(d,t){ae(t,!0);const n=new Intl.NumberFormat("en-US",{minimumFractionDigits:1,maximumFractionDigits:1});var o=Lt(),a=p(l(o));Ne(a,{get amount(){return t.amount},formatter:n}),i(o),u(d,o),ne()}var Nt=w('<!> <!> <i class="bi bi-circle"></i>',1),Et=w('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-19wlce9"> </label>',1),zt=w('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&amp;display=swap" rel="stylesheet">  <div class="menu-bar svelte-19wlce9"><!></div> <br> <div class="center-hz svelte-19wlce9"><div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div></div> <div class="blocky-container mt-5 svelte-19wlce9"><div class="svelte-19wlce9"></div> <div style="margin-bottom: 70px;" class="svelte-19wlce9"><!></div> <div class="center-hz svelte-19wlce9"><!></div></div>',1);function Wt(d,t){ae(t,!0);const[n,o]=Ie(),a=()=>ce(y,"$storeLastStart",n),s=()=>ce(S,"$storeLastFinish",n),m=()=>ce(k,"$storeMultiplierSum",n),c=()=>ce(b,"$storePoints",n),_=[],T={work:new ge({name:"Work",length:25,color:"#ab5744",reward:500,hasTask:!0}),break:new ge({name:"Break",length:5,color:"#4d82ab",reward:100}),longbreak:new ge({name:"Long Break",length:10,color:"#237047",reward:200})};let h=A("work");const b=ve("points",0,null),k=ve("multiplier",1,null),S=ve("lastFinish",0,0),y=ve("lastStart",0,0);let N=A(1);function B(){let D=a()>s()?a()-s():Date.now()-s();g(N,L(Math.max(1,m()-Math.pow(D/(10*60*1e3),4))))}De(()=>{const D=setInterval(B,5e3);return()=>clearInterval(D)}),B();function j(){V(y,L(Date.now())),B()}let Y=0;function f(D,C,r){V(b,L(Math.round(c()+C*e(N)))),V(S,L(Date.now())),V(k,e(N)+(C>0?D*.1:0)),B(),r&&(e(h)=="work"?(Y+=D,Y>=T.work.length*3.4?(Y=0,g(h,"longbreak")):g(h,"break")):g(h,"work"))}function v(D){V(b,L(Math.round(c()+100*(D?1:-1)*e(N))))}var I=zt(),x=p(Z(I),6),P=l(x);{var U=D=>{var C=Nt(),r=Z(C);Pt(r,{get amount(){return e(N)}});var F=p(r,2);Ee(F,{get amount(){return c()}}),We(2),u(D,C)};G(P,D=>{D(U)})}i(x);var H=p(x,4),R=l(H);xe(R,21,()=>Object.entries(T),Me,(D,C)=>{let r=()=>e(C)[0],F=()=>e(C)[1];var z=Et(),E=Z(z);me(E);var oe,K=p(E,2),he=l(K,!0);i(K),X(()=>{W(E,"id",`radio-${r()}`),oe!==(oe=r())&&(E.value=(E.__value=r())==null?"":r()),W(K,"for",`radio-${r()}`),W(K,"style",e(h)==r()?`background-color: ${F().color};`:""),de(he,F().name)}),Qe(_,[],E,()=>(r(),e(h)),be=>g(h,be)),u(D,z)}),i(R),i(H);var ee=p(H,2),q=p(l(ee),2),M=l(q);Pe(M,()=>e(h),D=>{bt(D,{get mode(){return T[e(h)]},onFinish:f,onStart:j})}),i(q);var J=p(q,2),fe=l(J);Ft(fe,{onFinish:v}),i(J),i(ee),u(d,I),ne(),o()}export{Wt as component};
