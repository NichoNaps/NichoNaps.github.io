import{a as k,t as p,c as Be}from"../chunks/D8IZ5tij.js";import{aH as je,aI as Le,aJ as qe,o as Ce,x as Y,G as Oe,N as Je,q as Ue,y as Ge,aa as Re,g as we,aE as fe,au as Ve,P as _e,p as ee,c as f,r as u,t as L,a as te,f as re,ac as F,b as me,s as w,i as e,a8 as h,l as B,aK as be,aL as Ke,aG as ge}from"../chunks/DRP5GfAB.js";import{l as he,s as $,d as pe,e as ye,a as He}from"../chunks/DR-GFnl9.js";import{e as Se,i as Ie}from"../chunks/Duy6D2ej.js";import{s as q,r as ne}from"../chunks/DC6H13uQ.js";import{i as Qe,p as M}from"../chunks/DlRuioKL.js";import{p as R,i as H}from"../chunks/kFZv4Qm8.js";import{t as Q}from"../chunks/Bvena8yX.js";import{a as We}from"../chunks/xSQF6w4t.js";import{s as Xe}from"../chunks/DzRVWYVD.js";function Te(r,t,n){Y&&Oe();var l=r,a=Re,i,v=je()?Le:qe;Ce(()=>{v(a,a=t())&&(i&&Je(i),i=Ue(()=>n(l)))}),Y&&(l=Ge)}function Ee(r,t,n=t){var l=je();he(r,"input",a=>{var i=a?r.defaultValue:r.value;if(i=ce(r)?de(i):i,n(i),l&&i!==(i=t())){var v=r.selectionStart,m=r.selectionEnd;r.value=i??"",m!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(m,r.value.length))}}),(Y&&r.defaultValue!==r.value||we(t)==null&&r.value)&&n(ce(r)?de(r.value):r.value),fe(()=>{var a=t();ce(r)&&a===de(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}const ve=new Set;function Ze(r,t,n,l,a=l){var i=n.getAttribute("type")==="checkbox",v=r;let m=!1;if(t!==null)for(var y of t)v=v[y]??(v[y]=[]);v.push(n),he(n,"change",()=>{var s=n.__value;i&&(s=ke(v,s,n.checked)),a(s)},()=>a(i?[]:null)),fe(()=>{var s=l();if(Y&&n.defaultChecked!==n.checked){m=!0;return}i?(s=s||[],n.checked=s.includes(n.__value)):n.checked=Qe(n.__value,s)}),Ve(()=>{var s=v.indexOf(n);s!==-1&&v.splice(s,1)}),ve.has(v)||(ve.add(v),_e(()=>{v.sort((s,_)=>s.compareDocumentPosition(_)===4?-1:1),ve.delete(v)})),_e(()=>{if(m){var s;if(i)s=ke(v,s,n.checked);else{var _=v.find(S=>S.checked);s=_==null?void 0:_.__value}a(s)}})}function Ye(r,t,n=t){he(r,"change",l=>{var a=l?r.defaultChecked:r.checked;n(a)}),(Y&&r.defaultChecked!==r.checked||we(t)==null)&&n(r.checked),fe(()=>{var l=t();r.checked=!!l})}function ke(r,t,n){for(var l=new Set,a=0;a<r.length;a+=1)r[a].checked&&l.add(r[a].__value);return n||l.delete(t),Array.from(l)}function ce(r){var t=r.type;return t==="number"||t==="range"}function de(r){return r===""?null:+r}var $e=p('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function et(r,t){ee(t,!0);let n=R(t,"borderRadius",3,"10px"),l=R(t,"progress",7,0),a=R(t,"color",3,"rgb(153, 86, 86)"),i=R(t,"extraPadding",3,"18px"),v=R(t,"style",3,"");l(Math.max(1,l()));var m=$e(),y=f(m),s=f(y),_=f(s);{var S=o=>{var c=Be(),b=re(c);Xe(b,()=>t.children),k(o,c)};H(_,o=>{t.children&&o(S)})}u(s),u(y),u(m),L(()=>{q(m,"style",`aspect-ratio: 1/1; display: inline-block; ${v()??""}`),q(y,"style",`--ring-width: ${n()??""}; --progress: ${l()??""}%; --ring-color: ${a()??""}; --extra-padding: ${i()??""};`)}),k(r,m),te()}var tt=p('<span class="points-change svelte-15n4znc"> </span>'),at=p('<!> <span class="points svelte-15n4znc"> </span>',1),rt=p('<span class="point-view svelte-15n4znc">ðŸª™ <!></span>');function xe(r,t){ee(t,!0);let n=t.amount==null,l=F(0),a=F(M(t.amount));me(()=>{t.amount!=e(a)&&(h(l,t.amount-e(a)),h(a,M(t.amount)))});var i=rt(),v=w(f(i));Te(v,()=>t.amount,m=>{var y=at(),s=re(y);{var _=c=>{var b=tt(),j=f(b);u(b),L(E=>{q(b,"style",`color: ${(e(l)>=0?"#0F0":"#F00")??""};`),$(j,`${(e(l)>0?"+":"-")??""}${E??""}`)},[()=>Math.abs(e(l))]),k(c,b)};H(s,c=>{e(l)!=0&&c(_)})}var S=w(s,2),o=f(S,!0);u(S),L(()=>$(o,t.amount)),k(m,y)}),u(i),L(()=>{Q(i,"hide-first",n),Q(i,"hide-first-reveal",t.amount!=null&&n)}),k(r,i),te()}var nt=(r,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,lt=p('<button class="btn btn-danger svelte-vyjiyu" aria-label="resume"><i class="bi bi-play-fill svelte-vyjiyu"></i></button>'),it=p('<button class="btn btn-outline svelte-vyjiyu" aria-label="pause"><i class="bi bi-pause-fill svelte-vyjiyu"></i></button>'),st=p('<div class="center-hz svelte-vyjiyu"><button class="btn btn-outline svelte-vyjiyu" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-vyjiyu"></i></button> <!></div>'),ot=p('<div class="center-hz svelte-vyjiyu"><input class="form-control svelte-vyjiyu" type="number" style="width: 50%;" min="1" max="50"></div>'),vt=p('<div class="svelte-vyjiyu"><div class="center-hz svelte-vyjiyu" style="color: #bbbE;"> </div> <div class="timer-text center-hz svelte-vyjiyu"> </div> <!></div>'),ct=(r,t)=>t(!1,!0),dt=p('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-vyjiyu">Cash Out <!></button>'),ut=p('<button class="btn btn-primary btn-lg svelte-vyjiyu">Start</button>'),ft=p('<div class="center-hz svelte-vyjiyu"><div class="center-vt svelte-vyjiyu" style="width: 100%;"><div class="appear svelte-vyjiyu"><!> <div class="center-hz mt-4 svelte-vyjiyu"><!></div></div></div></div>');function mt(r,t){ee(t,!0);let n=R(t,"onFinish",3,void 0),l=F(!1),a=F(!1),i=F(M(t.mode.length)),v=B(()=>e(i)*60),m=F(M(new Date)),y=F(void 0),s=F(0),_=F(0),S=B(()=>e(s)+e(_)),o=B(()=>e(v)-e(S)),c=B(()=>Math.floor(Math.abs(e(o))/60)%60),b=B(()=>Math.round(Math.abs(e(o)))%60),j=B(()=>new Date(e(m).getTime()+(e(v)-e(_))*1e3)),E=B(()=>Math.min(100,Math.round(e(S)/e(v)*100))),I=[10,5,2,1,0];for(;I[0]>=t.mode.length;)I=I.slice(1);function J(g,D,z="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let C={body:D,img:""};z!=null&&(C.tag=z),new Notification(g,C)}}function V(){h(s,(new Date-e(m))/1e3),e(o)<I[0]*60&&(e(o)<0&&I[0]==0?J("Pomodoro","Finished. Good job!"):J("Pomodoro",`${I[0]} minutes remaining.`),I=I.slice(1))}function x(){Notification.requestPermission().then(g=>{}),h(l,!0),h(a,!1),e(s)!=0&&(h(_,e(_)+e(s)),h(s,0)),h(m,M(new Date)),V(),h(y,M(setInterval(V,1e3)))}function T(g=!1,D=!1){let z=e(S)/60;n()(z,g?0:t.mode.calcScore(z,e(i)),D),h(l,!1),h(a,!1),clearInterval(e(y)),h(s,0),h(_,0)}function d(){h(a,!0),clearInterval(e(y))}We(()=>{e(l)&&T(!1,!1)});var P=ft();ye("keydown",be,g=>{g.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(l)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&g.key==" "&&(e(a)?x():d(),g.preventDefault())}),ye("beforeunload",be,g=>{e(l)&&(g.preventDefault(),g.returnValue=!0)}),He(g=>{L((D,z)=>Ke.title=`${D??""}:${z??""} - Pomodoro`,[()=>e(c).toString().padStart(2,"0"),()=>e(b).toString().padStart(2,"0")])});var W=f(P),N=f(W),X=f(N);et(X,{get progress(){return e(E)},get color(){return t.mode.color},style:"width: 100%;",children:(g,D)=>{var z=vt(),C=f(z),se=f(C,!0);u(C);var ae=w(C,2),ze=f(ae);u(ae);var Pe=w(ae,2);{var Fe=O=>{var A=st(),G=f(A);G.__click=[nt,T];var oe=w(G,2);{var Ne=K=>{var Z=lt();Z.__click=x,k(K,Z)},Ae=K=>{var Z=it();Z.__click=d,k(K,Z)};H(oe,K=>{e(a)?K(Ne):K(Ae,!1)})}u(A),k(O,A)},Me=O=>{var A=ot(),G=f(A);ne(G),u(A),Ee(G,()=>e(i),oe=>h(i,oe)),k(O,A)};H(Pe,O=>{e(l)?O(Fe):O(Me,!1)})}u(z),L((O,A,G)=>{$(se,O),Q(ae,"paused",e(a)),$(ze,`${A??""}:${G??""}`)},[()=>e(j).toLocaleTimeString(),()=>e(c).toString().padStart(2,"0"),()=>e(b).toString().padStart(2,"0")]),k(g,z)},$$slots:{default:!0}});var U=w(X,2),le=f(U);{var ie=g=>{var D=dt();D.__click=[ct,T];var z=w(f(D));const C=B(()=>t.mode.calcScore(e(S)/60,e(i)));var se=B(()=>e(C));xe(z,{get amount(){return e(se)}}),u(D),k(g,D)},De=g=>{var D=ut();D.__click=x,k(g,D)};H(le,g=>{e(l)?g(ie):g(De,!1)})}u(U),u(N),u(W),u(P),L(()=>{Q(P,"overDone",e(o)<0),Q(P,"almostDone",e(o)<60)}),k(r,P),te()}pe(["click"]);var ht=(r,t,n)=>t()!=null?t()(e(n).finished):null,_t=p('<i class="bi bi-check-square-fill svelte-1jf04s4"></i>'),bt=p('<i class="bi bi-check-square svelte-1jf04s4"></i>'),gt=p('<div class="center-hz todo-item svelte-1jf04s4"><input type="checkbox" class="btn-check svelte-1jf04s4" autocomplete="off"> <label class="btn btn-outline svelte-1jf04s4" style="border: none;"><!></label> <input class="todo-name svelte-1jf04s4" aria-label="Todo name"></div>'),yt=(r,t,n)=>{t(e(n).length-1)},kt=p('<div class="center-vt todo-list svelte-1jf04s4"><h3 style="color: white; margin: 0px;" class="svelte-1jf04s4">Task List</h3> <!> <div class="center-hz todo-item mt-3 svelte-1jf04s4"><button class="btn btn-secondary svelte-1jf04s4">Add Task</button></div></div>');function jt(r,t){ee(t,!0);let n=R(t,"onFinish",3,void 0);function l(o,c,b=null){{let j=localStorage.getItem(o);j&&(c=JSON.parse(j))}return c}let a=F(M(l("todos",[{name:"",finished:!1}])));me(()=>{localStorage.setItem("todos",JSON.stringify(e(a)))});function i(o){return`todo-item-${Math.min(Math.max(0,o),e(a).length-1)}-input`}function v(o){h(a,M([...e(a).slice(0,o+1),{id:Date.now(),name:"",finished:!1},...e(a).slice(o+1)])),ge().then(()=>{document.getElementById(i(o+1)).focus()})}function m(o,c){var b,j;console.log(o.key),o.key=="Enter"&&e(a)[c].name!=""?(o.preventDefault(),v(c)):(o.key=="Backspace"||o.key=="Delete")&&e(a)[c].name==""&&e(a).length>1?(o.preventDefault(),h(a,M([...e(a).slice(0,c),...e(a).slice(c+1)])),ge().then(()=>{var E;(E=document.getElementById(i(c-1)))==null||E.focus()})):o.key=="ArrowUp"?(b=document.getElementById(i(c-1)))==null||b.focus():o.key=="ArrowDown"&&((j=document.getElementById(i(c+1)))==null||j.focus())}var y=kt(),s=w(f(y),2);Se(s,17,()=>e(a),Ie,(o,c,b)=>{var j=gt(),E=f(j);ne(E),q(E,"id",`todo-btn-${b??""}`),E.__change=[ht,n,c];var I=w(E,2);q(I,"for",`todo-btn-${b??""}`);var J=f(I);{var V=d=>{var P=_t();k(d,P)},x=d=>{var P=bt();k(d,P)};H(J,d=>{e(c).finished?d(V):d(x,!1)})}u(I);var T=w(I,2);ne(T),q(T,"id",`todo-item-${b}-input`),T.__keydown=d=>m(d,b),u(j),L(()=>Q(j,"finished",e(c).finished)),Ye(E,()=>e(c).finished,d=>e(c).finished=d),Ee(T,()=>e(c).name,d=>e(c).name=d),k(o,j)});var _=w(s,2),S=f(_);S.__click=[yt,v,a],u(_),u(y),k(r,y),te()}pe(["change","keydown","click"]);class ue{constructor({name:t,length:n,color:l,reward:a,hasTask:i=!1}){this.name=t,this.length=n,this.color=l,this.reward=a,this.hasTask=i}calcScore(t,n){let l=5;if(t<.5)return 0;let a=t>n?Math.min(1,n/this.length):t<this.length?t/this.length:1,i=t>n?Math.pow((t-n)/l,2):0;return Math.max(0,Math.round((a-i)*this.reward))}}var wt=p('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-jjju7w"> </label>',1),pt=p('<br> <br>  <div class="menu-bar mb-3 svelte-jjju7w"><div></div> <div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div> <!></div> <div class="blocky-container mt-5 svelte-jjju7w"><div class="svelte-jjju7w"></div> <div style="margin-bottom: 70px;" class="svelte-jjju7w"><!></div> <div class="center-hz svelte-jjju7w"><div><!></div></div></div>',1);function Nt(r,t){ee(t,!0);const n=[],l={work:new ue({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new ue({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new ue({name:"Long Break",length:10,color:"#237047",reward:450})};let a=F("work"),i=0;function v(x,T){{let d=parseInt(localStorage.getItem("points"));d&&(T=parseInt(d))}return T}let m=F(M(v("points",0)));me(()=>{localStorage.setItem("points",e(m))});function y(x,T,d){h(m,e(m)+T),d&&(e(a)=="work"?(i+=x,i>=l.work.length*3.4?(i=0,h(a,"longbreak")):h(a,"break")):h(a,"work"))}function s(x){h(m,e(m)+200*(x?1:-1))}var _=pt(),S=w(re(_),4),o=w(f(S),2);Se(o,21,()=>Object.entries(l),Ie,(x,T)=>{let d=()=>e(T)[0],P=()=>e(T)[1];var W=wt(),N=re(W);ne(N);var X,U=w(N,2),le=f(U,!0);u(U),L(()=>{q(N,"id",`radio-${d()}`),X!==(X=d())&&(N.value=(N.__value=d())==null?"":d()),q(U,"for",`radio-${d()}`),q(U,"style",e(a)==d()?`background-color: ${P().color};`:""),$(le,P().name)}),Ze(n,[],N,()=>(d(),e(a)),ie=>h(a,ie)),k(x,W)}),u(o);var c=w(o,2);xe(c,{get amount(){return e(m)}}),u(S);var b=w(S,2),j=w(f(b),2),E=f(j);Te(E,()=>e(a),x=>{mt(x,{get mode(){return l[e(a)]},onFinish:y})}),u(j);var I=w(j,2),J=f(I),V=f(J);jt(V,{onFinish:s}),u(J),u(I),u(b),k(r,_),te()}export{Nt as component};
