import{a as j,t as p,c as Le}from"../chunks/D8IZ5tij.js";import{aH as je,aI as qe,aJ as Ce,o as Oe,x as Y,G as Je,N as Ue,q as Ge,y as Re,aa as Ve,g as we,aE as fe,au as Ke,P as _e,p as ee,c as f,r as u,t as L,a as te,f as ne,ac as z,b as me,s as w,i as e,a8 as h,l as F,aK as be,aL as He,aG as ye}from"../chunks/DRP5GfAB.js";import{l as he,s as $,d as pe,e as ge,a as Qe}from"../chunks/DR-GFnl9.js";import{e as Se,i as Ie}from"../chunks/Duy6D2ej.js";import{s as q,r as le}from"../chunks/DC6H13uQ.js";import{i as We,p as M}from"../chunks/DlRuioKL.js";import{p as R,i as H}from"../chunks/kFZv4Qm8.js";import{t as Q}from"../chunks/Bvena8yX.js";import{a as Xe}from"../chunks/xSQF6w4t.js";import{s as Ze}from"../chunks/DzRVWYVD.js";function Te(r,t,n){Y&&Je();var l=r,a=Ve,i,v=je()?qe:Ce;Oe(()=>{v(a,a=t())&&(i&&Ue(i),i=Ge(()=>n(l)))}),Y&&(l=Re)}function Ee(r,t,n=t){var l=je();he(r,"input",a=>{var i=a?r.defaultValue:r.value;if(i=ce(r)?de(i):i,n(i),l&&i!==(i=t())){var v=r.selectionStart,m=r.selectionEnd;r.value=i??"",m!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(m,r.value.length))}}),(Y&&r.defaultValue!==r.value||we(t)==null&&r.value)&&n(ce(r)?de(r.value):r.value),fe(()=>{var a=t();ce(r)&&a===de(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}const ve=new Set;function Ye(r,t,n,l,a=l){var i=n.getAttribute("type")==="checkbox",v=r;let m=!1;if(t!==null)for(var y of t)v=v[y]??(v[y]=[]);v.push(n),he(n,"change",()=>{var s=n.__value;i&&(s=ke(v,s,n.checked)),a(s)},()=>a(i?[]:null)),fe(()=>{var s=l();if(Y&&n.defaultChecked!==n.checked){m=!0;return}i?(s=s||[],n.checked=s.includes(n.__value)):n.checked=We(n.__value,s)}),Ke(()=>{var s=v.indexOf(n);s!==-1&&v.splice(s,1)}),ve.has(v)||(ve.add(v),_e(()=>{v.sort((s,_)=>s.compareDocumentPosition(_)===4?-1:1),ve.delete(v)})),_e(()=>{if(m){var s;if(i)s=ke(v,s,n.checked);else{var _=v.find(S=>S.checked);s=_==null?void 0:_.__value}a(s)}})}function $e(r,t,n=t){he(r,"change",l=>{var a=l?r.defaultChecked:r.checked;n(a)}),(Y&&r.defaultChecked!==r.checked||we(t)==null)&&n(r.checked),fe(()=>{var l=t();r.checked=!!l})}function ke(r,t,n){for(var l=new Set,a=0;a<r.length;a+=1)r[a].checked&&l.add(r[a].__value);return n||l.delete(t),Array.from(l)}function ce(r){var t=r.type;return t==="number"||t==="range"}function de(r){return r===""?null:+r}var et=p('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function tt(r,t){ee(t,!0);let n=R(t,"borderRadius",3,"10px"),l=R(t,"progress",7,0),a=R(t,"color",3,"rgb(153, 86, 86)"),i=R(t,"extraPadding",3,"18px"),v=R(t,"style",3,"");l(Math.max(1,l()));var m=et(),y=f(m),s=f(y),_=f(s);{var S=o=>{var c=Le(),g=ne(c);Ze(g,()=>t.children),j(o,c)};H(_,o=>{t.children&&o(S)})}u(s),u(y),u(m),L(()=>{q(m,"style",`aspect-ratio: 1/1; display: inline-block; ${v()??""}`),q(y,"style",`--ring-width: ${n()??""}; --progress: ${l()??""}%; --ring-color: ${a()??""}; --extra-padding: ${i()??""};`)}),j(r,m),te()}var at=p('<span class="points-change svelte-15n4znc"> </span>'),rt=p('<!> <span class="points svelte-15n4znc"> </span>',1),nt=p('<span class="point-view svelte-15n4znc">ðŸª™ <!></span>');function De(r,t){ee(t,!0);let n=t.amount==null,l=z(0),a=z(M(t.amount));me(()=>{t.amount!=e(a)&&(h(l,t.amount-e(a)),h(a,M(t.amount)))});var i=nt(),v=w(f(i));Te(v,()=>t.amount,m=>{var y=rt(),s=ne(y);{var _=c=>{var g=at(),k=f(g);u(g),L(T=>{q(g,"style",`color: ${(e(l)>=0?"#0F0":"#F00")??""};`),$(k,`${(e(l)>0?"+":"-")??""}${T??""}`)},[()=>Math.abs(e(l))]),j(c,g)};H(s,c=>{e(l)!=0&&c(_)})}var S=w(s,2),o=f(S,!0);u(S),L(()=>$(o,t.amount)),j(m,y)}),u(i),L(()=>{Q(i,"hide-first",n),Q(i,"hide-first-reveal",t.amount!=null&&n)}),j(r,i),te()}var lt=(r,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,it=p('<button class="btn btn-danger svelte-vyjiyu" aria-label="resume"><i class="bi bi-play-fill svelte-vyjiyu"></i></button>'),st=p('<button class="btn btn-outline svelte-vyjiyu" aria-label="pause"><i class="bi bi-pause-fill svelte-vyjiyu"></i></button>'),ot=p('<div class="center-hz svelte-vyjiyu"><button class="btn btn-outline svelte-vyjiyu" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-vyjiyu"></i></button> <!></div>'),vt=p('<div class="center-hz svelte-vyjiyu"><input class="form-control svelte-vyjiyu" type="number" style="width: 50%;" min="1" max="50"></div>'),ct=p('<div class="svelte-vyjiyu"><div class="center-hz svelte-vyjiyu" style="color: #bbbE;"> </div> <div class="timer-text center-hz svelte-vyjiyu"> </div> <!></div>'),dt=(r,t)=>t(!1,!0),ut=p('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-vyjiyu">Cash Out <!></button>'),ft=p('<button class="btn btn-primary btn-lg svelte-vyjiyu">Start</button>'),mt=p('<div class="center-hz svelte-vyjiyu"><div class="center-vt svelte-vyjiyu" style="width: 100%;"><div class="appear svelte-vyjiyu"><!> <div class="center-hz mt-4 svelte-vyjiyu"><!></div></div></div></div>');function ht(r,t){ee(t,!0);let n=R(t,"onFinish",3,void 0),l=z(!1),a=z(!1),i=z(M(t.mode.length)),v=F(()=>e(i)*60),m=z(M(new Date)),y=z(void 0),s=z(0),_=z(0),S=F(()=>e(s)+e(_)),o=F(()=>e(v)-e(S)),c=F(()=>Math.floor(Math.abs(e(o))/60)%60),g=F(()=>Math.round(Math.abs(e(o)))%60),k=F(()=>`${e(c).toString().padStart(2,"0")}:${e(g).toString().padStart(2,"0")}`),T=F(()=>new Date(e(m).getTime()+(e(v)-e(_))*1e3)),N=F(()=>Math.min(100,Math.round(e(S)/e(v)*100))),E=[10,5,2,1,0];for(;E[0]>=t.mode.length;)E=E.slice(1);function V(b,x,P="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let O={body:x,img:""};P!=null&&(O.tag=P),new Notification(b,O)}}function D(){h(s,(new Date-e(m))/1e3),e(o)<E[0]*60&&(e(o)<0&&E[0]==0?V("Pomodoro","Finished. Good job!"):V("Pomodoro",`${E[0]} minutes remaining.`),E=E.slice(1))}function I(){Notification.requestPermission().then(b=>{}),h(l,!0),h(a,!1),e(s)!=0&&(h(_,e(_)+e(s)),h(s,0)),h(m,M(new Date)),D(),h(y,M(setInterval(D,1e3)))}function d(b=!1,x=!1){let P=e(S)/60;n()(P,b?0:t.mode.calcScore(P,e(i)),x),h(l,!1),h(a,!1),clearInterval(e(y)),h(s,0),h(_,0)}function A(){h(a,!0),clearInterval(e(y))}Xe(()=>{e(l)&&d(!1,!1)});var C=mt();ge("keydown",be,b=>{b.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(l)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&b.key==" "&&(e(a)?I():A(),b.preventDefault())}),ge("beforeunload",be,b=>{e(l)&&(b.preventDefault(),b.returnValue=!0)}),Qe(b=>{L(()=>He.title=`${(e(l)?`${e(k)} - `:"")??""}pomodoro`)});var B=f(C),W=f(B),U=f(W);tt(U,{get progress(){return e(N)},get color(){return t.mode.color},style:"width: 100%;",children:(b,x)=>{var P=ct(),O=f(P),se=f(O,!0);u(O);var re=w(O,2),Pe=f(re,!0);u(re);var Fe=w(re,2);{var Me=J=>{var G=ot(),X=f(G);X.__click=[lt,d];var oe=w(X,2);{var Ae=K=>{var Z=it();Z.__click=I,j(K,Z)},Be=K=>{var Z=st();Z.__click=A,j(K,Z)};H(oe,K=>{e(a)?K(Ae):K(Be,!1)})}u(G),j(J,G)},Ne=J=>{var G=vt(),X=f(G);le(X),u(G),Ee(X,()=>e(i),oe=>h(i,oe)),j(J,G)};H(Fe,J=>{e(l)?J(Me):J(Ne,!1)})}u(P),L(J=>{$(se,J),Q(re,"paused",e(a)),$(Pe,e(k))},[()=>e(T).toLocaleTimeString()]),j(b,P)},$$slots:{default:!0}});var ae=w(U,2),ie=f(ae);{var xe=b=>{var x=ut();x.__click=[dt,d];var P=w(f(x));const O=F(()=>t.mode.calcScore(e(S)/60,e(i)));var se=F(()=>e(O));De(P,{get amount(){return e(se)}}),u(x),j(b,x)},ze=b=>{var x=ft();x.__click=I,j(b,x)};H(ie,b=>{e(l)?b(xe):b(ze,!1)})}u(ae),u(W),u(B),u(C),L(()=>{Q(C,"overDone",e(o)<0),Q(C,"almostDone",e(o)<60)}),j(r,C),te()}pe(["click"]);var _t=(r,t,n)=>t()!=null?t()(e(n).finished):null,bt=p('<i class="bi bi-check-square-fill svelte-1jf04s4"></i>'),yt=p('<i class="bi bi-check-square svelte-1jf04s4"></i>'),gt=p('<div class="center-hz todo-item svelte-1jf04s4"><input type="checkbox" class="btn-check svelte-1jf04s4" autocomplete="off"> <label class="btn btn-outline svelte-1jf04s4" style="border: none;"><!></label> <input class="todo-name svelte-1jf04s4" aria-label="Todo name"></div>'),kt=(r,t,n)=>{t(e(n).length-1)},jt=p('<div class="center-vt todo-list svelte-1jf04s4"><h3 style="color: white; margin: 0px;" class="svelte-1jf04s4">Task List</h3> <!> <div class="center-hz todo-item mt-3 svelte-1jf04s4"><button class="btn btn-secondary svelte-1jf04s4">Add Task</button></div></div>');function wt(r,t){ee(t,!0);let n=R(t,"onFinish",3,void 0);function l(o,c,g=null){{let k=localStorage.getItem(o);k&&(c=JSON.parse(k))}return c}let a=z(M(l("todos",[{name:"",finished:!1}])));me(()=>{localStorage.setItem("todos",JSON.stringify(e(a)))});function i(o){return`todo-item-${Math.min(Math.max(0,o),e(a).length-1)}-input`}function v(o){h(a,M([...e(a).slice(0,o+1),{id:Date.now(),name:"",finished:!1},...e(a).slice(o+1)])),ye().then(()=>{document.getElementById(i(o+1)).focus()})}function m(o,c){var g,k;console.log(o.key),o.key=="Enter"&&e(a)[c].name!=""?(o.preventDefault(),v(c)):(o.key=="Backspace"||o.key=="Delete")&&e(a)[c].name==""&&e(a).length>1?(o.preventDefault(),h(a,M([...e(a).slice(0,c),...e(a).slice(c+1)])),ye().then(()=>{var T;(T=document.getElementById(i(c-1)))==null||T.focus()})):o.key=="ArrowUp"?(g=document.getElementById(i(c-1)))==null||g.focus():o.key=="ArrowDown"&&((k=document.getElementById(i(c+1)))==null||k.focus())}var y=jt(),s=w(f(y),2);Se(s,17,()=>e(a),Ie,(o,c,g)=>{var k=gt(),T=f(k);le(T),q(T,"id",`todo-btn-${g??""}`),T.__change=[_t,n,c];var N=w(T,2);q(N,"for",`todo-btn-${g??""}`);var E=f(N);{var V=d=>{var A=bt();j(d,A)},D=d=>{var A=yt();j(d,A)};H(E,d=>{e(c).finished?d(V):d(D,!1)})}u(N);var I=w(N,2);le(I),q(I,"id",`todo-item-${g}-input`),I.__keydown=d=>m(d,g),u(k),L(()=>Q(k,"finished",e(c).finished)),$e(T,()=>e(c).finished,d=>e(c).finished=d),Ee(I,()=>e(c).name,d=>e(c).name=d),j(o,k)});var _=w(s,2),S=f(_);S.__click=[kt,v,a],u(_),u(y),j(r,y),te()}pe(["change","keydown","click"]);class ue{constructor({name:t,length:n,color:l,reward:a,hasTask:i=!1}){this.name=t,this.length=n,this.color=l,this.reward=a,this.hasTask=i}calcScore(t,n){let l=5;if(t<.5)return 0;let a=t>n?Math.min(1,n/this.length):t<this.length?t/this.length:1,i=t>n?Math.pow((t-n)/l,2):0;return Math.max(0,Math.round((a-i)*this.reward))}}var pt=p('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-jjju7w"> </label>',1),St=p('<br> <br>  <div class="menu-bar mb-3 svelte-jjju7w"><div></div> <div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div> <!></div> <div class="blocky-container mt-5 svelte-jjju7w"><div class="svelte-jjju7w"></div> <div style="margin-bottom: 70px;" class="svelte-jjju7w"><!></div> <div class="center-hz svelte-jjju7w"><div><!></div></div></div>',1);function At(r,t){ee(t,!0);const n=[],l={work:new ue({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new ue({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new ue({name:"Long Break",length:10,color:"#237047",reward:450})};let a=z("work"),i=0;function v(D,I){{let d=parseInt(localStorage.getItem("points"));d&&(I=parseInt(d))}return I}let m=z(M(v("points",0)));me(()=>{localStorage.setItem("points",e(m))});function y(D,I,d){h(m,e(m)+I),d&&(e(a)=="work"?(i+=D,i>=l.work.length*3.4?(i=0,h(a,"longbreak")):h(a,"break")):h(a,"work"))}function s(D){h(m,e(m)+200*(D?1:-1))}var _=St(),S=w(ne(_),4),o=w(f(S),2);Se(o,21,()=>Object.entries(l),Ie,(D,I)=>{let d=()=>e(I)[0],A=()=>e(I)[1];var C=pt(),B=ne(C);le(B);var W,U=w(B,2),ae=f(U,!0);u(U),L(()=>{q(B,"id",`radio-${d()}`),W!==(W=d())&&(B.value=(B.__value=d())==null?"":d()),q(U,"for",`radio-${d()}`),q(U,"style",e(a)==d()?`background-color: ${A().color};`:""),$(ae,A().name)}),Ye(n,[],B,()=>(d(),e(a)),ie=>h(a,ie)),j(D,C)}),u(o);var c=w(o,2);De(c,{get amount(){return e(m)}}),u(S);var g=w(S,2),k=w(f(g),2),T=f(k);Te(T,()=>e(a),D=>{ht(D,{get mode(){return l[e(a)]},onFinish:y})}),u(k);var N=w(k,2),E=f(N),V=f(E);wt(V,{onFinish:s}),u(E),u(N),u(g),j(r,_),te()}export{At as component};
