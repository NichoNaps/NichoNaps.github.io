import{a as f,t as p,c as ue}from"../chunks/u3dcRfK7.js";import{v as Ne,aK as Ae,ak as Le,y as Be,w as be,K as qe,R as Ce,z as Oe,C as Re,af as Ue,p as te,c as r,r as s,t as R,a as ae,f as X,aj as B,h as Je,s as T,g as e,ad as y,aL as me,$ as Ke,m as L,aJ as _e}from"../chunks/DzHGrAB7.js";import{s as ie,d as ge,e as fe}from"../chunks/hVlh8FA6.js";import{e as ye,i as ke}from"../chunks/Ch4bqiDD.js";import{s as U,r as re}from"../chunks/BW97vLB3.js";import{a as pe,b as Ve,c as Ge}from"../chunks/Ctp1LBSw.js";import{p as V,i as G,a as we,b as Te,c as Z,d as he}from"../chunks/CbRT5sQE.js";import{h as We}from"../chunks/D6Xn1kCk.js";import{t as ee}from"../chunks/Cqanicu_.js";import{p as z}from"../chunks/CYEbeHLi.js";import{a as $e}from"../chunks/-tluWSQ4.js";import{s as xe}from"../chunks/pE0dASaU.js";import{w as He}from"../chunks/CA1u_qlU.js";function De(u,t,o){be&&qe();var n=u,a=Ue,l,d=Ne()?Ae:Le;Be(()=>{d(a,a=t())&&(l&&Ce(l),l=Oe(()=>o(n)))}),be&&(n=Re)}var Qe=p('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function Xe(u,t){te(t,!0);let o=V(t,"borderRadius",3,"10px"),n=V(t,"progress",7,0),a=V(t,"color",3,"rgb(153, 86, 86)"),l=V(t,"extraPadding",3,"18px"),d=V(t,"style",3,"");n(Math.max(1,n()));var i=Qe(),b=r(i),h=r(b),I=r(h);{var x=v=>{var S=ue(),F=X(S);xe(F,()=>t.children),f(v,S)};G(I,v=>{t.children&&v(x)})}s(h),s(b),s(i),R(()=>{U(i,"style",`aspect-ratio: 1/1; display: inline-block; ${d()??""}`),U(b,"style",`--ring-width: ${o()??""}; --progress: ${n()??""}%; --ring-color: ${a()??""}; --extra-padding: ${l()??""};`)}),f(u,i),ae()}var Ze=p('<span class="points-change svelte-1exkgvu"> </span>'),Ye=p('<!> <span class="points svelte-1exkgvu"> </span>',1),et=p('<span class="point-view svelte-1exkgvu">ðŸª™ <!></span>');function Ie(u,t){te(t,!0);let o=t.amount==null,n=B(0),a=B(z(t.amount));Je(()=>{t.amount!=e(a)&&(y(n,t.amount-e(a)),y(a,z(t.amount)))});const l=new Intl.NumberFormat("en-US");var d=et(),i=T(r(d));De(i,()=>t.amount,b=>{var h=Ye(),I=X(h);{var x=F=>{var E=Ze(),C=r(E);s(E),R(O=>{U(E,"style",`color: ${(e(n)>=0?"#0F0":"#F00")??""};`),ie(C,`${(e(n)>0?"+":"-")??""}${O??""}`)},[()=>l.format(Math.abs(e(n)))]),f(F,E)};G(I,F=>{e(n)!=0&&F(x)})}var v=T(I,2),S=r(v,!0);s(v),R(F=>ie(S,F),[()=>l.format(t.amount)]),f(b,h)}),s(d),R(()=>{ee(d,"hide-first",o),ee(d,"hide-first-reveal",t.amount!=null&&o)}),f(u,d),ae()}var tt=(u,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,at=p('<button class="btn btn-danger svelte-vyjiyu" aria-label="resume"><i class="bi bi-play-fill svelte-vyjiyu"></i></button>'),nt=p('<button class="btn btn-outline svelte-vyjiyu" aria-label="pause"><i class="bi bi-pause-fill svelte-vyjiyu"></i></button>'),ot=p('<div class="center-hz svelte-vyjiyu"><button class="btn btn-outline svelte-vyjiyu" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-vyjiyu"></i></button> <!></div>'),it=p('<div class="center-hz svelte-vyjiyu"><input class="form-control svelte-vyjiyu" type="number" style="width: 50%;" min="1" max="50"></div>'),st=p('<div class="svelte-vyjiyu"><div class="center-hz svelte-vyjiyu" style="color: #bbbE;"> </div> <div class="timer-text center-hz svelte-vyjiyu"> </div> <!></div>'),rt=(u,t)=>t(!1,!0),lt=p('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-vyjiyu">Cash Out <!></button>'),vt=p('<button class="btn btn-primary btn-lg svelte-vyjiyu">Start</button>'),ct=p('<div class="center-hz svelte-vyjiyu"><div class="center-vt svelte-vyjiyu" style="width: 100%;"><div class="appear svelte-vyjiyu"><!> <div class="center-hz mt-4 svelte-vyjiyu"><!></div></div></div></div>');function dt(u,t){te(t,!0);let o=V(t,"onFinish",3,void 0),n=B(!1),a=B(!1),l=B(z(t.mode.length)),d=L(()=>e(l)*60),i=B(z(new Date)),b=B(void 0),h=B(0),I=B(0),x=L(()=>e(h)+e(I)),v=L(()=>e(d)-e(x)),S=L(()=>Math.floor(Math.abs(e(v))/60)%60),F=L(()=>Math.round(Math.abs(e(v)))%60),E=L(()=>`${e(S).toString().padStart(2,"0")}:${e(F).toString().padStart(2,"0")}`),C=L(()=>new Date(e(i).getTime()+(e(d)-e(I))*1e3)),O=L(()=>Math.min(100,Math.round(e(x)/e(d)*100))),P=[10,5,2,1,0];for(;P[0]>=t.mode.length;)P=P.slice(1);function c(g,M,A="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let J={body:M,img:""};A!=null&&(J.tag=A),new Notification(g,J)}}function m(){y(h,(new Date-e(i))/1e3),e(v)<P[0]*60?(e(v)<0&&P[0]==0?c("Pomodoro","Finished. Good job!"):c("Pomodoro",`${P[0]} minutes remaining.`),P=P.slice(1)):e(v)<0&&P.length==0&&Math.abs(Math.abs(e(v))%60-30)<.6&&c("Pomodoro",`Overtime by ${(Math.abs(e(d)+e(v))/60).toFixed(1)} minutes.`)}function j(){Notification.requestPermission().then(g=>{}),y(n,!0),y(a,!1),e(h)!=0&&(y(I,e(I)+e(h)),y(h,0)),y(i,z(new Date)),m(),y(b,z(setInterval(m,1e3)))}function _(g=!1,M=!1){let A=e(x)/60;o()(A,g?0:t.mode.calcScore(A,e(l)),M),y(n,!1),y(a,!1),clearInterval(e(b)),y(h,0),y(I,0)}function D(){y(a,!0),clearInterval(e(b))}$e(()=>{e(n)&&_(!1,!1)});var k=ct();fe("keydown",me,g=>{g.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(n)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&g.key==" "&&(e(a)?j():D(),g.preventDefault())}),fe("beforeunload",me,g=>{e(n)&&(g.preventDefault(),g.returnValue=!0)}),We(g=>{R(()=>Ke.title=`${(e(n)?`${e(E)} - `:"")??""}Pomodoro`)});var W=r(k),$=r(W),N=r($);Xe(N,{get progress(){return e(O)},get color(){return t.mode.color},style:"width: 100%;",children:(g,M)=>{var A=st(),J=r(A),ve=r(J,!0);s(J);var se=T(J,2),je=r(se,!0);s(se);var Pe=T(se,2);{var Ee=K=>{var Q=ot(),ne=r(Q);ne.__click=[tt,_];var ce=T(ne,2);{var Me=Y=>{var oe=at();oe.__click=j,f(Y,oe)},ze=Y=>{var oe=nt();oe.__click=D,f(Y,oe)};G(ce,Y=>{e(a)?Y(Me):Y(ze,!1)})}s(Q),f(K,Q)},Fe=K=>{var Q=it(),ne=r(Q);re(ne),s(Q),pe(ne,()=>e(l),ce=>y(l,ce)),f(K,Q)};G(Pe,K=>{e(n)?K(Ee):K(Fe,!1)})}s(A),R(K=>{ie(ve,K),ee(se,"paused",e(a)),ie(je,e(E))},[()=>e(C).toLocaleTimeString()]),f(g,A)},$$slots:{default:!0}});var q=T(N,2),w=r(q);{var H=g=>{var M=lt();M.__click=[rt,_];var A=T(r(M));const J=L(()=>t.mode.calcScore(e(x)/60,e(l)));var ve=L(()=>e(J));Ie(A,{get amount(){return e(ve)}}),s(M),f(g,M)},le=g=>{var M=vt();M.__click=j,f(g,M)};G(w,g=>{e(n)?g(H):g(le,!1)})}s(q),s($),s(W),s(k),R(()=>{ee(k,"overDone",e(v)<0),ee(k,"almostDone",e(v)<60)}),f(u,k),ae()}ge(["click"]);class de{constructor({name:t,length:o,color:n,reward:a,hasTask:l=!1}){this.name=t,this.length=o,this.color=n,this.reward=a,this.hasTask=l}calcScore(t,o){let n=5;if(t<.5)return 0;let a=t>o?Math.min(1,o/this.length):t<this.length?t/this.length:1,l=t>o?Math.pow((t-o)/n,2):0;return Math.max(0,Math.round((a-l)*this.reward))}}function Se(u,t,o=null){{let a=localStorage.getItem(u);a!==null&&(t=JSON.parse(a))}const n=He(t);return n.subscribe(a=>{console.log("WRITING",a),localStorage.setItem(u,JSON.stringify(a))}),n}var ut=p('<div class="body svelte-mgslqn"><!></div>');function mt(u,t){te(t,!0);let o=V(t,"visible",15,!0),n=L(()=>o()?Date.now():null);var a=ue();fe("click",me,i=>{o()&&Date.now()-e(n)>200&&o(!1)});var l=X(a);{var d=i=>{var b=ut(),h=r(b);{var I=x=>{var v=ue(),S=X(v);xe(S,()=>t.children),f(x,v)};G(h,x=>{t.children&&x(I)})}s(b),f(i,b)};G(l,i=>{o()&&i(d)})}f(u,a),ae()}function ft(u,t,o,n){confirm("Delete all tasks?")&&Z(o,z(n()))}function bt(u,t,o,n){let a=t().filter(l=>l.finished==!1);a.length==0?Z(o,z(n())):Z(o,z(a))}var _t=(u,t)=>y(t,!e(t)),ht=p('<button class="btn btn-secondary option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete Completed</button> <button class="btn btn-danger option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete All</button>',1),gt=(u,t,o)=>t()!=null?t()(e(o).finished):null,yt=p('<i class="bi bi-check-square-fill svelte-1wamo6n"></i>'),kt=p('<i class="bi bi-check-square svelte-1wamo6n"></i>'),pt=p('<div class="center-hz todo-item svelte-1wamo6n"><input type="checkbox" class="btn-check svelte-1wamo6n" autocomplete="off"> <label class="btn btn-outline svelte-1wamo6n" style="border: none;"><!></label> <input class="todo-name svelte-1wamo6n" aria-label="Todo name"></div>'),wt=(u,t,o,n)=>{t(o().length-1)},Tt=p('<div class="center-vt todo-list svelte-1wamo6n"><div class="list-header svelte-1wamo6n"><h3 style="color: white; margin: 0px;" class="svelte-1wamo6n">Task List</h3> <button class="btn btn-outline svelte-1wamo6n" aria-label="Open todo list options"><i class="bi bi-three-dots-vertical svelte-1wamo6n"></i></button></div> <!> <!> <div class="center-hz todo-item mt-3 svelte-1wamo6n"><button class="btn btn-secondary svelte-1wamo6n">Add Task</button></div></div>');function xt(u,t){te(t,!0);const[o,n]=we(),a=()=>Te(i,"$todos",o);let l=V(t,"onFinish",3,void 0);function d(){return[{name:"",finished:!1}]}const i=Se("todos",d(),d());function b(c){return`todo-item-${Math.min(Math.max(0,c),a().length-1)}-input`}function h(c){Z(i,z([...a().slice(0,c+1),{id:Date.now(),name:"",finished:!1},...a().slice(c+1)])),_e().then(()=>{document.getElementById(b(c+1)).focus()})}function I(c,m){var j,_;console.log(c.key),c.key=="Enter"&&a()[m].name!=""?(c.preventDefault(),h(m)):(c.key=="Backspace"||c.key=="Delete")&&a()[m].name==""&&a().length>1?(c.preventDefault(),Z(i,z([...a().slice(0,m),...a().slice(m+1)])),_e().then(()=>{var D;(D=document.getElementById(b(m-1)))==null||D.focus()})):c.key=="ArrowUp"?(j=document.getElementById(b(m-1)))==null||j.focus():c.key=="ArrowDown"&&((_=document.getElementById(b(m+1)))==null||_.focus())}let x=B(!1);var v=Tt(),S=r(v),F=T(r(S),2);F.__click=[_t,x],s(S);var E=T(S,2);mt(E,{get visible(){return e(x)},set visible(c){y(x,z(c))},children:(c,m)=>{var j=ht(),_=X(j);_.__click=[bt,a,i,d];var D=T(_,2);D.__click=[ft,a,i,d],f(c,j)},$$slots:{default:!0}});var C=T(E,2);ye(C,1,a,ke,(c,m,j)=>{var _=pt(),D=r(_);re(D),U(D,"id",`todo-btn-${j??""}`),D.__change=[gt,l,m];var k=T(D,2);U(k,"for",`todo-btn-${j??""}`);var W=r(k);{var $=w=>{var H=yt();f(w,H)},N=w=>{var H=kt();f(w,H)};G(W,w=>{e(m).finished?w($):w(N,!1)})}s(k);var q=T(k,2);re(q),U(q,"id",`todo-item-${j}-input`),q.__keydown=w=>I(w,j),s(_),R(()=>ee(_,"finished",e(m).finished)),Ve(D,()=>e(m).finished,w=>(e(m).finished=w,he(o,"$todos"))),pe(q,()=>e(m).name,w=>(e(m).name=w,he(o,"$todos"))),f(c,_)});var O=T(C,2),P=r(O);P.__click=[wt,h,a,i],s(O),s(v),f(u,v),ae(),n()}ge(["click","change","keydown"]);var Dt=p('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-16kkolu"> </label>',1),It=p('<div class="menu-bar svelte-16kkolu"><!></div> <br> <div class="center-hz svelte-16kkolu"><div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div></div> <div class="blocky-container mt-5 svelte-16kkolu"><div class="svelte-16kkolu"></div> <div style="margin-bottom: 70px;" class="svelte-16kkolu"><!></div> <div class="center-hz svelte-16kkolu"><!></div></div>',1);function Ot(u,t){te(t,!0);const[o,n]=we(),a=()=>Te(b,"$storePoints",o),l=[],d={work:new de({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new de({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new de({name:"Long Break",length:10,color:"#237047",reward:450})};let i=B("work");const b=Se("points",0,null);let h=0;function I(_,D,k){Z(b,a()+D),k&&(e(i)=="work"?(h+=_,h>=d.work.length*3.4?(h=0,y(i,"longbreak")):y(i,"break")):y(i,"work"))}function x(_){Z(b,a()+200*(_?1:-1))}var v=It(),S=X(v),F=r(S);Ie(F,{get amount(){return a()}}),s(S);var E=T(S,4),C=r(E);ye(C,21,()=>Object.entries(d),ke,(_,D)=>{let k=()=>e(D)[0],W=()=>e(D)[1];var $=Dt(),N=X($);re(N);var q,w=T(N,2),H=r(w,!0);s(w),R(()=>{U(N,"id",`radio-${k()}`),q!==(q=k())&&(N.value=(N.__value=k())==null?"":k()),U(w,"for",`radio-${k()}`),U(w,"style",e(i)==k()?`background-color: ${W().color};`:""),ie(H,W().name)}),Ge(l,[],N,()=>(k(),e(i)),le=>y(i,le)),f(_,$)}),s(C),s(E);var O=T(E,2),P=T(r(O),2),c=r(P);De(c,()=>e(i),_=>{dt(_,{get mode(){return d[e(i)]},onFinish:I})}),s(P);var m=T(P,2),j=r(m);xt(j,{onFinish:x}),s(m),s(O),f(u,v),ae(),n()}export{Ot as component};
