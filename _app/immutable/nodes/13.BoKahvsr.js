import{a as f,t as k,c as ue}from"../chunks/u3dcRfK7.js";import{v as Ne,aK as Ae,ak as Le,y as Be,w as be,K as qe,R as Ce,z as Oe,C as Re,af as Ue,p as te,c as l,r,t as O,a as ae,f as X,aj as L,h as Je,s as p,g as e,ad as y,aL as me,$ as Ke,m as A,aJ as _e}from"../chunks/DzHGrAB7.js";import{s as oe,d as ge,e as fe}from"../chunks/hVlh8FA6.js";import{e as ye,i as pe}from"../chunks/Ch4bqiDD.js";import{s as R,r as re}from"../chunks/BW97vLB3.js";import{a as we,b as Ve,c as Ge}from"../chunks/Ctp1LBSw.js";import{p as V,i as G,a as ke,b as je,c as Z,d as he}from"../chunks/CbRT5sQE.js";import{h as We}from"../chunks/D6Xn1kCk.js";import{t as ee}from"../chunks/Cqanicu_.js";import{p as M}from"../chunks/CYEbeHLi.js";import{a as $e}from"../chunks/-tluWSQ4.js";import{s as Te}from"../chunks/pE0dASaU.js";import{w as He}from"../chunks/CA1u_qlU.js";function De(d,t,i){be&&qe();var n=d,a=Ue,s,_=Ne()?Ae:Le;Be(()=>{_(a,a=t())&&(s&&Ce(s),s=Oe(()=>i(n)))}),be&&(n=Re)}var Qe=k('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function Xe(d,t){te(t,!0);let i=V(t,"borderRadius",3,"10px"),n=V(t,"progress",7,0),a=V(t,"color",3,"rgb(153, 86, 86)"),s=V(t,"extraPadding",3,"18px"),_=V(t,"style",3,"");n(Math.max(1,n()));var o=Qe(),u=l(o),h=l(u),x=l(h);{var j=c=>{var D=ue(),P=X(D);Te(P,()=>t.children),f(c,D)};G(x,c=>{t.children&&c(j)})}r(h),r(u),r(o),O(()=>{R(o,"style",`aspect-ratio: 1/1; display: inline-block; ${_()??""}`),R(u,"style",`--ring-width: ${i()??""}; --progress: ${n()??""}%; --ring-color: ${a()??""}; --extra-padding: ${s()??""};`)}),f(d,o),ae()}var Ze=k('<span class="points-change svelte-15n4znc"> </span>'),Ye=k('<!> <span class="points svelte-15n4znc"> </span>',1),et=k('<span class="point-view svelte-15n4znc">ðŸª™ <!></span>');function Ie(d,t){te(t,!0);let i=t.amount==null,n=L(0),a=L(M(t.amount));Je(()=>{t.amount!=e(a)&&(y(n,t.amount-e(a)),y(a,M(t.amount)))});var s=et(),_=p(l(s));De(_,()=>t.amount,o=>{var u=Ye(),h=X(u);{var x=D=>{var P=Ze(),q=l(P);r(P),O(C=>{R(P,"style",`color: ${(e(n)>=0?"#0F0":"#F00")??""};`),oe(q,`${(e(n)>0?"+":"-")??""}${C??""}`)},[()=>Math.abs(e(n))]),f(D,P)};G(h,D=>{e(n)!=0&&D(x)})}var j=p(h,2),c=l(j,!0);r(j),O(()=>oe(c,t.amount)),f(o,u)}),r(s),O(()=>{ee(s,"hide-first",i),ee(s,"hide-first-reveal",t.amount!=null&&i)}),f(d,s),ae()}var tt=(d,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,at=k('<button class="btn btn-danger svelte-vyjiyu" aria-label="resume"><i class="bi bi-play-fill svelte-vyjiyu"></i></button>'),nt=k('<button class="btn btn-outline svelte-vyjiyu" aria-label="pause"><i class="bi bi-pause-fill svelte-vyjiyu"></i></button>'),it=k('<div class="center-hz svelte-vyjiyu"><button class="btn btn-outline svelte-vyjiyu" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-vyjiyu"></i></button> <!></div>'),ot=k('<div class="center-hz svelte-vyjiyu"><input class="form-control svelte-vyjiyu" type="number" style="width: 50%;" min="1" max="50"></div>'),st=k('<div class="svelte-vyjiyu"><div class="center-hz svelte-vyjiyu" style="color: #bbbE;"> </div> <div class="timer-text center-hz svelte-vyjiyu"> </div> <!></div>'),rt=(d,t)=>t(!1,!0),lt=k('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-vyjiyu">Cash Out <!></button>'),vt=k('<button class="btn btn-primary btn-lg svelte-vyjiyu">Start</button>'),ct=k('<div class="center-hz svelte-vyjiyu"><div class="center-vt svelte-vyjiyu" style="width: 100%;"><div class="appear svelte-vyjiyu"><!> <div class="center-hz mt-4 svelte-vyjiyu"><!></div></div></div></div>');function dt(d,t){te(t,!0);let i=V(t,"onFinish",3,void 0),n=L(!1),a=L(!1),s=L(M(t.mode.length)),_=A(()=>e(s)*60),o=L(M(new Date)),u=L(void 0),h=L(0),x=L(0),j=A(()=>e(h)+e(x)),c=A(()=>e(_)-e(j)),D=A(()=>Math.floor(Math.abs(e(c))/60)%60),P=A(()=>Math.round(Math.abs(e(c)))%60),q=A(()=>`${e(D).toString().padStart(2,"0")}:${e(P).toString().padStart(2,"0")}`),C=A(()=>new Date(e(o).getTime()+(e(_)-e(x))*1e3)),U=A(()=>Math.min(100,Math.round(e(j)/e(_)*100))),E=[10,5,2,1,0];for(;E[0]>=t.mode.length;)E=E.slice(1);function v(g,z,N="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let J={body:z,img:""};N!=null&&(J.tag=N),new Notification(g,J)}}function m(){y(h,(new Date-e(o))/1e3),e(c)<E[0]*60?(e(c)<0&&E[0]==0?v("Pomodoro","Finished. Good job!"):v("Pomodoro",`${E[0]} minutes remaining.`),E=E.slice(1)):e(c)<0&&E.length==0&&Math.abs(Math.abs(e(c))%60-30)<.6&&v("Pomodoro",`Overtime by ${(Math.abs(e(_)+e(c))/60).toFixed(1)} minutes.`)}function S(){Notification.requestPermission().then(g=>{}),y(n,!0),y(a,!1),e(h)!=0&&(y(x,e(x)+e(h)),y(h,0)),y(o,M(new Date)),m(),y(u,M(setInterval(m,1e3)))}function b(g=!1,z=!1){let N=e(j)/60;i()(N,g?0:t.mode.calcScore(N,e(s)),z),y(n,!1),y(a,!1),clearInterval(e(u)),y(h,0),y(x,0)}function I(){y(a,!0),clearInterval(e(u))}$e(()=>{e(n)&&b(!1,!1)});var w=ct();fe("keydown",me,g=>{g.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(n)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&g.key==" "&&(e(a)?S():I(),g.preventDefault())}),fe("beforeunload",me,g=>{e(n)&&(g.preventDefault(),g.returnValue=!0)}),We(g=>{O(()=>Ke.title=`${(e(n)?`${e(q)} - `:"")??""}Pomodoro`)});var W=l(w),$=l(W),F=l($);Xe(F,{get progress(){return e(U)},get color(){return t.mode.color},style:"width: 100%;",children:(g,z)=>{var N=st(),J=l(N),ve=l(J,!0);r(J);var se=p(J,2),xe=l(se,!0);r(se);var Pe=p(se,2);{var Ee=K=>{var Q=it(),ne=l(Q);ne.__click=[tt,b];var ce=p(ne,2);{var Me=Y=>{var ie=at();ie.__click=S,f(Y,ie)},Fe=Y=>{var ie=nt();ie.__click=I,f(Y,ie)};G(ce,Y=>{e(a)?Y(Me):Y(Fe,!1)})}r(Q),f(K,Q)},ze=K=>{var Q=ot(),ne=l(Q);re(ne),r(Q),we(ne,()=>e(s),ce=>y(s,ce)),f(K,Q)};G(Pe,K=>{e(n)?K(Ee):K(ze,!1)})}r(N),O(K=>{oe(ve,K),ee(se,"paused",e(a)),oe(xe,e(q))},[()=>e(C).toLocaleTimeString()]),f(g,N)},$$slots:{default:!0}});var B=p(F,2),T=l(B);{var H=g=>{var z=lt();z.__click=[rt,b];var N=p(l(z));const J=A(()=>t.mode.calcScore(e(j)/60,e(s)));var ve=A(()=>e(J));Ie(N,{get amount(){return e(ve)}}),r(z),f(g,z)},le=g=>{var z=vt();z.__click=S,f(g,z)};G(T,g=>{e(n)?g(H):g(le,!1)})}r(B),r($),r(W),r(w),O(()=>{ee(w,"overDone",e(c)<0),ee(w,"almostDone",e(c)<60)}),f(d,w),ae()}ge(["click"]);class de{constructor({name:t,length:i,color:n,reward:a,hasTask:s=!1}){this.name=t,this.length=i,this.color=n,this.reward=a,this.hasTask=s}calcScore(t,i){let n=5;if(t<.5)return 0;let a=t>i?Math.min(1,i/this.length):t<this.length?t/this.length:1,s=t>i?Math.pow((t-i)/n,2):0;return Math.max(0,Math.round((a-s)*this.reward))}}function Se(d,t,i=null){{let a=localStorage.getItem(d);a!==null&&(t=JSON.parse(a))}const n=He(t);return n.subscribe(a=>{console.log("WRITING",a),localStorage.setItem(d,JSON.stringify(a))}),n}var ut=k('<div class="body svelte-mgslqn"><!></div>');function mt(d,t){te(t,!0);let i=V(t,"visible",15,!0),n=A(()=>i()?Date.now():null);var a=ue();fe("click",me,o=>{i()&&Date.now()-e(n)>200&&i(!1)});var s=X(a);{var _=o=>{var u=ut(),h=l(u);{var x=j=>{var c=ue(),D=X(c);Te(D,()=>t.children),f(j,c)};G(h,j=>{t.children&&j(x)})}r(u),f(o,u)};G(s,o=>{i()&&o(_)})}f(d,a),ae()}function ft(d,t,i,n){confirm("Delete all tasks?")&&Z(i,M(n()))}function bt(d,t,i,n){let a=t().filter(s=>s.finished==!1);a.length==0?Z(i,M(n())):Z(i,M(a))}var _t=(d,t)=>y(t,!e(t)),ht=k('<button class="btn btn-secondary option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete Completed</button> <button class="btn btn-danger option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete All</button>',1),gt=(d,t,i)=>t()!=null?t()(e(i).finished):null,yt=k('<i class="bi bi-check-square-fill svelte-1wamo6n"></i>'),pt=k('<i class="bi bi-check-square svelte-1wamo6n"></i>'),wt=k('<div class="center-hz todo-item svelte-1wamo6n"><input type="checkbox" class="btn-check svelte-1wamo6n" autocomplete="off"> <label class="btn btn-outline svelte-1wamo6n" style="border: none;"><!></label> <input class="todo-name svelte-1wamo6n" aria-label="Todo name"></div>'),kt=(d,t,i,n)=>{t(i().length-1)},jt=k('<div class="center-vt todo-list svelte-1wamo6n"><div class="list-header svelte-1wamo6n"><h3 style="color: white; margin: 0px;" class="svelte-1wamo6n">Task List</h3> <button class="btn btn-outline svelte-1wamo6n" aria-label="Open todo list options"><i class="bi bi-three-dots-vertical svelte-1wamo6n"></i></button></div> <!> <!> <div class="center-hz todo-item mt-3 svelte-1wamo6n"><button class="btn btn-secondary svelte-1wamo6n">Add Task</button></div></div>');function Tt(d,t){te(t,!0);const[i,n]=ke(),a=()=>je(o,"$todos",i);let s=V(t,"onFinish",3,void 0);function _(){return[{name:"",finished:!1}]}const o=Se("todos",_(),_());function u(v){return`todo-item-${Math.min(Math.max(0,v),a().length-1)}-input`}function h(v){Z(o,M([...a().slice(0,v+1),{id:Date.now(),name:"",finished:!1},...a().slice(v+1)])),_e().then(()=>{document.getElementById(u(v+1)).focus()})}function x(v,m){var S,b;console.log(v.key),v.key=="Enter"&&a()[m].name!=""?(v.preventDefault(),h(m)):(v.key=="Backspace"||v.key=="Delete")&&a()[m].name==""&&a().length>1?(v.preventDefault(),Z(o,M([...a().slice(0,m),...a().slice(m+1)])),_e().then(()=>{var I;(I=document.getElementById(u(m-1)))==null||I.focus()})):v.key=="ArrowUp"?(S=document.getElementById(u(m-1)))==null||S.focus():v.key=="ArrowDown"&&((b=document.getElementById(u(m+1)))==null||b.focus())}let j=L(!1);var c=jt(),D=l(c),P=p(l(D),2);P.__click=[_t,j],r(D);var q=p(D,2);mt(q,{get visible(){return e(j)},set visible(v){y(j,M(v))},children:(v,m)=>{var S=ht(),b=X(S);b.__click=[bt,a,o,_];var I=p(b,2);I.__click=[ft,a,o,_],f(v,S)},$$slots:{default:!0}});var C=p(q,2);ye(C,1,a,pe,(v,m,S)=>{var b=wt(),I=l(b);re(I),R(I,"id",`todo-btn-${S??""}`),I.__change=[gt,s,m];var w=p(I,2);R(w,"for",`todo-btn-${S??""}`);var W=l(w);{var $=T=>{var H=yt();f(T,H)},F=T=>{var H=pt();f(T,H)};G(W,T=>{e(m).finished?T($):T(F,!1)})}r(w);var B=p(w,2);re(B),R(B,"id",`todo-item-${S}-input`),B.__keydown=T=>x(T,S),r(b),O(()=>ee(b,"finished",e(m).finished)),Ve(I,()=>e(m).finished,T=>(e(m).finished=T,he(i,"$todos"))),we(B,()=>e(m).name,T=>(e(m).name=T,he(i,"$todos"))),f(v,b)});var U=p(C,2),E=l(U);E.__click=[kt,h,a,o],r(U),r(c),f(d,c),ae(),n()}ge(["click","change","keydown"]);var Dt=k('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-jjju7w"> </label>',1),It=k('<br> <br>  <div class="menu-bar mb-3 svelte-jjju7w"><div></div> <div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div> <!></div> <div class="blocky-container mt-5 svelte-jjju7w"><div class="svelte-jjju7w"></div> <div style="margin-bottom: 70px;" class="svelte-jjju7w"><!></div> <div class="center-hz svelte-jjju7w"><div><!></div></div></div>',1);function Ot(d,t){te(t,!0);const[i,n]=ke(),a=()=>je(u,"$storePoints",i),s=[],_={work:new de({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new de({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new de({name:"Long Break",length:10,color:"#237047",reward:450})};let o=L("work");const u=Se("points",0,null);let h=0;function x(b,I,w){Z(u,a()+I),w&&(e(o)=="work"?(h+=b,h>=_.work.length*3.4?(h=0,y(o,"longbreak")):y(o,"break")):y(o,"work"))}function j(b){Z(u,a()+200*(b?1:-1))}var c=It(),D=p(X(c),4),P=p(l(D),2);ye(P,21,()=>Object.entries(_),pe,(b,I)=>{let w=()=>e(I)[0],W=()=>e(I)[1];var $=Dt(),F=X($);re(F);var B,T=p(F,2),H=l(T,!0);r(T),O(()=>{R(F,"id",`radio-${w()}`),B!==(B=w())&&(F.value=(F.__value=w())==null?"":w()),R(T,"for",`radio-${w()}`),R(T,"style",e(o)==w()?`background-color: ${W().color};`:""),oe(H,W().name)}),Ge(s,[],F,()=>(w(),e(o)),le=>y(o,le)),f(b,$)}),r(P);var q=p(P,2);Ie(q,{get amount(){return a()}}),r(D);var C=p(D,2),U=p(l(C),2),E=l(U);De(E,()=>e(o),b=>{dt(b,{get mode(){return _[e(o)]},onFinish:x})}),r(U);var v=p(U,2),m=l(v),S=l(m);Tt(S,{onFinish:j}),r(m),r(v),r(C),f(d,c),ae(),n()}export{Ot as component};
