import{a as y,t as D,c as De}from"../chunks/__pD-E1O.js";import{aG as fe,aH as Pe,aI as Te,o as ze,x as V,G as Me,P as Ne,q as qe,y as Le,aa as Ee,aD as me,as as Fe,R as ce,g as Oe,p as ue,c as d,r as c,t as W,a as _e,f as $,ac as I,s as k,i as e,aJ as Re,n as Ae,l as T,a8 as u}from"../chunks/Vng9JeKr.js";import{l as be,d as Ue,e as Be,s as C}from"../chunks/DqXEDVeu.js";import{e as Ce,i as Ge}from"../chunks/91yU5eQC.js";import{s as G,r as ee}from"../chunks/CdfxN9_7.js";import{i as Ve,p as L}from"../chunks/DoeVP_yN.js";import{p as z,i as ae,s as We}from"../chunks/Cyf_uJ_U.js";import{t as je}from"../chunks/Bvena8yX.js";import{a as He}from"../chunks/Bd76b4vJ.js";import{s as Je}from"../chunks/DsDJA76v.js";function Ze(a,r,s){V&&Me();var n=a,o=Ee,i,t=fe()?Pe:Te;ze(()=>{t(o,o=r())&&(i&&Ne(i),i=qe(()=>s(n)))}),V&&(n=Le)}function ve(a,r,s=r){var n=fe();be(a,"input",o=>{var i=o?a.defaultValue:a.value;if(i=X(a)?Y(i):i,s(i),n&&i!==(i=r())){var t=a.selectionStart,f=a.selectionEnd;a.value=i??"",f!==null&&(a.selectionStart=t,a.selectionEnd=Math.min(f,a.value.length))}}),(V&&a.defaultValue!==a.value||Oe(r)==null&&a.value)&&s(X(a)?Y(a.value):a.value),me(()=>{var o=r();X(a)&&o===Y(a.value)||a.type==="date"&&!o&&!a.value||o!==a.value&&(a.value=o??"")})}const Q=new Set;function Ke(a,r,s,n,o=n){var i=s.getAttribute("type")==="checkbox",t=a;let f=!1;if(r!==null)for(var m of r)t=t[m]??(t[m]=[]);t.push(s),be(s,"change",()=>{var l=s.__value;i&&(l=de(t,l,s.checked)),o(l)},()=>o(i?[]:null)),me(()=>{var l=n();if(V&&s.defaultChecked!==s.checked){f=!0;return}i?(l=l||[],s.checked=l.includes(s.__value)):s.checked=Ve(s.__value,l)}),Fe(()=>{var l=t.indexOf(s);l!==-1&&t.splice(l,1)}),Q.has(t)||(Q.add(t),ce(()=>{t.sort((l,v)=>l.compareDocumentPosition(v)===4?-1:1),Q.delete(t)})),ce(()=>{if(f){var l;if(i)l=de(t,l,s.checked);else{var v=t.find(h=>h.checked);l=v==null?void 0:v.__value}o(l)}})}function de(a,r,s){for(var n=new Set,o=0;o<a.length;o+=1)a[o].checked&&n.add(a[o].__value);return s||n.delete(r),Array.from(n)}function X(a){var r=a.type;return r==="number"||r==="range"}function Y(a){return a===""?null:+a}var Qe=D('<div style="aspect-ratio: 1/1; display: inline-block;"><div class="backing svelte-efxvsm"><div><!></div></div></div>');function Xe(a,r){ue(r,!0);let s=z(r,"borderRadius",3,"10px"),n=z(r,"progress",7,0),o=z(r,"color",3,"rgb(153, 86, 86)"),i=z(r,"extraPadding",3,"18px");n(Math.max(1,n()));var t=Qe(),f=d(t),m=d(f),l=d(m);{var v=h=>{var g=De(),b=$(g);Je(b,()=>r.children),y(h,g)};ae(l,h=>{r.children&&h(v)})}c(m),c(f),c(t),W(()=>G(f,"style",`--ring-width: ${s()??""}; --progress: ${n()??""}%; --ring-color: ${o()??""}; --extra-padding: ${i()??""};`)),y(a,t),_e()}var Ye=D('<div class="svelte-1fm6inc"><h1 class="timer-text center-hz svelte-1fm6inc"> </h1> <div class="timer-subtext center-hz svelte-1fm6inc"> </div></div>'),$e=D('<button class="btn btn-danger svelte-1fm6inc" aria-label="resume"><i class="bi bi-play-fill svelte-1fm6inc"></i></button>'),ea=D('<button class="btn btn-secondary svelte-1fm6inc" aria-label="pause"><i class="bi bi-pause-fill svelte-1fm6inc"></i></button>'),aa=D('<div class="appear svelte-1fm6inc"><!> <div class="timer-btns center-hz appear mt-3 svelte-1fm6inc"><button class="btn btn-secondary svelte-1fm6inc" aria-label="quit"><i class="bi bi-stop-circle-fill svelte-1fm6inc"></i></button> <!> <span class="svelte-1fm6inc"> </span></div> <div class="center-hz svelte-1fm6inc"></div></div>'),ta=D('<div class="center-vt svelte-1fm6inc"><div class="form-group svelte-1fm6inc"><label class="svelte-1fm6inc">Duration: <input class="form-control svelte-1fm6inc" type="number" min="1" max="50"></label></div> <div class="form-group svelte-1fm6inc"><label class="svelte-1fm6inc">What would you like to work on? <input class="form-control svelte-1fm6inc" placeholder="Set task name"></label></div> <button class="btn btn-primary mt-4 svelte-1fm6inc">Start</button></div>'),ra=D('<div class="center-hz svelte-1fm6inc"><div class="center-vt svelte-1fm6inc"><div class="center-hz svelte-1fm6inc"></div> <div class="center-hz svelte-1fm6inc"><!></div></div></div>');function la(a,r){ue(r,!0);let s=z(r,"length",3,25),n=z(r,"name",3,"Untitled"),o=z(r,"color",3,"#F00"),i=I(!1),t=I(!1),f=I(L(s())),m=T(()=>e(f)*60),l=I(L(n())),v=I(L(new Date)),h=I(void 0),g=I(0),b=I(0),E=T(()=>e(g)+e(b)),x=T(()=>Math.max(0,e(m)-e(E))),j=T(()=>Math.floor(e(x)/60)%60),H=T(()=>Math.round(e(x))%60),he=T(()=>new Date(e(v).getTime()+(e(m)-e(b))*1e3)),ge=T(()=>Math.round(e(E)/e(m)*100)),M=[10,5,2,1];function te(){let _=(new Date-e(v))/1e3;if(_>e(m))u(g,L(e(m))),le(),re("Pomodoro","Out of time"),alert("Finished "+e(l));else{for(u(g,_);M[0]>=e(f);)M=M.slice(1);e(x)<M[0]*60&&(re("Pomodoro",`${(e(x)/60).toFixed(2)} minutes remaining.`),M=M.slice(1))}}function re(_,w,S="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let P={body:w,img:""};S!=null&&(P.tag=S),new Notification(_,P)}}function J(){Notification.requestPermission().then(_=>{}),u(i,!0),u(t,!1),e(g)>0&&(u(b,e(b)+e(g)),u(g,0)),u(v,L(new Date)),te(),u(h,L(setInterval(te,1e3)))}function le(){u(i,!1),u(t,!1),clearInterval(e(h)),u(g,0),u(b,0)}function se(){u(t,!0),clearInterval(e(h))}He(()=>{clearInterval(e(h))});var Z=ra();Be("keydown",Re,_=>{e(i)&&_.key==" "&&(e(t)?J():se(),_.preventDefault())});var ie=d(Z),oe=k(d(ie),2),ke=d(oe);{var pe=_=>{var w=aa(),S=d(w);Xe(S,{get progress(){return e(ge)},get color(){return o()},children:(p,q)=>{var K=Ye(),B=d(K),xe=d(B);c(B);var ne=k(B,2),we=d(ne,!0);c(ne),c(K),W((Se,Ie)=>{je(B,"paused",e(t)),C(xe,`${Se??""}:${Ie??""}`),C(we,e(l))},[()=>e(j).toString().padStart(2,"0"),()=>e(H).toString().padStart(2,"0")]),y(p,K)},$$slots:{default:!0}});var P=k(S,2),F=d(P);F.__click=le;var N=k(F,2);{var R=p=>{var q=$e();q.__click=J,y(p,q)},A=p=>{var q=ea();q.__click=se,y(p,q)};ae(N,p=>{e(t)?p(R):p(A,!1)})}var U=k(N,2),O=d(U);c(U),c(P),Ae(2),c(w),W(p=>C(O,`Finished: ${p??""}`),[()=>e(he).toLocaleTimeString()]),y(_,w)},ye=_=>{var w=ta(),S=d(w),P=d(S),F=k(d(P));ee(F),c(P),c(S);var N=k(S,2),R=d(N),A=k(d(R));ee(A),c(R),c(N);var U=k(N,2);U.__click=J,c(w),ve(F,()=>e(f),O=>u(f,O)),ve(A,()=>e(l),O=>u(l,O)),y(_,w)};ae(ke,_=>{e(i)?_(pe):_(ye,!1)})}c(oe),c(ie),c(Z),y(a,Z),_e()}Ue(["click"]);var sa=D('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline svelte-1gc1982"> </label>',1),ia=D('<br> <br>  <div class="center-hz svelte-1gc1982"><div class="btn-group mb-3" role="group" aria-label="Pomodoro Mode Selector"></div></div> <!>',1);function ha(a){const r=[],s={work:{name:"Work",length:25,color:"#ab5744"},break:{name:"Break",length:5,color:"#4d82ab"},longbreak:{name:"Long Break",length:10,color:"#237047"}};let n=I("work");var o=ia(),i=k($(o),4),t=d(i);Ce(t,21,()=>Object.entries(s),Ge,(m,l)=>{let v=()=>e(l)[0],h=()=>e(l)[1];var g=sa(),b=$(g);ee(b);var E,x=k(b,2),j=d(x,!0);c(x),W(()=>{G(b,"id",`radio-${v()}`),E!==(E=v())&&(b.value=(b.__value=v())==null?"":v()),G(x,"for",`radio-${v()}`),G(x,"style",e(n)==v()?`background-color: ${h().color};`:""),C(j,h().name)}),Ke(r,[],b,()=>(v(),e(n)),H=>u(n,H)),y(m,g)}),c(t),c(i);var f=k(i,2);Ze(f,()=>e(n),m=>{la(m,We(()=>s[e(n)]))}),y(a,o)}export{ha as component};
