import{a as I,t as x,c as Ue}from"../chunks/D8IZ5tij.js";import{aH as Se,aI as Ge,aJ as Re,o as Ve,x as Q,G as Ke,N as He,q as Qe,y as We,aa as Xe,g as Ie,aE as de,au as Ze,P as ge,p as X,c as f,r as c,t as B,a as Z,f as $,ac as q,b as fe,s as g,i as e,a8 as h,aK as ke,aL as Ye,l as A,aG as ye}from"../chunks/DRP5GfAB.js";import{l as ue,s as K,d as Te,e as we,a as $e}from"../chunks/DR-GFnl9.js";import{e as Ee,i as De}from"../chunks/Duy6D2ej.js";import{s as L,r as ee}from"../chunks/DC6H13uQ.js";import{i as et,p as M}from"../chunks/DlRuioKL.js";import{p as R,i as W}from"../chunks/kFZv4Qm8.js";import{t as H}from"../chunks/Bvena8yX.js";import{a as tt}from"../chunks/xSQF6w4t.js";import{s as at}from"../chunks/DzRVWYVD.js";function xe(r,t,l){Q&&Ke();var s=r,a=Xe,n,v=Se()?Ge:Re;Ve(()=>{v(a,a=t())&&(n&&He(n),n=Qe(()=>l(s)))}),Q&&(s=We)}function ze(r,t,l=t){var s=Se();ue(r,"input",a=>{var n=a?r.defaultValue:r.value;if(n=oe(r)?ve(n):n,l(n),s&&n!==(n=t())){var v=r.selectionStart,u=r.selectionEnd;r.value=n??"",u!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(u,r.value.length))}}),(Q&&r.defaultValue!==r.value||Ie(t)==null&&r.value)&&l(oe(r)?ve(r.value):r.value),de(()=>{var a=t();oe(r)&&a===ve(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}const ie=new Set;function rt(r,t,l,s,a=s){var n=l.getAttribute("type")==="checkbox",v=r;let u=!1;if(t!==null)for(var b of t)v=v[b]??(v[b]=[]);v.push(l),ue(l,"change",()=>{var i=l.__value;n&&(i=pe(v,i,l.checked)),a(i)},()=>a(n?[]:null)),de(()=>{var i=s();if(Q&&l.defaultChecked!==l.checked){u=!0;return}n?(i=i||[],l.checked=i.includes(l.__value)):l.checked=et(l.__value,i)}),Ze(()=>{var i=v.indexOf(l);i!==-1&&v.splice(i,1)}),ie.has(v)||(ie.add(v),ge(()=>{v.sort((i,_)=>i.compareDocumentPosition(_)===4?-1:1),ie.delete(v)})),ge(()=>{if(u){var i;if(n)i=pe(v,i,l.checked);else{var _=v.find(w=>w.checked);i=_==null?void 0:_.__value}a(i)}})}function lt(r,t,l=t){ue(r,"change",s=>{var a=s?r.defaultChecked:r.checked;l(a)}),(Q&&r.defaultChecked!==r.checked||Ie(t)==null)&&l(r.checked),de(()=>{var s=t();r.checked=!!s})}function pe(r,t,l){for(var s=new Set,a=0;a<r.length;a+=1)r[a].checked&&s.add(r[a].__value);return l||s.delete(t),Array.from(s)}function oe(r){var t=r.type;return t==="number"||t==="range"}function ve(r){return r===""?null:+r}var nt=x('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function st(r,t){X(t,!0);let l=R(t,"borderRadius",3,"10px"),s=R(t,"progress",7,0),a=R(t,"color",3,"rgb(153, 86, 86)"),n=R(t,"extraPadding",3,"18px"),v=R(t,"style",3,"");s(Math.max(1,s()));var u=nt(),b=f(u),i=f(b),_=f(i);{var w=p=>{var d=Ue(),o=$(d);at(o,()=>t.children),I(p,d)};W(_,p=>{t.children&&p(w)})}c(i),c(b),c(u),B(()=>{L(u,"style",`aspect-ratio: 1/1; display: inline-block; ${v()??""}`),L(b,"style",`--ring-width: ${l()??""}; --progress: ${s()??""}%; --ring-color: ${a()??""}; --extra-padding: ${n()??""};`)}),I(r,u),Z()}var it=x('<span class="points-change svelte-15n4znc"> </span>'),ot=x('<!> <span class="points svelte-15n4znc"> </span>',1),vt=x('<span class="point-view svelte-15n4znc">ðŸª™ <!></span>');function je(r,t){X(t,!0);let l=t.amount==null,s=q(0),a=q(M(t.amount));fe(()=>{t.amount!=e(a)&&(h(s,t.amount-e(a)),h(a,M(t.amount)))});var n=vt(),v=g(f(n));xe(v,()=>t.amount,u=>{var b=ot(),i=$(b);{var _=d=>{var o=it(),T=f(o);c(o),B(E=>{L(o,"style",`color: ${(e(s)>=0?"#0F0":"#F00")??""};`),K(T,`${(e(s)>0?"+":"-")??""}${E??""}`)},[()=>Math.abs(e(s))]),I(d,o)};W(i,d=>{e(s)!=0&&d(_)})}var w=g(i,2),p=f(w,!0);c(w),B(()=>K(p,t.amount)),I(u,b)}),c(n),B(()=>{H(n,"hide-first",l),H(n,"hide-first-reveal",t.amount!=null&&l)}),I(r,n),Z()}var ct=x('<div class="svelte-5hi33v"><div class="center-hz svelte-5hi33v" style="color: #bbbE;"> </div> <h1 class="timer-text center-hz svelte-5hi33v"> </h1> <div class="timer-task center-vt svelte-5hi33v"><div class="center-hz svelte-5hi33v"><span style="font-style: italic; color: #bbbE;" class="svelte-5hi33v"> </span></div></div></div>'),dt=(r,t)=>t(!1,!0),ft=(r,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,ut=x('<button class="btn btn-danger svelte-5hi33v" aria-label="resume"><i class="bi bi-play-fill svelte-5hi33v"></i></button>'),mt=x('<button class="btn btn-secondary svelte-5hi33v" aria-label="pause"><i class="bi bi-pause-fill svelte-5hi33v"></i></button>'),ht=x('<div class="appear svelte-5hi33v"><!> <div class="timer-btns center-hz appear mt-3 svelte-5hi33v"><button id="cashout-btn" class="btn btn-secondary svelte-5hi33v">Cash Out <!></button> <button class="btn btn-secondary svelte-5hi33v" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-5hi33v"></i></button> <!></div></div>'),_t=x('<div class="center-vt svelte-5hi33v"><div class="form-group svelte-5hi33v"><label class="svelte-5hi33v">Duration: <input class="form-control svelte-5hi33v" type="number" min="1" max="50"></label></div> <button class="btn btn-primary btn-lg mt-4 svelte-5hi33v">Start</button></div>'),bt=x('<div class="center-hz svelte-5hi33v"><div class="center-vt svelte-5hi33v"><div class="center-hz svelte-5hi33v"><!></div></div></div>');function gt(r,t){X(t,!0);let l=R(t,"onFinish",3,void 0),s=q(!1),a=q(!1),n=q(M(t.mode.length)),v=A(()=>e(n)*60),u=q(M(new Date)),b=q(void 0),i=q(0),_=q(0),w=A(()=>e(i)+e(_)),p=A(()=>e(v)-e(w)),d=A(()=>Math.floor(Math.abs(e(p))/60)%60),o=A(()=>Math.round(Math.abs(e(p)))%60),T=A(()=>new Date(e(u).getTime()+(e(v)-e(_))*1e3)),E=A(()=>Math.min(100,Math.round(e(w)/e(v)*100))),k=[10,5,2,1,0];for(;k[0]>=t.mode.length;)k=k.slice(1);function D(y,j,z="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let O={body:j,img:""};z!=null&&(O.tag=z),new Notification(y,O)}}function P(){h(i,(new Date-e(u))/1e3),e(p)<k[0]*60&&(e(p)<0&&k[0]==0?D("Pomodoro","Finished. Good job!"):D("Pomodoro",`${k[0]} minutes remaining.`),k=k.slice(1))}function S(){Notification.requestPermission().then(y=>{}),h(s,!0),h(a,!1),e(i)!=0&&(h(_,e(_)+e(i)),h(i,0)),h(u,M(new Date)),P(),h(b,M(setInterval(P,1e3)))}function C(y=!1,j=!1){let z=e(w)/60;l()(z,y?0:t.mode.calcScore(z,e(n)),j),h(s,!1),h(a,!1),clearInterval(e(b)),h(i,0),h(_,0)}function F(){h(a,!0),clearInterval(e(b))}tt(()=>{e(s)&&C(!1,!1)});var m=bt();we("keydown",ke,y=>{y.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(s)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&y.key==" "&&(e(a)?S():F(),y.preventDefault())}),we("beforeunload",ke,y=>{e(s)&&(y.preventDefault(),y.returnValue=!0)}),$e(y=>{B((j,z)=>Ye.title=`${j??""}:${z??""} - Pomodoro`,[()=>e(d).toString().padStart(2,"0"),()=>e(o).toString().padStart(2,"0")])});var N=f(m),U=f(N),te=f(U);{var ae=y=>{var j=ht(),z=f(j);st(z,{get progress(){return e(E)},get color(){return t.mode.color},style:"width: 100%;",children:(J,V)=>{var ne=ct(),se=f(ne),Ae=f(se,!0);c(se);var Y=g(se,2),Be=f(Y);c(Y);var he=g(Y,2),_e=f(he),be=f(_e),Le=f(be,!0);c(be),c(_e),c(he),c(ne),B((Ce,Oe,Je)=>{K(Ae,Ce),H(Y,"paused",e(a)),K(Be,`${Oe??""}:${Je??""}`),K(Le,t.mode.name)},[()=>e(T).toLocaleTimeString(),()=>e(d).toString().padStart(2,"0"),()=>e(o).toString().padStart(2,"0")]),I(J,ne)},$$slots:{default:!0}});var O=g(z,2),G=f(O);G.__click=[dt,C];var re=g(f(G));const le=A(()=>t.mode.calcScore(e(w)/60,e(n)));var qe=A(()=>e(le));je(re,{get amount(){return e(qe)}}),c(G);var me=g(G,2);me.__click=[ft,C];var Fe=g(me,2);{var Me=J=>{var V=ut();V.__click=S,I(J,V)},Ne=J=>{var V=mt();V.__click=F,I(J,V)};W(Fe,J=>{e(a)?J(Me):J(Ne,!1)})}c(O),c(j),I(y,j)},Pe=y=>{var j=_t(),z=f(j),O=f(z),G=g(f(O));ee(G),c(O),c(z);var re=g(z,2);re.__click=S,c(j),ze(G,()=>e(n),le=>h(n,le)),I(y,j)};W(te,y=>{e(s)?y(ae):y(Pe,!1)})}c(U),c(N),c(m),B(()=>{H(m,"overDone",e(p)<0),H(m,"almostDone",e(p)<60)}),I(r,m),Z()}Te(["click"]);var kt=(r,t,l)=>t()!=null?t()(e(l).finished):null,yt=x('<i class="bi bi-check-square-fill svelte-1jf04s4"></i>'),wt=x('<i class="bi bi-check-square svelte-1jf04s4"></i>'),pt=x('<div class="center-hz todo-item svelte-1jf04s4"><input type="checkbox" class="btn-check svelte-1jf04s4" autocomplete="off"> <label class="btn btn-outline svelte-1jf04s4" style="border: none;"><!></label> <input class="todo-name svelte-1jf04s4" aria-label="Todo name"></div>'),St=(r,t,l)=>{t(e(l).length-1)},It=x('<div class="center-hz svelte-1jf04s4"><div class="center-vt todo-list svelte-1jf04s4"><h3 style="color: white; margin: 0px;" class="svelte-1jf04s4">Task List</h3> <!> <div class="center-hz todo-item mt-3 svelte-1jf04s4"><button class="btn btn-secondary svelte-1jf04s4">Add Task</button></div></div></div>');function Tt(r,t){X(t,!0);let l=R(t,"onFinish",3,void 0);function s(d,o,T=null){{let E=localStorage.getItem(d);E&&(o=JSON.parse(E))}return o}let a=q(M(s("todos",[{name:"",finished:!1}])));fe(()=>{localStorage.setItem("todos",JSON.stringify(e(a)))});function n(d){return`todo-item-${Math.min(Math.max(0,d),e(a).length-1)}-input`}function v(d){h(a,M([...e(a).slice(0,d+1),{id:Date.now(),name:"",finished:!1},...e(a).slice(d+1)])),ye().then(()=>{document.getElementById(n(d+1)).focus()})}function u(d,o){var T,E;console.log(d.key),d.key=="Enter"&&e(a)[o].name!=""?(d.preventDefault(),v(o)):(d.key=="Backspace"||d.key=="Delete")&&e(a)[o].name==""&&e(a).length>1?(d.preventDefault(),h(a,M([...e(a).slice(0,o),...e(a).slice(o+1)])),ye().then(()=>{var k;(k=document.getElementById(n(o-1)))==null||k.focus()})):d.key=="ArrowUp"?(T=document.getElementById(n(o-1)))==null||T.focus():d.key=="ArrowDown"&&((E=document.getElementById(n(o+1)))==null||E.focus())}var b=It(),i=f(b),_=g(f(i),2);Ee(_,17,()=>e(a),De,(d,o,T)=>{var E=pt(),k=f(E);ee(k),L(k,"id",`todo-btn-${T??""}`),k.__change=[kt,l,o];var D=g(k,2);L(D,"for",`todo-btn-${T??""}`);var P=f(D);{var S=m=>{var N=yt();I(m,N)},C=m=>{var N=wt();I(m,N)};W(P,m=>{e(o).finished?m(S):m(C,!1)})}c(D);var F=g(D,2);ee(F),L(F,"id",`todo-item-${T}-input`),F.__keydown=m=>u(m,T),c(E),B(()=>H(E,"finished",e(o).finished)),lt(k,()=>e(o).finished,m=>e(o).finished=m),ze(F,()=>e(o).name,m=>e(o).name=m),I(d,E)});var w=g(_,2),p=f(w);p.__click=[St,v,a],c(w),c(i),c(b),I(r,b),Z()}Te(["change","keydown","click"]);class ce{constructor({name:t,length:l,color:s,reward:a,hasTask:n=!1}){this.name=t,this.length=l,this.color=s,this.reward=a,this.hasTask=n}calcScore(t,l){let s=5;if(t<.1)return 0;let a=t>l?Math.min(1,l/this.length):t<this.length?t/this.length:1,n=t>l?Math.pow((t-l)/s,2):0;return Math.max(0,Math.round((a-n)*this.reward))}}var Et=x('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-13zf2lq"> </label>',1),Dt=x('<br> <br>  <div class="menu-bar mb-3 svelte-13zf2lq"><div></div> <div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div> <!></div> <div class="blocky-container mt-5 svelte-13zf2lq"><div class="mb-5"><!></div> <!></div>',1);function Lt(r,t){X(t,!0);const l=[],s={work:new ce({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new ce({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new ce({name:"Long Break",length:10,color:"#237047",reward:450})};let a=q("work"),n=0;function v(D,P){{let S=parseInt(localStorage.getItem("points"));S&&(P=parseInt(S))}return P}let u=q(M(v("points",0)));fe(()=>{localStorage.setItem("points",e(u))});function b(D,P,S){h(u,e(u)+P),S&&(e(a)=="work"?(n+=D,n>=s.work.length*3.4?(n=0,h(a,"longbreak")):h(a,"break")):h(a,"work"))}function i(D){h(u,e(u)+200*(D?1:-1))}var _=Dt(),w=g($(_),4),p=g(f(w),2);Ee(p,21,()=>Object.entries(s),De,(D,P)=>{let S=()=>e(P)[0],C=()=>e(P)[1];var F=Et(),m=$(F);ee(m);var N,U=g(m,2),te=f(U,!0);c(U),B(()=>{L(m,"id",`radio-${S()}`),N!==(N=S())&&(m.value=(m.__value=S())==null?"":S()),L(U,"for",`radio-${S()}`),L(U,"style",e(a)==S()?`background-color: ${C().color};`:""),K(te,C().name)}),rt(l,[],m,()=>(S(),e(a)),ae=>h(a,ae)),I(D,F)}),c(p);var d=g(p,2);je(d,{get amount(){return e(u)}}),c(w);var o=g(w,2),T=f(o),E=f(T);xe(E,()=>e(a),D=>{gt(D,{get mode(){return s[e(a)]},onFinish:b})}),c(T);var k=g(T,2);Tt(k,{onFinish:i}),c(o),I(r,_),Z()}export{Lt as component};
