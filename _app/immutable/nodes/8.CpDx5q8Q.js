import{a as j,t as p,c as Le}from"../chunks/D8IZ5tij.js";import{aH as je,aI as qe,aJ as Ce,o as Oe,x as Y,G as Je,N as Ue,q as Ge,y as Re,aa as Ve,g as we,aE as fe,au as Ke,P as _e,p as ee,c as f,r as u,t as L,a as te,f as le,ac as z,b as me,s as w,i as e,a8 as h,l as P,aK as be,aL as He,aG as ye}from"../chunks/DRP5GfAB.js";import{l as he,s as $,d as pe,e as ge,a as Qe}from"../chunks/DR-GFnl9.js";import{e as Se,i as Ie}from"../chunks/Duy6D2ej.js";import{s as q,r as ne}from"../chunks/DC6H13uQ.js";import{i as We,p as F}from"../chunks/DlRuioKL.js";import{p as V,i as H}from"../chunks/kFZv4Qm8.js";import{t as Q}from"../chunks/Bvena8yX.js";import{a as Xe}from"../chunks/xSQF6w4t.js";import{s as Ze}from"../chunks/DzRVWYVD.js";function Te(r,t,l){Y&&Je();var n=r,a=Ve,i,v=je()?qe:Ce;Oe(()=>{v(a,a=t())&&(i&&Ue(i),i=Ge(()=>l(n)))}),Y&&(n=Re)}function Ee(r,t,l=t){var n=je();he(r,"input",a=>{var i=a?r.defaultValue:r.value;if(i=ce(r)?de(i):i,l(i),n&&i!==(i=t())){var v=r.selectionStart,m=r.selectionEnd;r.value=i??"",m!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(m,r.value.length))}}),(Y&&r.defaultValue!==r.value||we(t)==null&&r.value)&&l(ce(r)?de(r.value):r.value),fe(()=>{var a=t();ce(r)&&a===de(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}const ve=new Set;function Ye(r,t,l,n,a=n){var i=l.getAttribute("type")==="checkbox",v=r;let m=!1;if(t!==null)for(var y of t)v=v[y]??(v[y]=[]);v.push(l),he(l,"change",()=>{var o=l.__value;i&&(o=ke(v,o,l.checked)),a(o)},()=>a(i?[]:null)),fe(()=>{var o=n();if(Y&&l.defaultChecked!==l.checked){m=!0;return}i?(o=o||[],l.checked=o.includes(l.__value)):l.checked=We(l.__value,o)}),Ke(()=>{var o=v.indexOf(l);o!==-1&&v.splice(o,1)}),ve.has(v)||(ve.add(v),_e(()=>{v.sort((o,_)=>o.compareDocumentPosition(_)===4?-1:1),ve.delete(v)})),_e(()=>{if(m){var o;if(i)o=ke(v,o,l.checked);else{var _=v.find(S=>S.checked);o=_==null?void 0:_.__value}a(o)}})}function $e(r,t,l=t){he(r,"change",n=>{var a=n?r.defaultChecked:r.checked;l(a)}),(Y&&r.defaultChecked!==r.checked||we(t)==null)&&l(r.checked),fe(()=>{var n=t();r.checked=!!n})}function ke(r,t,l){for(var n=new Set,a=0;a<r.length;a+=1)r[a].checked&&n.add(r[a].__value);return l||n.delete(t),Array.from(n)}function ce(r){var t=r.type;return t==="number"||t==="range"}function de(r){return r===""?null:+r}var et=p('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function tt(r,t){ee(t,!0);let l=V(t,"borderRadius",3,"10px"),n=V(t,"progress",7,0),a=V(t,"color",3,"rgb(153, 86, 86)"),i=V(t,"extraPadding",3,"18px"),v=V(t,"style",3,"");n(Math.max(1,n()));var m=et(),y=f(m),o=f(y),_=f(o);{var S=s=>{var c=Le(),g=le(c);Ze(g,()=>t.children),j(s,c)};H(_,s=>{t.children&&s(S)})}u(o),u(y),u(m),L(()=>{q(m,"style",`aspect-ratio: 1/1; display: inline-block; ${v()??""}`),q(y,"style",`--ring-width: ${l()??""}; --progress: ${n()??""}%; --ring-color: ${a()??""}; --extra-padding: ${i()??""};`)}),j(r,m),te()}var at=p('<span class="points-change svelte-15n4znc"> </span>'),rt=p('<!> <span class="points svelte-15n4znc"> </span>',1),lt=p('<span class="point-view svelte-15n4znc">ðŸª™ <!></span>');function De(r,t){ee(t,!0);let l=t.amount==null,n=z(0),a=z(F(t.amount));me(()=>{t.amount!=e(a)&&(h(n,t.amount-e(a)),h(a,F(t.amount)))});var i=lt(),v=w(f(i));Te(v,()=>t.amount,m=>{var y=rt(),o=le(y);{var _=c=>{var g=at(),k=f(g);u(g),L(T=>{q(g,"style",`color: ${(e(n)>=0?"#0F0":"#F00")??""};`),$(k,`${(e(n)>0?"+":"-")??""}${T??""}`)},[()=>Math.abs(e(n))]),j(c,g)};H(o,c=>{e(n)!=0&&c(_)})}var S=w(o,2),s=f(S,!0);u(S),L(()=>$(s,t.amount)),j(m,y)}),u(i),L(()=>{Q(i,"hide-first",l),Q(i,"hide-first-reveal",t.amount!=null&&l)}),j(r,i),te()}var nt=(r,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,it=p('<button class="btn btn-danger svelte-vyjiyu" aria-label="resume"><i class="bi bi-play-fill svelte-vyjiyu"></i></button>'),st=p('<button class="btn btn-outline svelte-vyjiyu" aria-label="pause"><i class="bi bi-pause-fill svelte-vyjiyu"></i></button>'),ot=p('<div class="center-hz svelte-vyjiyu"><button class="btn btn-outline svelte-vyjiyu" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-vyjiyu"></i></button> <!></div>'),vt=p('<div class="center-hz svelte-vyjiyu"><input class="form-control svelte-vyjiyu" type="number" style="width: 50%;" min="1" max="50"></div>'),ct=p('<div class="svelte-vyjiyu"><div class="center-hz svelte-vyjiyu" style="color: #bbbE;"> </div> <div class="timer-text center-hz svelte-vyjiyu"> </div> <!></div>'),dt=(r,t)=>t(!1,!0),ut=p('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-vyjiyu">Cash Out <!></button>'),ft=p('<button class="btn btn-primary btn-lg svelte-vyjiyu">Start</button>'),mt=p('<div class="center-hz svelte-vyjiyu"><div class="center-vt svelte-vyjiyu" style="width: 100%;"><div class="appear svelte-vyjiyu"><!> <div class="center-hz mt-4 svelte-vyjiyu"><!></div></div></div></div>');function ht(r,t){ee(t,!0);let l=V(t,"onFinish",3,void 0),n=z(!1),a=z(!1),i=z(F(t.mode.length)),v=P(()=>e(i)*60),m=z(F(new Date)),y=z(void 0),o=z(0),_=z(0),S=P(()=>e(o)+e(_)),s=P(()=>e(v)-e(S)),c=P(()=>Math.floor(Math.abs(e(s))/60)%60),g=P(()=>Math.round(Math.abs(e(s)))%60),k=P(()=>`${e(c).toString().padStart(2,"0")}:${e(g).toString().padStart(2,"0")}`),T=P(()=>new Date(e(m).getTime()+(e(v)-e(_))*1e3)),N=P(()=>Math.min(100,Math.round(e(S)/e(v)*100))),E=[10,5,2,1,0];for(;E[0]>=t.mode.length;)E=E.slice(1);function U(b,x,M="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let O={body:x,img:""};M!=null&&(O.tag=M),new Notification(b,O)}}function D(){h(o,(new Date-e(m))/1e3),e(s)<E[0]*60?(e(s)<0&&E[0]==0?U("Pomodoro","Finished. Good job!"):U("Pomodoro",`${E[0]} minutes remaining.`),E=E.slice(1)):e(s)<0&&E.length==0&&Math.abs(Math.abs(e(s))%60-30)<.6&&U("Pomodoro","Overtime!!")}function I(){Notification.requestPermission().then(b=>{}),h(n,!0),h(a,!1),e(o)!=0&&(h(_,e(_)+e(o)),h(o,0)),h(m,F(new Date)),D(),h(y,F(setInterval(D,1e3)))}function d(b=!1,x=!1){let M=e(S)/60;l()(M,b?0:t.mode.calcScore(M,e(i)),x),h(n,!1),h(a,!1),clearInterval(e(y)),h(o,0),h(_,0)}function A(){h(a,!0),clearInterval(e(y))}Xe(()=>{e(n)&&d(!1,!1)});var C=mt();ge("keydown",be,b=>{b.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(n)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&b.key==" "&&(e(a)?I():A(),b.preventDefault())}),ge("beforeunload",be,b=>{e(n)&&(b.preventDefault(),b.returnValue=!0)}),Qe(b=>{L(()=>He.title=`${(e(n)?`${e(k)} - `:"")??""}pomodoro`)});var B=f(C),W=f(B),G=f(W);tt(G,{get progress(){return e(N)},get color(){return t.mode.color},style:"width: 100%;",children:(b,x)=>{var M=ct(),O=f(M),se=f(O,!0);u(O);var re=w(O,2),Me=f(re,!0);u(re);var Pe=w(re,2);{var Fe=J=>{var R=ot(),X=f(R);X.__click=[nt,d];var oe=w(X,2);{var Ae=K=>{var Z=it();Z.__click=I,j(K,Z)},Be=K=>{var Z=st();Z.__click=A,j(K,Z)};H(oe,K=>{e(a)?K(Ae):K(Be,!1)})}u(R),j(J,R)},Ne=J=>{var R=vt(),X=f(R);ne(X),u(R),Ee(X,()=>e(i),oe=>h(i,oe)),j(J,R)};H(Pe,J=>{e(n)?J(Fe):J(Ne,!1)})}u(M),L(J=>{$(se,J),Q(re,"paused",e(a)),$(Me,e(k))},[()=>e(T).toLocaleTimeString()]),j(b,M)},$$slots:{default:!0}});var ae=w(G,2),ie=f(ae);{var xe=b=>{var x=ut();x.__click=[dt,d];var M=w(f(x));const O=P(()=>t.mode.calcScore(e(S)/60,e(i)));var se=P(()=>e(O));De(M,{get amount(){return e(se)}}),u(x),j(b,x)},ze=b=>{var x=ft();x.__click=I,j(b,x)};H(ie,b=>{e(n)?b(xe):b(ze,!1)})}u(ae),u(W),u(B),u(C),L(()=>{Q(C,"overDone",e(s)<0),Q(C,"almostDone",e(s)<60)}),j(r,C),te()}pe(["click"]);var _t=(r,t,l)=>t()!=null?t()(e(l).finished):null,bt=p('<i class="bi bi-check-square-fill svelte-1jf04s4"></i>'),yt=p('<i class="bi bi-check-square svelte-1jf04s4"></i>'),gt=p('<div class="center-hz todo-item svelte-1jf04s4"><input type="checkbox" class="btn-check svelte-1jf04s4" autocomplete="off"> <label class="btn btn-outline svelte-1jf04s4" style="border: none;"><!></label> <input class="todo-name svelte-1jf04s4" aria-label="Todo name"></div>'),kt=(r,t,l)=>{t(e(l).length-1)},jt=p('<div class="center-vt todo-list svelte-1jf04s4"><h3 style="color: white; margin: 0px;" class="svelte-1jf04s4">Task List</h3> <!> <div class="center-hz todo-item mt-3 svelte-1jf04s4"><button class="btn btn-secondary svelte-1jf04s4">Add Task</button></div></div>');function wt(r,t){ee(t,!0);let l=V(t,"onFinish",3,void 0);function n(s,c,g=null){{let k=localStorage.getItem(s);k&&(c=JSON.parse(k))}return c}let a=z(F(n("todos",[{name:"",finished:!1}])));me(()=>{localStorage.setItem("todos",JSON.stringify(e(a)))});function i(s){return`todo-item-${Math.min(Math.max(0,s),e(a).length-1)}-input`}function v(s){h(a,F([...e(a).slice(0,s+1),{id:Date.now(),name:"",finished:!1},...e(a).slice(s+1)])),ye().then(()=>{document.getElementById(i(s+1)).focus()})}function m(s,c){var g,k;console.log(s.key),s.key=="Enter"&&e(a)[c].name!=""?(s.preventDefault(),v(c)):(s.key=="Backspace"||s.key=="Delete")&&e(a)[c].name==""&&e(a).length>1?(s.preventDefault(),h(a,F([...e(a).slice(0,c),...e(a).slice(c+1)])),ye().then(()=>{var T;(T=document.getElementById(i(c-1)))==null||T.focus()})):s.key=="ArrowUp"?(g=document.getElementById(i(c-1)))==null||g.focus():s.key=="ArrowDown"&&((k=document.getElementById(i(c+1)))==null||k.focus())}var y=jt(),o=w(f(y),2);Se(o,17,()=>e(a),Ie,(s,c,g)=>{var k=gt(),T=f(k);ne(T),q(T,"id",`todo-btn-${g??""}`),T.__change=[_t,l,c];var N=w(T,2);q(N,"for",`todo-btn-${g??""}`);var E=f(N);{var U=d=>{var A=bt();j(d,A)},D=d=>{var A=yt();j(d,A)};H(E,d=>{e(c).finished?d(U):d(D,!1)})}u(N);var I=w(N,2);ne(I),q(I,"id",`todo-item-${g}-input`),I.__keydown=d=>m(d,g),u(k),L(()=>Q(k,"finished",e(c).finished)),$e(T,()=>e(c).finished,d=>e(c).finished=d),Ee(I,()=>e(c).name,d=>e(c).name=d),j(s,k)});var _=w(o,2),S=f(_);S.__click=[kt,v,a],u(_),u(y),j(r,y),te()}pe(["change","keydown","click"]);class ue{constructor({name:t,length:l,color:n,reward:a,hasTask:i=!1}){this.name=t,this.length=l,this.color=n,this.reward=a,this.hasTask=i}calcScore(t,l){let n=5;if(t<.5)return 0;let a=t>l?Math.min(1,l/this.length):t<this.length?t/this.length:1,i=t>l?Math.pow((t-l)/n,2):0;return Math.max(0,Math.round((a-i)*this.reward))}}var pt=p('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-jjju7w"> </label>',1),St=p('<br> <br>  <div class="menu-bar mb-3 svelte-jjju7w"><div></div> <div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div> <!></div> <div class="blocky-container mt-5 svelte-jjju7w"><div class="svelte-jjju7w"></div> <div style="margin-bottom: 70px;" class="svelte-jjju7w"><!></div> <div class="center-hz svelte-jjju7w"><div><!></div></div></div>',1);function At(r,t){ee(t,!0);const l=[],n={work:new ue({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new ue({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new ue({name:"Long Break",length:10,color:"#237047",reward:450})};let a=z("work"),i=0;function v(D,I){{let d=parseInt(localStorage.getItem("points"));d&&(I=parseInt(d))}return I}let m=z(F(v("points",0)));me(()=>{localStorage.setItem("points",e(m))});function y(D,I,d){h(m,e(m)+I),d&&(e(a)=="work"?(i+=D,i>=n.work.length*3.4?(i=0,h(a,"longbreak")):h(a,"break")):h(a,"work"))}function o(D){h(m,e(m)+200*(D?1:-1))}var _=St(),S=w(le(_),4),s=w(f(S),2);Se(s,21,()=>Object.entries(n),Ie,(D,I)=>{let d=()=>e(I)[0],A=()=>e(I)[1];var C=pt(),B=le(C);ne(B);var W,G=w(B,2),ae=f(G,!0);u(G),L(()=>{q(B,"id",`radio-${d()}`),W!==(W=d())&&(B.value=(B.__value=d())==null?"":d()),q(G,"for",`radio-${d()}`),q(G,"style",e(a)==d()?`background-color: ${A().color};`:""),$(ae,A().name)}),Ye(l,[],B,()=>(d(),e(a)),ie=>h(a,ie)),j(D,C)}),u(s);var c=w(s,2);De(c,{get amount(){return e(m)}}),u(S);var g=w(S,2),k=w(f(g),2),T=f(k);Te(T,()=>e(a),D=>{ht(D,{get mode(){return n[e(a)]},onFinish:y})}),u(k);var N=w(k,2),E=f(N),U=f(E);wt(U,{onFinish:o}),u(E),u(N),u(g),j(r,_),te()}export{At as component};
