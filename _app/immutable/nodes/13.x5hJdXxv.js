import{a as f,t as b,c as ue}from"../chunks/u3dcRfK7.js";import{v as Ce,aK as Oe,ak as Ue,y as Re,w as ke,K as Ve,R as $e,z as je,C as Je,af as Ke,p as ae,c as l,r as i,t as X,a as ne,f as Z,h as De,ad as k,g as e,s as g,aj as O,m as B,aL as pe,$ as Ge,aJ as ye,n as We}from"../chunks/DzHGrAB7.js";import{s as ve,d as Te,e as we}from"../chunks/hVlh8FA6.js";import{p as V,i as j,a as Ie,b as le,c as $,d as Se}from"../chunks/CbRT5sQE.js";import{e as xe,i as Me}from"../chunks/Ch4bqiDD.js";import{s as W,r as me}from"../chunks/BW97vLB3.js";import{a as Fe,b as He,c as Qe}from"../chunks/Ctp1LBSw.js";import{p as N}from"../chunks/CYEbeHLi.js";import{h as Xe}from"../chunks/D6Xn1kCk.js";import{t as de}from"../chunks/Cqanicu_.js";import{a as Ze}from"../chunks/-tluWSQ4.js";import{s as Le}from"../chunks/pE0dASaU.js";import{w as Ye}from"../chunks/CA1u_qlU.js";function Pe(u,t,a){ke&&Ve();var r=u,n=Ke,s,_=Ce()?Oe:Ue;Re(()=>{_(n,n=t())&&(s&&$e(s),s=je(()=>a(r)))}),ke&&(r=Je)}var et=b('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function tt(u,t){ae(t,!0);let a=V(t,"borderRadius",3,"10px"),r=V(t,"progress",7,0),n=V(t,"color",3,"rgb(153, 86, 86)"),s=V(t,"extraPadding",3,"18px"),_=V(t,"style",3,"");r(Math.max(1,r()));var c=et(),p=l(c),T=l(p),w=l(T);{var v=m=>{var y=ue(),S=Z(y);Le(S,()=>t.children),f(m,y)};j(w,m=>{t.children&&m(v)})}i(T),i(p),i(c),X(()=>{W(c,"style",`aspect-ratio: 1/1; display: inline-block; ${_()??""}`),W(p,"style",`--ring-width: ${a()??""}; --progress: ${r()??""}%; --ring-color: ${n()??""}; --extra-padding: ${s()??""};`)}),f(u,c),ne()}var at=b('<span class="points-change svelte-10kbuiu"> </span>'),nt=b('<span class="points svelte-10kbuiu"> </span>'),rt=b('<div class="spinner-grow spinner-grow-sm svelte-10kbuiu" role="status"></div>'),ot=b('<span class="point-view svelte-10kbuiu"><!> <!></span>');function Ne(u,t){ae(t,!0);let a=V(t,"formatter",7,null);a(a()==null?new Intl.NumberFormat("en-US"):a());let r=O(0),n=B(()=>a().format(Math.abs(e(r)))),s=t.amount;De(()=>{t.amount!=s&&(k(r,t.amount-s),s=t.amount)});var _=ot(),c=l(_);Pe(c,()=>t.amount,v=>{var m=ue(),y=Z(m);{var S=E=>{var z=at(),J=l(z);i(z),X(()=>{W(z,"style",`color: ${(e(r)>=0?"#0F0":"#F00")??""};`),ve(J,`${(e(r)>0?"+":"-")??""}${e(n)??""}`)}),f(E,z)};j(y,E=>{a().format(0)!=e(n)&&E(S)})}f(v,m)});var p=g(c,2);{var T=v=>{var m=nt(),y=l(m,!0);i(m),X(S=>ve(y,S),[()=>a().format(t.amount)]),f(v,m)},w=v=>{var m=rt();f(v,m)};j(p,v=>{t.amount!=null?v(T):v(w,!1)})}i(_),f(u,_),ne()}var st=b('<span class="svelte-gdak9n">ðŸª™ <!></span>');function Ee(u,t){var a=st(),r=g(l(a));Ne(r,{get amount(){return t.amount}}),i(a),f(u,a)}const it=""+new URL("../assets/122317__anillogic__bk-wind_c5.h3d8NiMB.wav",import.meta.url).href;var lt=(u,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,ct=b('<button class="btn btn-danger svelte-pmthtr" aria-label="resume"><i class="bi bi-play-fill svelte-pmthtr"></i></button>'),vt=b('<button class="btn btn-outline svelte-pmthtr" aria-label="pause"><i class="bi bi-pause-fill svelte-pmthtr"></i></button>'),dt=b('<div class="center-hz svelte-pmthtr"><button class="btn btn-outline svelte-pmthtr" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-pmthtr"></i></button> <!></div>'),ut=b('<div class="center-hz svelte-pmthtr"><input class="form-control svelte-pmthtr" type="number" style="width: 50%;" min="1" max="50"></div>'),mt=b('<div class="svelte-pmthtr"><div class="timer-subtext center-hz svelte-pmthtr"> </div> <div class="timer-text center-hz svelte-pmthtr"> </div> <!></div>'),ft=(u,t)=>t(!1,!0),ht=b('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-pmthtr">Cash Out <!></button>'),bt=b('<button class="btn btn-primary btn-lg svelte-pmthtr">Start</button>'),_t=b('<div class="center-hz svelte-pmthtr"><div class="center-vt svelte-pmthtr" style="width: 100%;"><div class="appear svelte-pmthtr"><!> <div class="center-hz mt-4 svelte-pmthtr"><!></div></div></div></div>');function gt(u,t){ae(t,!0);let a=V(t,"onFinish",3,void 0),r=V(t,"onStart",3,void 0),n=null;n=new Audio(it),n.loop=!0;let s=O(!1),_=O(!1),c=O(N(t.mode.length)),p=B(()=>e(c)*60),T=O(N(new Date)),w=O(void 0),v=O(0),m=O(0),y=B(()=>e(v)+e(m)),S=B(()=>e(p)-e(y)),E=B(()=>Math.floor(Math.abs(e(S))/60)%60),z=B(()=>Math.round(Math.abs(e(S)))%60),J=B(()=>`${e(E).toString().padStart(2,"0")}:${e(z).toString().padStart(2,"0")}`),Y=B(()=>new Date(e(T).getTime()+(e(p)-e(m))*1e3)),h=B(()=>Math.min(100,Math.round(e(y)/e(p)*100))),d=[10,5,2,1,0];for(;d[0]>=t.mode.length;)d=d.slice(1);function I(o,F,A="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let P={body:F,img:""};A!=null&&(P.tag=A),new Notification(o,P)}}function x(){k(v,(new Date-e(T))/1e3),e(S)<d[0]*60?(e(S)<0&&d[0]==0?I("Pomodoro","Finished. Good job!"):I("Pomodoro",`${d[0]} minutes remaining.`),d=d.slice(1)):e(S)<0&&(n.paused==!0&&n.play(),d.length==0&&Math.abs(Math.abs(e(S))%60-30)<.6&&I("Pomodoro",`Overtime by ${(Math.abs(e(p)+e(S))/60).toFixed(1)} minutes.`))}function L(){e(s)==!1&&r()&&r()(),Notification.requestPermission().then(o=>{}),k(s,!0),k(_,!1),e(v)!=0&&(k(m,e(m)+e(v)),k(v,0)),k(T,N(new Date)),x(),k(w,N(setInterval(x,1e3)))}function U(o=!1,F=!1){n.pause();let A=e(y)/60;a()(A,o?0:t.mode.calcScore(A,e(c)),F),k(s,!1),k(_,!1),clearInterval(e(w)),k(v,0),k(m,0)}function H(){k(_,!0),n.pause(),clearInterval(e(w))}Ze(()=>{e(s)&&U(!1,!1)});var R=_t();we("keydown",pe,o=>{o.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(s)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&o.key==" "&&(e(_)?L():H(),o.preventDefault())}),we("beforeunload",pe,o=>{e(s)&&(o.preventDefault(),o.returnValue=!0)}),Xe(o=>{X(()=>Ge.title=`${(e(s)?`${e(J)} - `:"")??""}Pomodoro`)});var ee=l(R),q=l(ee),M=l(q);tt(M,{get progress(){return e(h)},get color(){return t.mode.color},style:"width: 100%;",children:(o,F)=>{var A=mt(),P=l(A),re=l(P,!0);i(P);var G=g(P,2),he=l(G,!0);i(G);var be=g(G,2);{var ze=Q=>{var te=dt(),se=l(te);se.__click=[lt,U];var _e=g(se,2);{var Be=oe=>{var ie=ct();ie.__click=L,f(oe,ie)},qe=oe=>{var ie=vt();ie.__click=H,f(oe,ie)};j(_e,oe=>{e(_)?oe(Be):oe(qe,!1)})}i(te),f(Q,te)},Ae=Q=>{var te=ut(),se=l(te);me(se),i(te),Fe(se,()=>e(c),_e=>k(c,_e)),f(Q,te)};j(be,Q=>{e(s)?Q(ze):Q(Ae,!1)})}i(A),X(Q=>{ve(re,Q),de(G,"paused",e(_)),ve(he,e(J))},[()=>e(Y).toLocaleTimeString()]),f(o,A)},$$slots:{default:!0}});var K=g(M,2),fe=l(K);{var D=o=>{var F=ht();F.__click=[ft,U];var A=g(l(F));const P=B(()=>t.mode.calcScore(e(y)/60,e(c)));var re=B(()=>e(P));Ee(A,{get amount(){return e(re)}}),i(F),f(o,F)},C=o=>{var F=bt();F.__click=L,f(o,F)};j(fe,o=>{e(s)?o(D):o(C,!1)})}i(K),i(q),i(ee),i(R),X(()=>{de(R,"overDone",e(S)<0),de(R,"almostDone",e(S)<60)}),f(u,R),ne()}Te(["click"]);class ge{constructor({name:t,length:a,color:r,reward:n,hasTask:s=!1}){this.name=t,this.length=a,this.color=r,this.reward=n,this.hasTask=s}calcScore(t,a){let r=5;if(t<.5)return 0;let n=t>a?Math.min(1,a/this.length):t<this.length?t/this.length:1,s=t>a?Math.pow((t-a)/r,2):0;return Math.max(0,Math.round((n-s)*this.reward))}}function ce(u,t,a=null){{let n=localStorage.getItem(u);n!==null&&(t=JSON.parse(n))}const r=Ye(t);return r.subscribe(n=>{console.log("WRITING",n),localStorage.setItem(u,JSON.stringify(n))}),r}var pt=b('<div class="body svelte-mgslqn"><!></div>');function wt(u,t){ae(t,!0);let a=V(t,"visible",15,!0),r=B(()=>a()?Date.now():null);var n=ue();we("click",pe,c=>{a()&&Date.now()-e(r)>200&&a(!1)});var s=Z(n);{var _=c=>{var p=pt(),T=l(p);{var w=v=>{var m=ue(),y=Z(m);Le(y,()=>t.children),f(v,m)};j(T,v=>{t.children&&v(w)})}i(p),f(c,p)};j(s,c=>{a()&&c(_)})}f(u,n),ne()}function kt(u,t,a,r){confirm("Delete all tasks?")&&$(a,N(r()))}function yt(u,t,a,r){let n=t().filter(s=>s.finished==!1);n.length==0?$(a,N(r())):$(a,N(n))}var St=(u,t)=>k(t,!e(t)),Dt=b('<button class="btn btn-secondary option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete Completed</button> <button class="btn btn-danger option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete All</button>',1),Tt=(u,t,a)=>t()!=null?t()(e(a).finished):null,It=b('<i class="bi bi-check-square-fill svelte-1wamo6n"></i>'),xt=b('<i class="bi bi-check-square svelte-1wamo6n"></i>'),Mt=b('<div class="center-hz todo-item svelte-1wamo6n"><input type="checkbox" class="btn-check svelte-1wamo6n" autocomplete="off"> <label class="btn btn-outline svelte-1wamo6n" style="border: none;"><!></label> <input class="todo-name svelte-1wamo6n" aria-label="Todo name"></div>'),Ft=(u,t,a,r)=>{t(a().length-1)},Lt=b('<div class="center-vt todo-list svelte-1wamo6n"><div class="list-header svelte-1wamo6n"><h3 style="color: white; margin: 0px;" class="svelte-1wamo6n">Task List</h3> <button class="btn btn-outline svelte-1wamo6n" aria-label="Open todo list options"><i class="bi bi-three-dots-vertical svelte-1wamo6n"></i></button></div> <!> <!> <div class="center-hz todo-item mt-3 svelte-1wamo6n"><button class="btn btn-secondary svelte-1wamo6n">Add Task</button></div></div>');function Pt(u,t){ae(t,!0);const[a,r]=Ie(),n=()=>le(c,"$todos",a);let s=V(t,"onFinish",3,void 0);function _(){return[{name:"",finished:!1}]}const c=ce("todos",_(),_());function p(h){return`todo-item-${Math.min(Math.max(0,h),n().length-1)}-input`}function T(h){$(c,N([...n().slice(0,h+1),{id:Date.now(),name:"",finished:!1},...n().slice(h+1)])),ye().then(()=>{document.getElementById(p(h+1)).focus()})}function w(h,d){var I,x;console.log(h.key),h.key=="Enter"&&n()[d].name!=""?(h.preventDefault(),T(d)):(h.key=="Backspace"||h.key=="Delete")&&n()[d].name==""&&n().length>1?(h.preventDefault(),$(c,N([...n().slice(0,d),...n().slice(d+1)])),ye().then(()=>{var L;(L=document.getElementById(p(d-1)))==null||L.focus()})):h.key=="ArrowUp"?(I=document.getElementById(p(d-1)))==null||I.focus():h.key=="ArrowDown"&&((x=document.getElementById(p(d+1)))==null||x.focus())}let v=O(!1);var m=Lt(),y=l(m),S=g(l(y),2);S.__click=[St,v],i(y);var E=g(y,2);wt(E,{get visible(){return e(v)},set visible(h){k(v,N(h))},children:(h,d)=>{var I=Dt(),x=Z(I);x.__click=[yt,n,c,_];var L=g(x,2);L.__click=[kt,n,c,_],f(h,I)},$$slots:{default:!0}});var z=g(E,2);xe(z,1,n,Me,(h,d,I)=>{var x=Mt(),L=l(x);me(L),W(L,"id",`todo-btn-${I??""}`),L.__change=[Tt,s,d];var U=g(L,2);W(U,"for",`todo-btn-${I??""}`);var H=l(U);{var R=M=>{var K=It();f(M,K)},ee=M=>{var K=xt();f(M,K)};j(H,M=>{e(d).finished?M(R):M(ee,!1)})}i(U);var q=g(U,2);me(q),W(q,"id",`todo-item-${I}-input`),q.__keydown=M=>w(M,I),i(x),X(()=>de(x,"finished",e(d).finished)),He(L,()=>e(d).finished,M=>(e(d).finished=M,Se(a,"$todos"))),Fe(q,()=>e(d).name,M=>(e(d).name=M,Se(a,"$todos"))),f(h,x)});var J=g(z,2),Y=l(J);Y.__click=[Ft,T,n,c],i(J),i(m),f(u,m),ne(),r()}Te(["click","change","keydown"]);var Nt=b('<span class="svelte-1qmb3u9"><i class="bi bi-x"></i><!></span>');function Et(u,t){ae(t,!0);const a=new Intl.NumberFormat("en-US",{minimumFractionDigits:1,maximumFractionDigits:1});var r=Nt(),n=g(l(r));Ne(n,{get amount(){return t.amount},formatter:a}),i(r),f(u,r),ne()}var zt=b('<!> <!> <i class="bi bi-circle"></i>',1),At=b('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-19wlce9"> </label>',1),Bt=b('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&amp;display=swap" rel="stylesheet">  <div class="menu-bar svelte-19wlce9"><!></div> <br> <div class="center-hz svelte-19wlce9"><div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div></div> <div class="blocky-container mt-5 svelte-19wlce9"><div class="svelte-19wlce9"></div> <div style="margin-bottom: 70px;" class="svelte-19wlce9"><!></div> <div class="center-hz svelte-19wlce9"><!></div></div>',1);function Qt(u,t){ae(t,!0);const[a,r]=Ie(),n=()=>le(S,"$storeLastStart",a),s=()=>le(y,"$storeLastFinish",a),_=()=>le(m,"$storeMultiplierSum",a),c=()=>le(v,"$storePoints",a),p=[],T={work:new ge({name:"Work",length:25,color:"#ab5744",reward:500,hasTask:!0}),break:new ge({name:"Break",length:5,color:"#4d82ab",reward:100}),longbreak:new ge({name:"Long Break",length:10,color:"#237047",reward:200})};let w=O("work");const v=ce("points",0,null),m=ce("multiplier",1,null),y=ce("lastFinish",0,0),S=ce("lastStart",0,0);let E=O(1);function z(){let D=n()>s()?n()-s():Date.now()-s();k(E,N(Math.max(1,_()-Math.pow(D/(10*60*1e3),4))))}De(()=>{const D=setInterval(z,5e3);return()=>clearInterval(D)}),z();function J(){$(S,N(Date.now())),z()}let Y=0;function h(D,C,o){$(v,N(Math.round(c()+C*e(E)))),$(y,N(Date.now())),$(m,e(E)+(C>0?D*.05:0)),z(),o&&(e(w)=="work"?(Y+=D,Y>=T.work.length*3.4?(Y=0,k(w,"longbreak")):k(w,"break")):k(w,"work"))}function d(D){$(v,N(Math.round(c()+100*(D?1:-1)*e(E))))}var I=Bt(),x=g(Z(I),6),L=l(x);{var U=D=>{var C=zt(),o=Z(C);Et(o,{get amount(){return e(E)}});var F=g(o,2);Ee(F,{get amount(){return c()}}),We(2),f(D,C)};j(L,D=>{D(U)})}i(x);var H=g(x,4),R=l(H);xe(R,21,()=>Object.entries(T),Me,(D,C)=>{let o=()=>e(C)[0],F=()=>e(C)[1];var A=At(),P=Z(A);me(P);var re,G=g(P,2),he=l(G,!0);i(G),X(()=>{W(P,"id",`radio-${o()}`),re!==(re=o())&&(P.value=(P.__value=o())==null?"":o()),W(G,"for",`radio-${o()}`),W(G,"style",e(w)==o()?`background-color: ${F().color};`:""),ve(he,F().name)}),Qe(p,[],P,()=>(o(),e(w)),be=>k(w,be)),f(D,A)}),i(R),i(H);var ee=g(H,2),q=g(l(ee),2),M=l(q);Pe(M,()=>e(w),D=>{gt(D,{get mode(){return T[e(w)]},onFinish:h,onStart:J})}),i(q);var K=g(q,2),fe=l(K);Pt(fe,{onFinish:d}),i(K),i(ee),f(u,I),ne(),r()}export{Qt as component};
