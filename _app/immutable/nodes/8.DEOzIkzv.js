import{a as k,t as S,c as Se}from"../chunks/D8IZ5tij.js";import{aH as Ie,aI as Ce,aJ as Oe,o as Je,x as $,G as Ue,N as Ge,q as Re,y as Ve,aa as Ke,g as Te,aE as me,au as He,P as ye,p as ae,c as f,r as d,t as A,a as re,f as ee,ac as z,b as he,s as w,i as e,a8 as h,l as N,aK as ke,aL as Qe,aG as we}from"../chunks/DRP5GfAB.js";import{l as _e,s as te,d as Ee,e as pe,a as We}from"../chunks/DR-GFnl9.js";import{e as De,i as xe}from"../chunks/Duy6D2ej.js";import{s as B,r as le}from"../chunks/DC6H13uQ.js";import{i as Xe,p as F}from"../chunks/DlRuioKL.js";import{p as R,i as W}from"../chunks/kFZv4Qm8.js";import{t as X}from"../chunks/Bvena8yX.js";import{a as Ze}from"../chunks/xSQF6w4t.js";import{s as Ye}from"../chunks/DzRVWYVD.js";function qe(r,t,n){$&&Ue();var l=r,a=Ke,i,v=Ie()?Ce:Oe;Je(()=>{v(a,a=t())&&(i&&Ge(i),i=Re(()=>n(l)))}),$&&(l=Ve)}function Pe(r,t,n=t){var l=Ie();_e(r,"input",a=>{var i=a?r.defaultValue:r.value;if(i=de(r)?ue(i):i,n(i),l&&i!==(i=t())){var v=r.selectionStart,m=r.selectionEnd;r.value=i??"",m!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(m,r.value.length))}}),($&&r.defaultValue!==r.value||Te(t)==null&&r.value)&&n(de(r)?ue(r.value):r.value),me(()=>{var a=t();de(r)&&a===ue(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}const ce=new Set;function $e(r,t,n,l,a=l){var i=n.getAttribute("type")==="checkbox",v=r;let m=!1;if(t!==null)for(var y of t)v=v[y]??(v[y]=[]);v.push(n),_e(n,"change",()=>{var s=n.__value;i&&(s=je(v,s,n.checked)),a(s)},()=>a(i?[]:null)),me(()=>{var s=l();if($&&n.defaultChecked!==n.checked){m=!0;return}i?(s=s||[],n.checked=s.includes(n.__value)):n.checked=Xe(n.__value,s)}),He(()=>{var s=v.indexOf(n);s!==-1&&v.splice(s,1)}),ce.has(v)||(ce.add(v),ye(()=>{v.sort((s,_)=>s.compareDocumentPosition(_)===4?-1:1),ce.delete(v)})),ye(()=>{if(m){var s;if(i)s=je(v,s,n.checked);else{var _=v.find(j=>j.checked);s=_==null?void 0:_.__value}a(s)}})}function et(r,t,n=t){_e(r,"change",l=>{var a=l?r.defaultChecked:r.checked;n(a)}),($&&r.defaultChecked!==r.checked||Te(t)==null)&&n(r.checked),me(()=>{var l=t();r.checked=!!l})}function je(r,t,n){for(var l=new Set,a=0;a<r.length;a+=1)r[a].checked&&l.add(r[a].__value);return n||l.delete(t),Array.from(l)}function de(r){var t=r.type;return t==="number"||t==="range"}function ue(r){return r===""?null:+r}var tt=S('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function at(r,t){ae(t,!0);let n=R(t,"borderRadius",3,"10px"),l=R(t,"progress",7,0),a=R(t,"color",3,"rgb(153, 86, 86)"),i=R(t,"extraPadding",3,"18px"),v=R(t,"style",3,"");l(Math.max(1,l()));var m=tt(),y=f(m),s=f(y),_=f(s);{var j=o=>{var c=Se(),b=ee(c);Ye(b,()=>t.children),k(o,c)};W(_,o=>{t.children&&o(j)})}d(s),d(y),d(m),A(()=>{B(m,"style",`aspect-ratio: 1/1; display: inline-block; ${v()??""}`),B(y,"style",`--ring-width: ${n()??""}; --progress: ${l()??""}%; --ring-color: ${a()??""}; --extra-padding: ${i()??""};`)}),k(r,m),re()}var rt=S('<span class="points-change svelte-15n4znc"> </span>'),nt=S('<!> <span class="points svelte-15n4znc"> </span>',1),lt=S('<span class="point-view svelte-15n4znc">ðŸª™ <!></span>');function ze(r,t){ae(t,!0);let n=t.amount==null,l=z(0),a=z(F(t.amount));he(()=>{t.amount!=e(a)&&(h(l,t.amount-e(a)),h(a,F(t.amount)))});var i=lt(),v=w(f(i));qe(v,()=>t.amount,m=>{var y=nt(),s=ee(y);{var _=c=>{var b=rt(),p=f(b);d(b),A(E=>{B(b,"style",`color: ${(e(l)>=0?"#0F0":"#F00")??""};`),te(p,`${(e(l)>0?"+":"-")??""}${E??""}`)},[()=>Math.abs(e(l))]),k(c,b)};W(s,c=>{e(l)!=0&&c(_)})}var j=w(s,2),o=f(j,!0);d(j),A(()=>te(o,t.amount)),k(m,y)}),d(i),A(()=>{X(i,"hide-first",n),X(i,"hide-first-reveal",t.amount!=null&&n)}),k(r,i),re()}var it=(r,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,st=S('<button class="btn btn-danger svelte-vyjiyu" aria-label="resume"><i class="bi bi-play-fill svelte-vyjiyu"></i></button>'),ot=S('<button class="btn btn-outline svelte-vyjiyu" aria-label="pause"><i class="bi bi-pause-fill svelte-vyjiyu"></i></button>'),vt=S('<div class="svelte-vyjiyu"><div class="center-hz svelte-vyjiyu" style="color: #bbbE;"> </div> <div class="timer-text center-hz svelte-vyjiyu"> </div> <div class="center-hz svelte-vyjiyu"><button class="btn btn-outline svelte-vyjiyu" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-vyjiyu"></i></button> <!></div></div>'),ct=S('<div class="center-vt svelte-vyjiyu"><div class="form-group svelte-vyjiyu"><label class="svelte-vyjiyu">Duration: <input class="form-control svelte-vyjiyu" type="number" min="1" max="50"></label></div></div>'),dt=(r,t)=>t(!1,!0),ut=S('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-vyjiyu">Cash Out <!></button>'),ft=S('<button class="btn btn-primary btn-lg svelte-vyjiyu">Start</button>'),mt=S('<div class="center-hz svelte-vyjiyu"><div class="center-vt svelte-vyjiyu" style="width: 100%;"><div class="appear svelte-vyjiyu"><!> <div class="center-hz mt-4 svelte-vyjiyu"><!></div></div></div></div>');function ht(r,t){ae(t,!0);let n=R(t,"onFinish",3,void 0),l=z(!1),a=z(!1),i=z(F(t.mode.length)),v=N(()=>e(i)*60),m=z(F(new Date)),y=z(void 0),s=z(0),_=z(0),j=N(()=>e(s)+e(_)),o=N(()=>e(v)-e(j)),c=N(()=>Math.floor(Math.abs(e(o))/60)%60),b=N(()=>Math.round(Math.abs(e(o)))%60),p=N(()=>new Date(e(m).getTime()+(e(v)-e(_))*1e3)),E=N(()=>Math.min(100,Math.round(e(j)/e(v)*100))),I=[10,5,2,1,0];for(;I[0]>=t.mode.length;)I=I.slice(1);function C(g,x,P="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let K={body:x,img:""};P!=null&&(K.tag=P),new Notification(g,K)}}function V(){h(s,(new Date-e(m))/1e3),e(o)<I[0]*60&&(e(o)<0&&I[0]==0?C("Pomodoro","Finished. Good job!"):C("Pomodoro",`${I[0]} minutes remaining.`),I=I.slice(1))}function D(){Notification.requestPermission().then(g=>{}),h(l,!0),h(a,!1),e(s)!=0&&(h(_,e(_)+e(s)),h(s,0)),h(m,F(new Date)),V(),h(y,F(setInterval(V,1e3)))}function T(g=!1,x=!1){let P=e(j)/60;n()(P,g?0:t.mode.calcScore(P,e(i)),x),h(l,!1),h(a,!1),clearInterval(e(y)),h(s,0),h(_,0)}function u(){h(a,!0),clearInterval(e(y))}Ze(()=>{e(l)&&T(!1,!1)});var q=mt();pe("keydown",ke,g=>{g.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(l)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&g.key==" "&&(e(a)?D():u(),g.preventDefault())}),pe("beforeunload",ke,g=>{e(l)&&(g.preventDefault(),g.returnValue=!0)}),We(g=>{A((x,P)=>Qe.title=`${x??""}:${P??""} - Pomodoro`,[()=>e(c).toString().padStart(2,"0"),()=>e(b).toString().padStart(2,"0")])});var Z=f(q),M=f(Z),Y=f(M);at(Y,{get progress(){return e(E)},get color(){return t.mode.color},style:"width: 100%;",children:(g,x)=>{var P=Se(),K=ee(P);{var oe=H=>{var J=vt(),Q=f(J),ne=f(Q,!0);d(Q);var U=w(Q,2),ve=f(U);d(U);var be=w(U,2),ge=f(be);ge.__click=[it,T];var Ne=w(ge,2);{var Ae=L=>{var G=st();G.__click=D,k(L,G)},Be=L=>{var G=ot();G.__click=u,k(L,G)};W(Ne,L=>{e(a)?L(Ae):L(Be,!1)})}d(be),d(J),A((L,G,Le)=>{te(ne,L),X(U,"paused",e(a)),te(ve,`${G??""}:${Le??""}`)},[()=>e(p).toLocaleTimeString(),()=>e(c).toString().padStart(2,"0"),()=>e(b).toString().padStart(2,"0")]),k(H,J)},Me=H=>{var J=ct(),Q=f(J),ne=f(Q),U=w(f(ne));le(U),d(ne),d(Q),d(J),Pe(U,()=>e(i),ve=>h(i,ve)),k(H,J)};W(K,H=>{e(l)?H(oe):H(Me,!1)})}k(g,P)},$$slots:{default:!0}});var O=w(Y,2),ie=f(O);{var se=g=>{var x=ut();x.__click=[dt,T];var P=w(f(x));const K=N(()=>t.mode.calcScore(e(j)/60,e(i)));var oe=N(()=>e(K));ze(P,{get amount(){return e(oe)}}),d(x),k(g,x)},Fe=g=>{var x=ft();x.__click=D,k(g,x)};W(ie,g=>{e(l)?g(se):g(Fe,!1)})}d(O),d(M),d(Z),d(q),A(()=>{X(q,"overDone",e(o)<0),X(q,"almostDone",e(o)<60)}),k(r,q),re()}Ee(["click"]);var _t=(r,t,n)=>t()!=null?t()(e(n).finished):null,bt=S('<i class="bi bi-check-square-fill svelte-1jf04s4"></i>'),gt=S('<i class="bi bi-check-square svelte-1jf04s4"></i>'),yt=S('<div class="center-hz todo-item svelte-1jf04s4"><input type="checkbox" class="btn-check svelte-1jf04s4" autocomplete="off"> <label class="btn btn-outline svelte-1jf04s4" style="border: none;"><!></label> <input class="todo-name svelte-1jf04s4" aria-label="Todo name"></div>'),kt=(r,t,n)=>{t(e(n).length-1)},wt=S('<div class="center-vt todo-list svelte-1jf04s4"><h3 style="color: white; margin: 0px;" class="svelte-1jf04s4">Task List</h3> <!> <div class="center-hz todo-item mt-3 svelte-1jf04s4"><button class="btn btn-secondary svelte-1jf04s4">Add Task</button></div></div>');function pt(r,t){ae(t,!0);let n=R(t,"onFinish",3,void 0);function l(o,c,b=null){{let p=localStorage.getItem(o);p&&(c=JSON.parse(p))}return c}let a=z(F(l("todos",[{name:"",finished:!1}])));he(()=>{localStorage.setItem("todos",JSON.stringify(e(a)))});function i(o){return`todo-item-${Math.min(Math.max(0,o),e(a).length-1)}-input`}function v(o){h(a,F([...e(a).slice(0,o+1),{id:Date.now(),name:"",finished:!1},...e(a).slice(o+1)])),we().then(()=>{document.getElementById(i(o+1)).focus()})}function m(o,c){var b,p;console.log(o.key),o.key=="Enter"&&e(a)[c].name!=""?(o.preventDefault(),v(c)):(o.key=="Backspace"||o.key=="Delete")&&e(a)[c].name==""&&e(a).length>1?(o.preventDefault(),h(a,F([...e(a).slice(0,c),...e(a).slice(c+1)])),we().then(()=>{var E;(E=document.getElementById(i(c-1)))==null||E.focus()})):o.key=="ArrowUp"?(b=document.getElementById(i(c-1)))==null||b.focus():o.key=="ArrowDown"&&((p=document.getElementById(i(c+1)))==null||p.focus())}var y=wt(),s=w(f(y),2);De(s,17,()=>e(a),xe,(o,c,b)=>{var p=yt(),E=f(p);le(E),B(E,"id",`todo-btn-${b??""}`),E.__change=[_t,n,c];var I=w(E,2);B(I,"for",`todo-btn-${b??""}`);var C=f(I);{var V=u=>{var q=bt();k(u,q)},D=u=>{var q=gt();k(u,q)};W(C,u=>{e(c).finished?u(V):u(D,!1)})}d(I);var T=w(I,2);le(T),B(T,"id",`todo-item-${b}-input`),T.__keydown=u=>m(u,b),d(p),A(()=>X(p,"finished",e(c).finished)),et(E,()=>e(c).finished,u=>e(c).finished=u),Pe(T,()=>e(c).name,u=>e(c).name=u),k(o,p)});var _=w(s,2),j=f(_);j.__click=[kt,v,a],d(_),d(y),k(r,y),re()}Ee(["change","keydown","click"]);class fe{constructor({name:t,length:n,color:l,reward:a,hasTask:i=!1}){this.name=t,this.length=n,this.color=l,this.reward=a,this.hasTask=i}calcScore(t,n){let l=5;if(t<.5)return 0;let a=t>n?Math.min(1,n/this.length):t<this.length?t/this.length:1,i=t>n?Math.pow((t-n)/l,2):0;return Math.max(0,Math.round((a-i)*this.reward))}}var jt=S('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-gg4nqw"> </label>',1),St=S('<br> <br>  <div class="menu-bar mb-3 svelte-gg4nqw"><div></div> <div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div> <!></div> <div class="blocky-container mt-5 svelte-gg4nqw"><div class="svelte-gg4nqw"></div> <div style="margin-bottom: 70px;" class="svelte-gg4nqw"><!></div> <div class="center-hz svelte-gg4nqw"><div><!></div></div></div>',1);function Nt(r,t){ae(t,!0);const n=[],l={work:new fe({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new fe({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new fe({name:"Long Break",length:10,color:"#237047",reward:450})};let a=z("work"),i=0;function v(D,T){{let u=parseInt(localStorage.getItem("points"));u&&(T=parseInt(u))}return T}let m=z(F(v("points",0)));he(()=>{localStorage.setItem("points",e(m))});function y(D,T,u){h(m,e(m)+T),u&&(e(a)=="work"?(i+=D,i>=l.work.length*3.4?(i=0,h(a,"longbreak")):h(a,"break")):h(a,"work"))}function s(D){h(m,e(m)+200*(D?1:-1))}var _=St(),j=w(ee(_),4),o=w(f(j),2);De(o,21,()=>Object.entries(l),xe,(D,T)=>{let u=()=>e(T)[0],q=()=>e(T)[1];var Z=jt(),M=ee(Z);le(M);var Y,O=w(M,2),ie=f(O,!0);d(O),A(()=>{B(M,"id",`radio-${u()}`),Y!==(Y=u())&&(M.value=(M.__value=u())==null?"":u()),B(O,"for",`radio-${u()}`),B(O,"style",e(a)==u()?`background-color: ${q().color};`:""),te(ie,q().name)}),$e(n,[],M,()=>(u(),e(a)),se=>h(a,se)),k(D,Z)}),d(o);var c=w(o,2);ze(c,{get amount(){return e(m)}}),d(j);var b=w(j,2),p=w(f(b),2),E=f(p);qe(E,()=>e(a),D=>{ht(D,{get mode(){return l[e(a)]},onFinish:y})}),d(p);var I=w(p,2),C=f(I),V=f(C);pt(V,{onFinish:s}),d(C),d(I),d(b),k(r,_),re()}export{Nt as component};
