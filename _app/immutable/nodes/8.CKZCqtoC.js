import{a as k,t as S,c as Se}from"../chunks/D8IZ5tij.js";import{aH as Ie,aI as Ce,aJ as Oe,o as Je,x as $,G as Ue,N as Ge,q as Re,y as Ve,aa as Ke,g as Te,aE as me,au as He,P as ge,p as ae,c as f,r as d,t as B,a as re,f as ee,ac as F,b as he,s as j,i as e,a8 as h,l as A,aK as ke,aL as Qe,aG as je}from"../chunks/DRP5GfAB.js";import{l as _e,s as te,d as Ee,e as we,a as We}from"../chunks/DR-GFnl9.js";import{e as De,i as xe}from"../chunks/Duy6D2ej.js";import{s as L,r as ne}from"../chunks/DC6H13uQ.js";import{i as Xe,p as M}from"../chunks/DlRuioKL.js";import{p as R,i as W}from"../chunks/kFZv4Qm8.js";import{t as X}from"../chunks/Bvena8yX.js";import{a as Ze}from"../chunks/xSQF6w4t.js";import{s as Ye}from"../chunks/DzRVWYVD.js";function Pe(r,t,l){$&&Ue();var n=r,a=Ke,s,v=Ie()?Ce:Oe;Je(()=>{v(a,a=t())&&(s&&Ge(s),s=Re(()=>l(n)))}),$&&(n=Ve)}function ze(r,t,l=t){var n=Ie();_e(r,"input",a=>{var s=a?r.defaultValue:r.value;if(s=de(r)?ue(s):s,l(s),n&&s!==(s=t())){var v=r.selectionStart,m=r.selectionEnd;r.value=s??"",m!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(m,r.value.length))}}),($&&r.defaultValue!==r.value||Te(t)==null&&r.value)&&l(de(r)?ue(r.value):r.value),me(()=>{var a=t();de(r)&&a===ue(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}const ce=new Set;function $e(r,t,l,n,a=n){var s=l.getAttribute("type")==="checkbox",v=r;let m=!1;if(t!==null)for(var g of t)v=v[g]??(v[g]=[]);v.push(l),_e(l,"change",()=>{var i=l.__value;s&&(i=pe(v,i,l.checked)),a(i)},()=>a(s?[]:null)),me(()=>{var i=n();if($&&l.defaultChecked!==l.checked){m=!0;return}s?(i=i||[],l.checked=i.includes(l.__value)):l.checked=Xe(l.__value,i)}),He(()=>{var i=v.indexOf(l);i!==-1&&v.splice(i,1)}),ce.has(v)||(ce.add(v),ge(()=>{v.sort((i,_)=>i.compareDocumentPosition(_)===4?-1:1),ce.delete(v)})),ge(()=>{if(m){var i;if(s)i=pe(v,i,l.checked);else{var _=v.find(p=>p.checked);i=_==null?void 0:_.__value}a(i)}})}function et(r,t,l=t){_e(r,"change",n=>{var a=n?r.defaultChecked:r.checked;l(a)}),($&&r.defaultChecked!==r.checked||Te(t)==null)&&l(r.checked),me(()=>{var n=t();r.checked=!!n})}function pe(r,t,l){for(var n=new Set,a=0;a<r.length;a+=1)r[a].checked&&n.add(r[a].__value);return l||n.delete(t),Array.from(n)}function de(r){var t=r.type;return t==="number"||t==="range"}function ue(r){return r===""?null:+r}var tt=S('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function at(r,t){ae(t,!0);let l=R(t,"borderRadius",3,"10px"),n=R(t,"progress",7,0),a=R(t,"color",3,"rgb(153, 86, 86)"),s=R(t,"extraPadding",3,"18px"),v=R(t,"style",3,"");n(Math.max(1,n()));var m=tt(),g=f(m),i=f(g),_=f(i);{var p=o=>{var c=Se(),b=ee(c);Ye(b,()=>t.children),k(o,c)};W(_,o=>{t.children&&o(p)})}d(i),d(g),d(m),B(()=>{L(m,"style",`aspect-ratio: 1/1; display: inline-block; ${v()??""}`),L(g,"style",`--ring-width: ${l()??""}; --progress: ${n()??""}%; --ring-color: ${a()??""}; --extra-padding: ${s()??""};`)}),k(r,m),re()}var rt=S('<span class="points-change svelte-15n4znc"> </span>'),lt=S('<!> <span class="points svelte-15n4znc"> </span>',1),nt=S('<span class="point-view svelte-15n4znc">ðŸª™ <!></span>');function Fe(r,t){ae(t,!0);let l=t.amount==null,n=F(0),a=F(M(t.amount));he(()=>{t.amount!=e(a)&&(h(n,t.amount-e(a)),h(a,M(t.amount)))});var s=nt(),v=j(f(s));Pe(v,()=>t.amount,m=>{var g=lt(),i=ee(g);{var _=c=>{var b=rt(),w=f(b);d(b),B(E=>{L(b,"style",`color: ${(e(n)>=0?"#0F0":"#F00")??""};`),te(w,`${(e(n)>0?"+":"-")??""}${E??""}`)},[()=>Math.abs(e(n))]),k(c,b)};W(i,c=>{e(n)!=0&&c(_)})}var p=j(i,2),o=f(p,!0);d(p),B(()=>te(o,t.amount)),k(m,g)}),d(s),B(()=>{X(s,"hide-first",l),X(s,"hide-first-reveal",t.amount!=null&&l)}),k(r,s),re()}var st=(r,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,it=S('<button class="btn btn-danger svelte-vyjiyu" aria-label="resume"><i class="bi bi-play-fill svelte-vyjiyu"></i></button>'),ot=S('<button class="btn btn-outline svelte-vyjiyu" aria-label="pause"><i class="bi bi-pause-fill svelte-vyjiyu"></i></button>'),vt=S('<div class="svelte-vyjiyu"><div class="center-hz svelte-vyjiyu" style="color: #bbbE;"> </div> <div class="timer-text center-hz svelte-vyjiyu"> </div> <div class="center-hz svelte-vyjiyu"><button class="btn btn-outline svelte-vyjiyu" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-vyjiyu"></i></button> <!></div></div>'),ct=S('<div class="center-vt svelte-vyjiyu"><div class="form-group svelte-vyjiyu"><label class="svelte-vyjiyu">Duration: <input class="form-control svelte-vyjiyu" type="number" min="1" max="50"></label></div></div>'),dt=(r,t)=>t(!1,!0),ut=S('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-vyjiyu">Cash Out <!></button>'),ft=S('<button class="btn btn-primary btn-lg svelte-vyjiyu">Start</button>'),mt=S('<div class="center-hz svelte-vyjiyu"><div class="center-vt svelte-vyjiyu" style="width: 100%;"><div class="appear svelte-vyjiyu"><!> <div class="center-hz mt-4 svelte-vyjiyu"><!></div></div></div></div>');function ht(r,t){ae(t,!0);let l=R(t,"onFinish",3,void 0),n=F(!1),a=F(!1),s=F(M(t.mode.length)),v=A(()=>e(s)*60),m=F(M(new Date)),g=F(void 0),i=F(0),_=F(0),p=A(()=>e(i)+e(_)),o=A(()=>e(v)-e(p)),c=A(()=>Math.floor(Math.abs(e(o))/60)%60),b=A(()=>Math.round(Math.abs(e(o)))%60),w=A(()=>new Date(e(m).getTime()+(e(v)-e(_))*1e3)),E=A(()=>Math.min(100,Math.round(e(p)/e(v)*100))),I=[10,5,2,1,0];for(;I[0]>=t.mode.length;)I=I.slice(1);function C(y,x,z="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let K={body:x,img:""};z!=null&&(K.tag=z),new Notification(y,K)}}function V(){h(i,(new Date-e(m))/1e3),e(o)<I[0]*60&&(e(o)<0&&I[0]==0?C("Pomodoro","Finished. Good job!"):C("Pomodoro",`${I[0]} minutes remaining.`),I=I.slice(1))}function D(){Notification.requestPermission().then(y=>{}),h(n,!0),h(a,!1),e(i)!=0&&(h(_,e(_)+e(i)),h(i,0)),h(m,M(new Date)),V(),h(g,M(setInterval(V,1e3)))}function T(y=!1,x=!1){let z=e(p)/60;l()(z,y?0:t.mode.calcScore(z,e(s)),x),h(n,!1),h(a,!1),clearInterval(e(g)),h(i,0),h(_,0)}function u(){h(a,!0),clearInterval(e(g))}Ze(()=>{e(n)&&T(!1,!1)});var P=mt();we("keydown",ke,y=>{y.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(n)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&y.key==" "&&(e(a)?D():u(),y.preventDefault())}),we("beforeunload",ke,y=>{e(n)&&(y.preventDefault(),y.returnValue=!0)}),We(y=>{B((x,z)=>Qe.title=`${x??""}:${z??""} - Pomodoro`,[()=>e(c).toString().padStart(2,"0"),()=>e(b).toString().padStart(2,"0")])});var Z=f(P),N=f(Z),Y=f(N);at(Y,{get progress(){return e(E)},get color(){return t.mode.color},style:"width: 100%;",children:(y,x)=>{var z=Se(),K=ee(z);{var oe=H=>{var J=vt(),Q=f(J),le=f(Q,!0);d(Q);var U=j(Q,2),ve=f(U);d(U);var be=j(U,2),ye=f(be);ye.__click=[st,T];var Ae=j(ye,2);{var Be=q=>{var G=it();G.__click=D,k(q,G)},Le=q=>{var G=ot();G.__click=u,k(q,G)};W(Ae,q=>{e(a)?q(Be):q(Le,!1)})}d(be),d(J),B((q,G,qe)=>{te(le,q),X(U,"paused",e(a)),te(ve,`${G??""}:${qe??""}`)},[()=>e(w).toLocaleTimeString(),()=>e(c).toString().padStart(2,"0"),()=>e(b).toString().padStart(2,"0")]),k(H,J)},Ne=H=>{var J=ct(),Q=f(J),le=f(Q),U=j(f(le));ne(U),d(le),d(Q),d(J),ze(U,()=>e(s),ve=>h(s,ve)),k(H,J)};W(K,H=>{e(n)?H(oe):H(Ne,!1)})}k(y,z)},$$slots:{default:!0}});var O=j(Y,2),se=f(O);{var ie=y=>{var x=ut();x.__click=[dt,T];var z=j(f(x));const K=A(()=>t.mode.calcScore(e(p)/60,e(s)));var oe=A(()=>e(K));Fe(z,{get amount(){return e(oe)}}),d(x),k(y,x)},Me=y=>{var x=ft();x.__click=D,k(y,x)};W(se,y=>{e(n)?y(ie):y(Me,!1)})}d(O),d(N),d(Z),d(P),B(()=>{X(P,"overDone",e(o)<0),X(P,"almostDone",e(o)<60)}),k(r,P),re()}Ee(["click"]);var _t=(r,t,l)=>t()!=null?t()(e(l).finished):null,bt=S('<i class="bi bi-check-square-fill svelte-1jf04s4"></i>'),yt=S('<i class="bi bi-check-square svelte-1jf04s4"></i>'),gt=S('<div class="center-hz todo-item svelte-1jf04s4"><input type="checkbox" class="btn-check svelte-1jf04s4" autocomplete="off"> <label class="btn btn-outline svelte-1jf04s4" style="border: none;"><!></label> <input class="todo-name svelte-1jf04s4" aria-label="Todo name"></div>'),kt=(r,t,l)=>{t(e(l).length-1)},jt=S('<div class="center-vt todo-list svelte-1jf04s4"><h3 style="color: white; margin: 0px;" class="svelte-1jf04s4">Task List</h3> <!> <div class="center-hz todo-item mt-3 svelte-1jf04s4"><button class="btn btn-secondary svelte-1jf04s4">Add Task</button></div></div>');function wt(r,t){ae(t,!0);let l=R(t,"onFinish",3,void 0);function n(o,c,b=null){{let w=localStorage.getItem(o);w&&(c=JSON.parse(w))}return c}let a=F(M(n("todos",[{name:"",finished:!1}])));he(()=>{localStorage.setItem("todos",JSON.stringify(e(a)))});function s(o){return`todo-item-${Math.min(Math.max(0,o),e(a).length-1)}-input`}function v(o){h(a,M([...e(a).slice(0,o+1),{id:Date.now(),name:"",finished:!1},...e(a).slice(o+1)])),je().then(()=>{document.getElementById(s(o+1)).focus()})}function m(o,c){var b,w;console.log(o.key),o.key=="Enter"&&e(a)[c].name!=""?(o.preventDefault(),v(c)):(o.key=="Backspace"||o.key=="Delete")&&e(a)[c].name==""&&e(a).length>1?(o.preventDefault(),h(a,M([...e(a).slice(0,c),...e(a).slice(c+1)])),je().then(()=>{var E;(E=document.getElementById(s(c-1)))==null||E.focus()})):o.key=="ArrowUp"?(b=document.getElementById(s(c-1)))==null||b.focus():o.key=="ArrowDown"&&((w=document.getElementById(s(c+1)))==null||w.focus())}var g=jt(),i=j(f(g),2);De(i,17,()=>e(a),xe,(o,c,b)=>{var w=gt(),E=f(w);ne(E),L(E,"id",`todo-btn-${b??""}`),E.__change=[_t,l,c];var I=j(E,2);L(I,"for",`todo-btn-${b??""}`);var C=f(I);{var V=u=>{var P=bt();k(u,P)},D=u=>{var P=yt();k(u,P)};W(C,u=>{e(c).finished?u(V):u(D,!1)})}d(I);var T=j(I,2);ne(T),L(T,"id",`todo-item-${b}-input`),T.__keydown=u=>m(u,b),d(w),B(()=>X(w,"finished",e(c).finished)),et(E,()=>e(c).finished,u=>e(c).finished=u),ze(T,()=>e(c).name,u=>e(c).name=u),k(o,w)});var _=j(i,2),p=f(_);p.__click=[kt,v,a],d(_),d(g),k(r,g),re()}Ee(["change","keydown","click"]);class fe{constructor({name:t,length:l,color:n,reward:a,hasTask:s=!1}){this.name=t,this.length=l,this.color=n,this.reward=a,this.hasTask=s}calcScore(t,l){let n=5;if(t<.5)return 0;let a=t>l?Math.min(1,l/this.length):t<this.length?t/this.length:1,s=t>l?Math.pow((t-l)/n,2):0;return Math.max(0,Math.round((a-s)*this.reward))}}var pt=S('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-j5stjh"> </label>',1),St=S('<br> <br>  <div class="menu-bar mb-3 svelte-j5stjh"><div></div> <div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div> <!></div> <div class="blocky-container mt-5 svelte-j5stjh"><div class="svelte-j5stjh"></div> <div style="margin-bottom: 70px;" class="svelte-j5stjh"><!></div> <div class="center-hz svelte-j5stjh"><div><!></div></div></div>',1);function At(r,t){ae(t,!0);const l=[],n={work:new fe({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new fe({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new fe({name:"Long Break",length:10,color:"#237047",reward:450})};let a=F("work"),s=0;function v(D,T){{let u=parseInt(localStorage.getItem("points"));u&&(T=parseInt(u))}return T}let m=F(M(v("points",0)));he(()=>{localStorage.setItem("points",e(m))});function g(D,T,u){h(m,e(m)+T),u&&(e(a)=="work"?(s+=D,s>=n.work.length*3.4?(s=0,h(a,"longbreak")):h(a,"break")):h(a,"work"))}function i(D){h(m,e(m)+200*(D?1:-1))}var _=St(),p=j(ee(_),4),o=j(f(p),2);De(o,21,()=>Object.entries(n),xe,(D,T)=>{let u=()=>e(T)[0],P=()=>e(T)[1];var Z=pt(),N=ee(Z);ne(N);var Y,O=j(N,2),se=f(O,!0);d(O),B(()=>{L(N,"id",`radio-${u()}`),Y!==(Y=u())&&(N.value=(N.__value=u())==null?"":u()),L(O,"for",`radio-${u()}`),L(O,"style",e(a)==u()?`background-color: ${P().color};`:""),te(se,P().name)}),$e(l,[],N,()=>(u(),e(a)),ie=>h(a,ie)),k(D,Z)}),d(o);var c=j(o,2);Fe(c,{get amount(){return e(m)}}),d(p);var b=j(p,2),w=j(f(b),2),E=f(w);Pe(E,()=>e(a),D=>{ht(D,{get mode(){return n[e(a)]},onFinish:g})}),d(w);var I=j(w,2),C=f(I),V=f(C);wt(V,{onFinish:i}),d(C),d(I),d(b),k(r,_),re()}export{At as component};
