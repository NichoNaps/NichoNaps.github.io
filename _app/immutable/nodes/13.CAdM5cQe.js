import{a as m,t as k,c as ut}from"../chunks/u3dcRfK7.js";import{v as Bt,aK as Ct,ak as Ot,y as Ut,w as kt,K as $t,R as Rt,z as Vt,C as jt,af as Jt,p as at,c,r as i,t as H,a as nt,f as Q,aj as A,h as Dt,g as t,ad as p,s as w,aL as pt,$ as Kt,m as O,aJ as yt,n as Gt}from"../chunks/DzHGrAB7.js";import{s as dt,d as Tt,e as wt}from"../chunks/hVlh8FA6.js";import{p as $,i as j,a as It,b as ct,c as R,d as St}from"../chunks/CbRT5sQE.js";import{e as xt,i as Mt}from"../chunks/Ch4bqiDD.js";import{s as J,r as mt}from"../chunks/BW97vLB3.js";import{a as Ft,b as Wt,c as Ht}from"../chunks/Ctp1LBSw.js";import{p as M}from"../chunks/CYEbeHLi.js";import{h as Qt}from"../chunks/D6Xn1kCk.js";import{t as st}from"../chunks/Cqanicu_.js";import{a as Xt}from"../chunks/-tluWSQ4.js";import{s as Pt}from"../chunks/pE0dASaU.js";import{w as Zt}from"../chunks/CA1u_qlU.js";function Lt(v,e,n){kt&&$t();var o=v,a=Jt,l,h=Bt()?Ct:Ot;Ut(()=>{h(a,a=e())&&(l&&Rt(l),l=Vt(()=>n(o)))}),kt&&(o=jt)}var Yt=k('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function te(v,e){at(e,!0);let n=$(e,"borderRadius",3,"10px"),o=$(e,"progress",7,0),a=$(e,"color",3,"rgb(153, 86, 86)"),l=$(e,"extraPadding",3,"18px"),h=$(e,"style",3,"");o(Math.max(1,o()));var d=Yt(),y=c(d),I=c(y),u=c(I);{var g=S=>{var b=ut(),E=Q(b);Pt(E,()=>e.children),m(S,b)};j(u,S=>{e.children&&S(g)})}i(I),i(y),i(d),H(()=>{J(d,"style",`aspect-ratio: 1/1; display: inline-block; ${h()??""}`),J(y,"style",`--ring-width: ${n()??""}; --progress: ${o()??""}%; --ring-color: ${a()??""}; --extra-padding: ${l()??""};`)}),m(v,d),nt()}var ee=k('<span class="points-change svelte-muo1s8"> </span>'),ae=k('<span class="point-view svelte-muo1s8"><!> <span class="points svelte-muo1s8"> </span></span>');function Nt(v,e){at(e,!0);let n=$(e,"formatter",7,null),o=e.amount==null,a=A(0),l=A(M(e.amount));Dt(()=>{n().format(0)!=n().format(Math.abs(e.amount-t(l)))&&(p(a,e.amount-t(l)),p(l,M(e.amount)))}),n(n()==null?new Intl.NumberFormat("en-US"):n());var h=ae(),d=c(h);Lt(d,()=>t(a),u=>{var g=ut(),S=Q(g);{var b=E=>{var N=ee(),z=c(N);i(N),H(K=>{J(N,"style",`color: ${(t(a)>=0?"#0F0":"#F00")??""};`),dt(z,`${(t(a)>0?"+":"-")??""}${K??""}`)},[()=>n().format(Math.abs(t(a)))]),m(E,N)};j(S,E=>{t(a)!=0&&E(b)})}m(u,g)});var y=w(d,2),I=c(y,!0);i(y),i(h),H(u=>{st(h,"hide-first",o),st(h,"hide-first-reveal",e.amount!=null&&o),dt(I,u)},[()=>n().format(e.amount)]),m(v,h),nt()}var ne=k('<span class="svelte-gdak9n">ðŸª™ <!></span>');function Et(v,e){var n=ne(),o=w(c(n));Nt(o,{get amount(){return e.amount}}),i(n),m(v,n)}var oe=(v,e)=>confirm("Quit timer without cashing out?")?e(!0,!1):null,re=k('<button class="btn btn-danger svelte-pmthtr" aria-label="resume"><i class="bi bi-play-fill svelte-pmthtr"></i></button>'),se=k('<button class="btn btn-outline svelte-pmthtr" aria-label="pause"><i class="bi bi-pause-fill svelte-pmthtr"></i></button>'),ie=k('<div class="center-hz svelte-pmthtr"><button class="btn btn-outline svelte-pmthtr" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-pmthtr"></i></button> <!></div>'),le=k('<div class="center-hz svelte-pmthtr"><input class="form-control svelte-pmthtr" type="number" style="width: 50%;" min="1" max="50"></div>'),ce=k('<div class="svelte-pmthtr"><div class="timer-subtext center-hz svelte-pmthtr"> </div> <div class="timer-text center-hz svelte-pmthtr"> </div> <!></div>'),ve=(v,e)=>e(!1,!0),de=k('<button id="cashout-btn" class="btn btn-secondary btn-lg svelte-pmthtr">Cash Out <!></button>'),ue=k('<button class="btn btn-primary btn-lg svelte-pmthtr">Start</button>'),me=k('<div class="center-hz svelte-pmthtr"><div class="center-vt svelte-pmthtr" style="width: 100%;"><div class="appear svelte-pmthtr"><!> <div class="center-hz mt-4 svelte-pmthtr"><!></div></div></div></div>');function fe(v,e){at(e,!0);let n=$(e,"onFinish",3,void 0),o=$(e,"onStart",3,void 0),a=A(!1),l=A(!1),h=A(M(e.mode.length)),d=O(()=>t(h)*60),y=A(M(new Date)),I=A(void 0),u=A(0),g=A(0),S=O(()=>t(u)+t(g)),b=O(()=>t(d)-t(S)),E=O(()=>Math.floor(Math.abs(t(b))/60)%60),N=O(()=>Math.round(Math.abs(t(b)))%60),z=O(()=>`${t(E).toString().padStart(2,"0")}:${t(N).toString().padStart(2,"0")}`),K=O(()=>new Date(t(y).getTime()+(t(d)-t(g))*1e3)),X=O(()=>Math.min(100,Math.round(t(S)/t(d)*100))),r=[10,5,2,1,0];for(;r[0]>=e.mode.length;)r=r.slice(1);function _(s,f,L="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let C={body:f,img:""};L!=null&&(C.tag=L),new Notification(s,C)}}function F(){p(u,(new Date-t(y))/1e3),t(b)<r[0]*60?(t(b)<0&&r[0]==0?_("Pomodoro","Finished. Good job!"):_("Pomodoro",`${r[0]} minutes remaining.`),r=r.slice(1)):t(b)<0&&r.length==0&&Math.abs(Math.abs(t(b))%60-30)<.6&&_("Pomodoro",`Overtime by ${(Math.abs(t(d)+t(b))/60).toFixed(1)} minutes.`)}function D(){o()&&o()(),Notification.requestPermission().then(s=>{}),p(a,!0),p(l,!1),t(u)!=0&&(p(g,t(g)+t(u)),p(u,0)),p(y,M(new Date)),F(),p(I,M(setInterval(F,1e3)))}function P(s=!1,f=!1){let L=t(S)/60;n()(L,s?0:e.mode.calcScore(L,t(h)),f),p(a,!1),p(l,!1),clearInterval(t(I)),p(u,0),p(g,0)}function V(){p(l,!0),clearInterval(t(I))}Xt(()=>{t(a)&&P(!1,!1)});var q=me();wt("keydown",pt,s=>{s.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),t(a)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&s.key==" "&&(t(l)?D():V(),s.preventDefault())}),wt("beforeunload",pt,s=>{t(a)&&(s.preventDefault(),s.returnValue=!0)}),Qt(s=>{H(()=>Kt.title=`${(t(a)?`${t(z)} - `:"")??""}Pomodoro`)});var Z=c(q),Y=c(Z),B=c(Y);te(B,{get progress(){return t(X)},get color(){return e.mode.color},style:"width: 100%;",children:(s,f)=>{var L=ce(),C=c(L),U=c(C,!0);i(C);var tt=w(C,2),ot=c(tt,!0);i(tt);var ht=w(tt,2);{var bt=W=>{var et=ie(),it=c(et);it.__click=[oe,P];var _t=w(it,2);{var At=rt=>{var lt=re();lt.__click=D,m(rt,lt)},qt=rt=>{var lt=se();lt.__click=V,m(rt,lt)};j(_t,rt=>{t(l)?rt(At):rt(qt,!1)})}i(et),m(W,et)},zt=W=>{var et=le(),it=c(et);mt(it),i(et),Ft(it,()=>t(h),_t=>p(h,_t)),m(W,et)};j(ht,W=>{t(a)?W(bt):W(zt,!1)})}i(L),H(W=>{dt(U,W),st(tt,"paused",t(l)),dt(ot,t(z))},[()=>t(K).toLocaleTimeString()]),m(s,L)},$$slots:{default:!0}});var x=w(B,2),G=c(x);{var ft=s=>{var f=de();f.__click=[ve,P];var L=w(c(f));const C=O(()=>e.mode.calcScore(t(S)/60,t(h)));var U=O(()=>t(C));Et(L,{get amount(){return t(U)}}),i(f),m(s,f)},T=s=>{var f=ue();f.__click=D,m(s,f)};j(G,s=>{t(a)?s(ft):s(T,!1)})}i(x),i(Y),i(Z),i(q),H(()=>{st(q,"overDone",t(b)<0),st(q,"almostDone",t(b)<60)}),m(v,q),nt()}Tt(["click"]);class gt{constructor({name:e,length:n,color:o,reward:a,hasTask:l=!1}){this.name=e,this.length=n,this.color=o,this.reward=a,this.hasTask=l}calcScore(e,n){let o=5;if(e<.5)return 0;let a=e>n?Math.min(1,n/this.length):e<this.length?e/this.length:1,l=e>n?Math.pow((e-n)/o,2):0;return Math.max(0,Math.round((a-l)*this.reward))}}function vt(v,e,n=null){{let a=localStorage.getItem(v);a!==null&&(e=JSON.parse(a))}const o=Zt(e);return o.subscribe(a=>{console.log("WRITING",a),localStorage.setItem(v,JSON.stringify(a))}),o}var he=k('<div class="body svelte-mgslqn"><!></div>');function be(v,e){at(e,!0);let n=$(e,"visible",15,!0),o=O(()=>n()?Date.now():null);var a=ut();wt("click",pt,d=>{n()&&Date.now()-t(o)>200&&n(!1)});var l=Q(a);{var h=d=>{var y=he(),I=c(y);{var u=g=>{var S=ut(),b=Q(S);Pt(b,()=>e.children),m(g,S)};j(I,g=>{e.children&&g(u)})}i(y),m(d,y)};j(l,d=>{n()&&d(h)})}m(v,a),nt()}function _e(v,e,n,o){confirm("Delete all tasks?")&&R(n,M(o()))}function ge(v,e,n,o){let a=e().filter(l=>l.finished==!1);a.length==0?R(n,M(o())):R(n,M(a))}var pe=(v,e)=>p(e,!t(e)),we=k('<button class="btn btn-secondary option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete Completed</button> <button class="btn btn-danger option-btn svelte-1wamo6n"><i class="bi bi-x-octagon svelte-1wamo6n"></i> Delete All</button>',1),ke=(v,e,n)=>e()!=null?e()(t(n).finished):null,ye=k('<i class="bi bi-check-square-fill svelte-1wamo6n"></i>'),Se=k('<i class="bi bi-check-square svelte-1wamo6n"></i>'),De=k('<div class="center-hz todo-item svelte-1wamo6n"><input type="checkbox" class="btn-check svelte-1wamo6n" autocomplete="off"> <label class="btn btn-outline svelte-1wamo6n" style="border: none;"><!></label> <input class="todo-name svelte-1wamo6n" aria-label="Todo name"></div>'),Te=(v,e,n,o)=>{e(n().length-1)},Ie=k('<div class="center-vt todo-list svelte-1wamo6n"><div class="list-header svelte-1wamo6n"><h3 style="color: white; margin: 0px;" class="svelte-1wamo6n">Task List</h3> <button class="btn btn-outline svelte-1wamo6n" aria-label="Open todo list options"><i class="bi bi-three-dots-vertical svelte-1wamo6n"></i></button></div> <!> <!> <div class="center-hz todo-item mt-3 svelte-1wamo6n"><button class="btn btn-secondary svelte-1wamo6n">Add Task</button></div></div>');function xe(v,e){at(e,!0);const[n,o]=It(),a=()=>ct(d,"$todos",n);let l=$(e,"onFinish",3,void 0);function h(){return[{name:"",finished:!1}]}const d=vt("todos",h(),h());function y(r){return`todo-item-${Math.min(Math.max(0,r),a().length-1)}-input`}function I(r){R(d,M([...a().slice(0,r+1),{id:Date.now(),name:"",finished:!1},...a().slice(r+1)])),yt().then(()=>{document.getElementById(y(r+1)).focus()})}function u(r,_){var F,D;console.log(r.key),r.key=="Enter"&&a()[_].name!=""?(r.preventDefault(),I(_)):(r.key=="Backspace"||r.key=="Delete")&&a()[_].name==""&&a().length>1?(r.preventDefault(),R(d,M([...a().slice(0,_),...a().slice(_+1)])),yt().then(()=>{var P;(P=document.getElementById(y(_-1)))==null||P.focus()})):r.key=="ArrowUp"?(F=document.getElementById(y(_-1)))==null||F.focus():r.key=="ArrowDown"&&((D=document.getElementById(y(_+1)))==null||D.focus())}let g=A(!1);var S=Ie(),b=c(S),E=w(c(b),2);E.__click=[pe,g],i(b);var N=w(b,2);be(N,{get visible(){return t(g)},set visible(r){p(g,M(r))},children:(r,_)=>{var F=we(),D=Q(F);D.__click=[ge,a,d,h];var P=w(D,2);P.__click=[_e,a,d,h],m(r,F)},$$slots:{default:!0}});var z=w(N,2);xt(z,1,a,Mt,(r,_,F)=>{var D=De(),P=c(D);mt(P),J(P,"id",`todo-btn-${F??""}`),P.__change=[ke,l,_];var V=w(P,2);J(V,"for",`todo-btn-${F??""}`);var q=c(V);{var Z=x=>{var G=ye();m(x,G)},Y=x=>{var G=Se();m(x,G)};j(q,x=>{t(_).finished?x(Z):x(Y,!1)})}i(V);var B=w(V,2);mt(B),J(B,"id",`todo-item-${F}-input`),B.__keydown=x=>u(x,F),i(D),H(()=>st(D,"finished",t(_).finished)),Wt(P,()=>t(_).finished,x=>(t(_).finished=x,St(n,"$todos"))),Ft(B,()=>t(_).name,x=>(t(_).name=x,St(n,"$todos"))),m(r,D)});var K=w(z,2),X=c(K);X.__click=[Te,I,a,d],i(K),i(S),m(v,S),nt(),o()}Tt(["click","change","keydown"]);var Me=k('<span class="svelte-1qmb3u9"><i class="bi bi-x"></i><!></span>');function Fe(v,e){at(e,!0);const n=new Intl.NumberFormat("en-US",{minimumFractionDigits:1,maximumFractionDigits:1});var o=Me(),a=w(c(o));Nt(a,{get amount(){return e.amount},formatter:n}),i(o),m(v,o),nt()}var Pe=k('<!> <!> <i class="bi bi-circle"></i>',1),Le=k('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-19wlce9"> </label>',1),Ne=k('<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""> <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&amp;display=swap" rel="stylesheet">  <div class="menu-bar svelte-19wlce9"><!></div> <br> <div class="center-hz svelte-19wlce9"><div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div></div> <div class="blocky-container mt-5 svelte-19wlce9"><div class="svelte-19wlce9"></div> <div style="margin-bottom: 70px;" class="svelte-19wlce9"><!></div> <div class="center-hz svelte-19wlce9"><!></div></div>',1);function Ke(v,e){at(e,!0);const[n,o]=It(),a=()=>ct(E,"$storeLastStart",n),l=()=>ct(b,"$storeLastFinish",n),h=()=>ct(S,"$storeMultiplierSum",n),d=()=>ct(g,"$storePoints",n),y=[],I={work:new gt({name:"Work",length:25,color:"#ab5744",reward:500,hasTask:!0}),break:new gt({name:"Break",length:5,color:"#4d82ab",reward:100}),longbreak:new gt({name:"Long Break",length:10,color:"#237047",reward:200})};let u=A("work");const g=vt("points",0,null),S=vt("multiplier",1,null),b=vt("lastFinish",0,0),E=vt("lastStart",0,0);let N=A(1);function z(){let T=a()>l()?a()-l():Date.now()-l();p(N,M(Math.max(1,h()-Math.pow(T/(10*60*1e3),4))))}Dt(()=>{const T=setInterval(z,5e3);return()=>clearInterval(T)}),z();function K(){R(E,M(Date.now())),z()}let X=0;function r(T,s,f){R(g,M(Math.round(d()+s*t(N)))),R(b,M(Date.now())),R(S,t(N)+(s>0?T*.1:0)),z(),f&&(t(u)=="work"?(X+=T,X>=I.work.length*3.4?(X=0,p(u,"longbreak")):p(u,"break")):p(u,"work"))}function _(T){R(g,M(Math.round(d()+100*(T?1:-1)*t(N))))}var F=Ne(),D=w(Q(F),6),P=c(D);{var V=T=>{var s=Pe(),f=Q(s);Fe(f,{get amount(){return t(N)}});var L=w(f,2);Et(L,{get amount(){return d()}}),Gt(2),m(T,s)};j(P,T=>{T(V)})}i(D);var q=w(D,4),Z=c(q);xt(Z,21,()=>Object.entries(I),Mt,(T,s)=>{let f=()=>t(s)[0],L=()=>t(s)[1];var C=Le(),U=Q(C);mt(U);var tt,ot=w(U,2),ht=c(ot,!0);i(ot),H(()=>{J(U,"id",`radio-${f()}`),tt!==(tt=f())&&(U.value=(U.__value=f())==null?"":f()),J(ot,"for",`radio-${f()}`),J(ot,"style",t(u)==f()?`background-color: ${L().color};`:""),dt(ht,L().name)}),Ht(y,[],U,()=>(f(),t(u)),bt=>p(u,bt)),m(T,C)}),i(Z),i(q);var Y=w(q,2),B=w(c(Y),2),x=c(B);Lt(x,()=>t(u),T=>{fe(T,{get mode(){return I[t(u)]},onFinish:r,onStart:K})}),i(B);var G=w(B,2),ft=c(G);xe(ft,{onFinish:_}),i(G),i(Y),m(v,F),nt(),o()}export{Ke as component};
