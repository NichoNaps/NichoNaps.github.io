import{a as p,t as T,c as Le}from"../chunks/D8IZ5tij.js";import{aH as je,aI as Ce,aJ as Oe,o as Je,x as Q,G as Ue,N as Ge,q as Re,y as Ve,aa as Ke,g as pe,aE as ue,au as He,P as be,p as Z,c as u,r as d,t as A,a as Y,f as te,ac as P,b as fe,s as k,i as e,a8 as h,aK as ge,aL as Qe,l as N,aG as ye}from"../chunks/DRP5GfAB.js";import{l as me,s as W,d as Se,e as ke,a as We}from"../chunks/DR-GFnl9.js";import{e as Ie,i as Te}from"../chunks/Duy6D2ej.js";import{s as B,r as ae}from"../chunks/DC6H13uQ.js";import{i as Xe,p as F}from"../chunks/DlRuioKL.js";import{p as U,i as X}from"../chunks/kFZv4Qm8.js";import{t as K}from"../chunks/Bvena8yX.js";import{a as Ze}from"../chunks/xSQF6w4t.js";import{s as Ye}from"../chunks/DzRVWYVD.js";function Ee(r,t,n){Q&&Ue();var i=r,a=Ke,l,v=je()?Ce:Oe;Je(()=>{v(a,a=t())&&(l&&Ge(l),l=Re(()=>n(i)))}),Q&&(i=Ve)}function De(r,t,n=t){var i=je();me(r,"input",a=>{var l=a?r.defaultValue:r.value;if(l=ve(r)?ce(l):l,n(l),i&&l!==(l=t())){var v=r.selectionStart,m=r.selectionEnd;r.value=l??"",m!==null&&(r.selectionStart=v,r.selectionEnd=Math.min(m,r.value.length))}}),(Q&&r.defaultValue!==r.value||pe(t)==null&&r.value)&&n(ve(r)?ce(r.value):r.value),ue(()=>{var a=t();ve(r)&&a===ce(r.value)||r.type==="date"&&!a&&!r.value||a!==r.value&&(r.value=a??"")})}const oe=new Set;function $e(r,t,n,i,a=i){var l=n.getAttribute("type")==="checkbox",v=r;let m=!1;if(t!==null)for(var y of t)v=v[y]??(v[y]=[]);v.push(n),me(n,"change",()=>{var s=n.__value;l&&(s=we(v,s,n.checked)),a(s)},()=>a(l?[]:null)),ue(()=>{var s=i();if(Q&&n.defaultChecked!==n.checked){m=!0;return}l?(s=s||[],n.checked=s.includes(n.__value)):n.checked=Xe(n.__value,s)}),He(()=>{var s=v.indexOf(n);s!==-1&&v.splice(s,1)}),oe.has(v)||(oe.add(v),be(()=>{v.sort((s,_)=>s.compareDocumentPosition(_)===4?-1:1),oe.delete(v)})),be(()=>{if(m){var s;if(l)s=we(v,s,n.checked);else{var _=v.find(j=>j.checked);s=_==null?void 0:_.__value}a(s)}})}function et(r,t,n=t){me(r,"change",i=>{var a=i?r.defaultChecked:r.checked;n(a)}),(Q&&r.defaultChecked!==r.checked||pe(t)==null)&&n(r.checked),ue(()=>{var i=t();r.checked=!!i})}function we(r,t,n){for(var i=new Set,a=0;a<r.length;a+=1)r[a].checked&&i.add(r[a].__value);return n||i.delete(t),Array.from(i)}function ve(r){var t=r.type;return t==="number"||t==="range"}function ce(r){return r===""?null:+r}var tt=T('<div><div class="backing svelte-efxvsm"><div><!></div></div></div>');function at(r,t){Z(t,!0);let n=U(t,"borderRadius",3,"10px"),i=U(t,"progress",7,0),a=U(t,"color",3,"rgb(153, 86, 86)"),l=U(t,"extraPadding",3,"18px"),v=U(t,"style",3,"");i(Math.max(1,i()));var m=tt(),y=u(m),s=u(y),_=u(s);{var j=o=>{var c=Le(),b=te(c);Ye(b,()=>t.children),p(o,c)};X(_,o=>{t.children&&o(j)})}d(s),d(y),d(m),A(()=>{B(m,"style",`aspect-ratio: 1/1; display: inline-block; ${v()??""}`),B(y,"style",`--ring-width: ${n()??""}; --progress: ${i()??""}%; --ring-color: ${a()??""}; --extra-padding: ${l()??""};`)}),p(r,m),Y()}var rt=T('<span class="points-change svelte-15n4znc"> </span>'),nt=T('<!> <span class="points svelte-15n4znc"> </span>',1),lt=T('<span class="point-view svelte-15n4znc">ðŸª™ <!></span>');function xe(r,t){Z(t,!0);let n=t.amount==null,i=P(0),a=P(F(t.amount));fe(()=>{t.amount!=e(a)&&(h(i,t.amount-e(a)),h(a,F(t.amount)))});var l=lt(),v=k(u(l));Ee(v,()=>t.amount,m=>{var y=nt(),s=te(y);{var _=c=>{var b=rt(),w=u(b);d(b),A(E=>{B(b,"style",`color: ${(e(i)>=0?"#0F0":"#F00")??""};`),W(w,`${(e(i)>0?"+":"-")??""}${E??""}`)},[()=>Math.abs(e(i))]),p(c,b)};X(s,c=>{e(i)!=0&&c(_)})}var j=k(s,2),o=u(j,!0);d(j),A(()=>W(o,t.amount)),p(m,y)}),d(l),A(()=>{K(l,"hide-first",n),K(l,"hide-first-reveal",t.amount!=null&&n)}),p(r,l),Y()}var it=(r,t)=>confirm("Quit timer without cashing out?")?t(!0,!1):null,st=T('<button class="btn btn-danger svelte-vyjiyu" aria-label="resume"><i class="bi bi-play-fill svelte-vyjiyu"></i></button>'),ot=T('<button class="btn btn-outline svelte-vyjiyu" aria-label="pause"><i class="bi bi-pause-fill svelte-vyjiyu"></i></button>'),vt=T('<div class="svelte-vyjiyu"><div class="center-hz svelte-vyjiyu" style="color: #bbbE;"> </div> <h1 class="timer-text center-hz svelte-vyjiyu"> </h1> <div class="center-hz svelte-vyjiyu"><button class="btn btn-outline svelte-vyjiyu" aria-label="quit timer without cashing out points"><i class="bi bi-x-circle svelte-vyjiyu"></i></button> <!></div></div>'),ct=(r,t)=>t(!1,!0),dt=T('<div class="appear svelte-vyjiyu"><!> <div class="center-hz mt-4 svelte-vyjiyu"><button id="cashout-btn" class="btn btn-secondary svelte-vyjiyu">Cash Out <!></button></div></div>'),ut=T('<div class="center-vt svelte-vyjiyu"><div class="form-group svelte-vyjiyu"><label class="svelte-vyjiyu">Duration: <input class="form-control svelte-vyjiyu" type="number" min="1" max="50"></label></div> <button class="btn btn-primary btn-lg mt-4 svelte-vyjiyu">Start</button></div>'),ft=T('<div class="center-hz svelte-vyjiyu"><div class="center-vt svelte-vyjiyu"><div class="center-hz svelte-vyjiyu"><!></div></div></div>');function mt(r,t){Z(t,!0);let n=U(t,"onFinish",3,void 0),i=P(!1),a=P(!1),l=P(F(t.mode.length)),v=N(()=>e(l)*60),m=P(F(new Date)),y=P(void 0),s=P(0),_=P(0),j=N(()=>e(s)+e(_)),o=N(()=>e(v)-e(j)),c=N(()=>Math.floor(Math.abs(e(o))/60)%60),b=N(()=>Math.round(Math.abs(e(o)))%60),w=N(()=>new Date(e(m).getTime()+(e(v)-e(_))*1e3)),E=N(()=>Math.min(100,Math.round(e(j)/e(v)*100))),S=[10,5,2,1,0];for(;S[0]>=t.mode.length;)S=S.slice(1);function O(g,q,x="pomodoroUpdate"){if((Notification==null?void 0:Notification.permission)==="granted"){let L={body:q,img:""};x!=null&&(L.tag=x),new Notification(g,L)}}function G(){h(s,(new Date-e(m))/1e3),e(o)<S[0]*60&&(e(o)<0&&S[0]==0?O("Pomodoro","Finished. Good job!"):O("Pomodoro",`${S[0]} minutes remaining.`),S=S.slice(1))}function D(){Notification.requestPermission().then(g=>{}),h(i,!0),h(a,!1),e(s)!=0&&(h(_,e(_)+e(s)),h(s,0)),h(m,F(new Date)),G(),h(y,F(setInterval(G,1e3)))}function I(g=!1,q=!1){let x=e(j)/60;n()(x,g?0:t.mode.calcScore(x,e(l)),q),h(i,!1),h(a,!1),clearInterval(e(y)),h(s,0),h(_,0)}function f(){h(a,!0),clearInterval(e(y))}Ze(()=>{e(i)&&I(!1,!1)});var z=ft();ke("keydown",ge,g=>{g.key=="Escape"&&document.activeElement==document.getElementById("timer-name-edit")&&document.activeElement.blur(),e(i)&&!["INPUT","TEXTAREA"].includes(document.activeElement.tagName)&&g.key==" "&&(e(a)?D():f(),g.preventDefault())}),ke("beforeunload",ge,g=>{e(i)&&(g.preventDefault(),g.returnValue=!0)}),We(g=>{A((q,x)=>Qe.title=`${q??""}:${x??""} - Pomodoro`,[()=>e(c).toString().padStart(2,"0"),()=>e(b).toString().padStart(2,"0")])});var H=u(z),M=u(H),$=u(M);{var R=g=>{var q=dt(),x=u(q);at(x,{get progress(){return e(E)},get color(){return t.mode.color},style:"width: 100%;",children:(ze,St)=>{var ie=vt(),se=u(ie),Pe=u(se,!0);d(se);var ee=k(se,2),Fe=u(ee);d(ee);var he=k(ee,2),_e=u(he);_e.__click=[it,I];var Me=k(_e,2);{var Ne=C=>{var J=st();J.__click=D,p(C,J)},Ae=C=>{var J=ot();J.__click=f,p(C,J)};X(Me,C=>{e(a)?C(Ne):C(Ae,!1)})}d(he),d(ie),A((C,J,Be)=>{W(Pe,C),K(ee,"paused",e(a)),W(Fe,`${J??""}:${Be??""}`)},[()=>e(w).toLocaleTimeString(),()=>e(c).toString().padStart(2,"0"),()=>e(b).toString().padStart(2,"0")]),p(ze,ie)},$$slots:{default:!0}});var L=k(x,2),V=u(L);V.__click=[ct,I];var ne=k(u(V));const le=N(()=>t.mode.calcScore(e(j)/60,e(l)));var qe=N(()=>e(le));xe(ne,{get amount(){return e(qe)}}),d(V),d(L),d(q),p(g,q)},re=g=>{var q=ut(),x=u(q),L=u(x),V=k(u(L));ae(V),d(L),d(x);var ne=k(x,2);ne.__click=D,d(q),De(V,()=>e(l),le=>h(l,le)),p(g,q)};X($,g=>{e(i)?g(R):g(re,!1)})}d(M),d(H),d(z),A(()=>{K(z,"overDone",e(o)<0),K(z,"almostDone",e(o)<60)}),p(r,z),Y()}Se(["click"]);var ht=(r,t,n)=>t()!=null?t()(e(n).finished):null,_t=T('<i class="bi bi-check-square-fill svelte-1jf04s4"></i>'),bt=T('<i class="bi bi-check-square svelte-1jf04s4"></i>'),gt=T('<div class="center-hz todo-item svelte-1jf04s4"><input type="checkbox" class="btn-check svelte-1jf04s4" autocomplete="off"> <label class="btn btn-outline svelte-1jf04s4" style="border: none;"><!></label> <input class="todo-name svelte-1jf04s4" aria-label="Todo name"></div>'),yt=(r,t,n)=>{t(e(n).length-1)},kt=T('<div class="center-vt todo-list svelte-1jf04s4"><h3 style="color: white; margin: 0px;" class="svelte-1jf04s4">Task List</h3> <!> <div class="center-hz todo-item mt-3 svelte-1jf04s4"><button class="btn btn-secondary svelte-1jf04s4">Add Task</button></div></div>');function wt(r,t){Z(t,!0);let n=U(t,"onFinish",3,void 0);function i(o,c,b=null){{let w=localStorage.getItem(o);w&&(c=JSON.parse(w))}return c}let a=P(F(i("todos",[{name:"",finished:!1}])));fe(()=>{localStorage.setItem("todos",JSON.stringify(e(a)))});function l(o){return`todo-item-${Math.min(Math.max(0,o),e(a).length-1)}-input`}function v(o){h(a,F([...e(a).slice(0,o+1),{id:Date.now(),name:"",finished:!1},...e(a).slice(o+1)])),ye().then(()=>{document.getElementById(l(o+1)).focus()})}function m(o,c){var b,w;console.log(o.key),o.key=="Enter"&&e(a)[c].name!=""?(o.preventDefault(),v(c)):(o.key=="Backspace"||o.key=="Delete")&&e(a)[c].name==""&&e(a).length>1?(o.preventDefault(),h(a,F([...e(a).slice(0,c),...e(a).slice(c+1)])),ye().then(()=>{var E;(E=document.getElementById(l(c-1)))==null||E.focus()})):o.key=="ArrowUp"?(b=document.getElementById(l(c-1)))==null||b.focus():o.key=="ArrowDown"&&((w=document.getElementById(l(c+1)))==null||w.focus())}var y=kt(),s=k(u(y),2);Ie(s,17,()=>e(a),Te,(o,c,b)=>{var w=gt(),E=u(w);ae(E),B(E,"id",`todo-btn-${b??""}`),E.__change=[ht,n,c];var S=k(E,2);B(S,"for",`todo-btn-${b??""}`);var O=u(S);{var G=f=>{var z=_t();p(f,z)},D=f=>{var z=bt();p(f,z)};X(O,f=>{e(c).finished?f(G):f(D,!1)})}d(S);var I=k(S,2);ae(I),B(I,"id",`todo-item-${b}-input`),I.__keydown=f=>m(f,b),d(w),A(()=>K(w,"finished",e(c).finished)),et(E,()=>e(c).finished,f=>e(c).finished=f),De(I,()=>e(c).name,f=>e(c).name=f),p(o,w)});var _=k(s,2),j=u(_);j.__click=[yt,v,a],d(_),d(y),p(r,y),Y()}Se(["change","keydown","click"]);class de{constructor({name:t,length:n,color:i,reward:a,hasTask:l=!1}){this.name=t,this.length=n,this.color=i,this.reward=a,this.hasTask=l}calcScore(t,n){let i=5;if(t<.1)return 0;let a=t>n?Math.min(1,n/this.length):t<this.length?t/this.length:1,l=t>n?Math.pow((t-n)/i,2):0;return Math.max(0,Math.round((a-l)*this.reward))}}var jt=T('<input type="radio" class="btn-check" autocomplete="off"> <label class="btn btn-outline radio-btn svelte-gg4nqw"> </label>',1),pt=T('<br> <br>  <div class="menu-bar mb-3 svelte-gg4nqw"><div></div> <div class="btn-group" role="group" aria-label="Pomodoro Mode Selector"></div> <!></div> <div class="blocky-container mt-5 svelte-gg4nqw"><div class="svelte-gg4nqw"></div> <div style="margin-bottom: 70px;" class="svelte-gg4nqw"><!></div> <div class="center-hz svelte-gg4nqw"><div><!></div></div></div>',1);function Nt(r,t){Z(t,!0);const n=[],i={work:new de({name:"Work",length:25,color:"#ab5744",reward:1e3,hasTask:!0}),break:new de({name:"Break",length:5,color:"#4d82ab",reward:300}),longbreak:new de({name:"Long Break",length:10,color:"#237047",reward:450})};let a=P("work"),l=0;function v(D,I){{let f=parseInt(localStorage.getItem("points"));f&&(I=parseInt(f))}return I}let m=P(F(v("points",0)));fe(()=>{localStorage.setItem("points",e(m))});function y(D,I,f){h(m,e(m)+I),f&&(e(a)=="work"?(l+=D,l>=i.work.length*3.4?(l=0,h(a,"longbreak")):h(a,"break")):h(a,"work"))}function s(D){h(m,e(m)+200*(D?1:-1))}var _=pt(),j=k(te(_),4),o=k(u(j),2);Ie(o,21,()=>Object.entries(i),Te,(D,I)=>{let f=()=>e(I)[0],z=()=>e(I)[1];var H=jt(),M=te(H);ae(M);var $,R=k(M,2),re=u(R,!0);d(R),A(()=>{B(M,"id",`radio-${f()}`),$!==($=f())&&(M.value=(M.__value=f())==null?"":f()),B(R,"for",`radio-${f()}`),B(R,"style",e(a)==f()?`background-color: ${z().color};`:""),W(re,z().name)}),$e(n,[],M,()=>(f(),e(a)),g=>h(a,g)),p(D,H)}),d(o);var c=k(o,2);xe(c,{get amount(){return e(m)}}),d(j);var b=k(j,2),w=k(u(b),2),E=u(w);Ee(E,()=>e(a),D=>{mt(D,{get mode(){return i[e(a)]},onFinish:y})}),d(w);var S=k(w,2),O=u(S),G=u(O);wt(G,{onFinish:s}),d(O),d(S),d(b),p(r,_),Y()}export{Nt as component};
