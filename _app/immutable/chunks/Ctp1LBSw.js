import{v as C,w as m,u as S,b as n,x as q,q as t}from"./DzHGrAB7.js";import{l as b}from"./hVlh8FA6.js";import{i as A}from"./CYEbeHLi.js";function i(e,c,a=c){var f=C();b(e,"input",r=>{var d=r?e.defaultValue:e.value;if(d=k(e)?u(d):d,a(d),f&&d!==(d=c())){var v=e.selectionStart,s=e.selectionEnd;e.value=d??"",s!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(s,e.value.length))}}),(m&&e.defaultValue!==e.value||S(c)==null&&e.value)&&a(k(e)?u(e.value):e.value),n(()=>{var r=c();k(e)&&r===u(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}const h=new Set;function x(e,c,a,f,r=f){var d=a.getAttribute("type")==="checkbox",v=e;let s=!1;if(c!==null)for(var _ of c)v=v[_]??(v[_]=[]);v.push(a),b(a,"change",()=>{var l=a.__value;d&&(l=w(v,l,a.checked)),r(l)},()=>r(d?[]:null)),n(()=>{var l=f();if(m&&a.defaultChecked!==a.checked){s=!0;return}d?(l=l||[],a.checked=l.includes(a.__value)):a.checked=A(a.__value,l)}),q(()=>{var l=v.indexOf(a);l!==-1&&v.splice(l,1)}),h.has(v)||(h.add(v),t(()=>{v.sort((l,o)=>l.compareDocumentPosition(o)===4?-1:1),h.delete(v)})),t(()=>{if(s){var l;if(d)l=w(v,l,a.checked);else{var o=v.find(y=>y.checked);l=o==null?void 0:o.__value}r(l)}})}function B(e,c,a=c){b(e,"change",f=>{var r=f?e.defaultChecked:e.checked;a(r)}),(m&&e.defaultChecked!==e.checked||S(c)==null)&&a(e.checked),n(()=>{var f=c();e.checked=!!f})}function w(e,c,a){for(var f=new Set,r=0;r<e.length;r+=1)e[r].checked&&f.add(e[r].__value);return a||f.delete(c),Array.from(f)}function k(e){var c=e.type;return c==="number"||c==="range"}function u(e){return e===""?null:+e}export{i as a,B as b,x as c};
